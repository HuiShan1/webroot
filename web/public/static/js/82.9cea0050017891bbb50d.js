webpackJsonp([82],{dteg:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("n+6Y");var n=a("C331"),i={data:function(){return{url:"/table-data/mentality/reservation/histories",timeStamp:"",columns:[],statusLabel:{SUCCESS:"预约成功",CANCELED:"取消预约",CANCELED_BY_ADMIN:"后台取消",ING:"进行中",FINISHED:"已结束",DONE:"已完成",ABSENT:"未到",ABORT:"排班被取消"},setting:{cancelTip:""},lang:"zh-cn"}},computed:{translate:function(){return Object(n.e)(this.lang).employmentUnitManage}},created:function(){var t=this,e=localStorage.getItem("lang");Object(n.e)(e)&&(this.lang=e),this._getSetting(),this.columns=[{id:"studentName",title:"姓名",width:120,className:"text-left",hidden:!1,formatter:function(t){return t.student?t.student.name:""}},{id:"studentNo",title:"学号",width:120,className:"text-left",hidden:!1,formatter:function(t){return t.student?t.student.userNo:""}},{id:"teacherName",title:"咨询师",width:100,className:"text-left",hidden:!1,search:{type:"input",data:{placeholer:"",autoFocus:!0}},formatter:function(t){return t.teacher?t.teacher.name:""}},{id:"timeQuantum",title:"预约时间段",width:80,className:"text-center no-wrap",hidden:!1,formatter:function(t){return t.dayTime&&t.dayTime.timeQuantum?t.dayTime.dateTime+" "+t.dayTime.timeQuantum:""}},{id:"createTime",title:"预约时间",width:80,className:"text-center no-wrap",hidden:!1},{id:"status",title:"状态",className:"text-center",width:100,search:{type:"select",data:{options:[{value:"SUCCESS",label:"预约成功"},{value:"CANCELED",label:"取消预约"},{value:"CANCELED_BY_ADMIN",label:"后台取消"},{value:"ING",label:"进行中"},{value:"FINISHED",label:"已结束"},{value:"DONE",label:"已完成"},{value:"ABSENT",label:"未到"},{value:"ABORT",label:"排班被取消"}],optionsLabel:"label",optionsValue:"value"}},hidden:!1,formatter:function(e){return t.statusLabel[e.status]}},{id:"opt",title:this.translate.opt,className:"text-left",width:130,hidden:!1,formatter:function(e){var a=[];return["SUCCESS","ING"].indexOf(e.status)>=0&&e.canCancelOnTime&&a.push({tag:"a",text:"取消预约",callback:function(e,a){t._cancelReservition(e)}}),a}}]},methods:{_getSetting:function(){var t=this;Object(n.c)({url:"/api/mentality/config",type:"get",success:function(e){e.state?t.setting=e.data:t.$toast(e.message)}})},_cancelReservition:function(t){var e=this;this.$prompt({tip:"取消预约原因",placeholder:"请在此处输入取消预约的原因",warn:this.setting.cancelTip,callback:function(a){if("ok"===a.type){if(!a.text)return e.$toast("请输入取消预约原因！"),!1;Object(n.c)({url:"/api/mentality/reservation/"+t.id+"/cancel",type:"put",data:{reason:a.text},success:function(t){t.state?(e.$toast("预约已取消"),e.timeStamp=Object(n.a)()):e.$toast(t.message)}})}}})}}},s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container-fluid",attrs:{id:"my-record"}},[e("div",{staticClass:"row text-center"},[e("v-table",{attrs:{url:this.url+"?timeStamp="+this.timeStamp,pagesize:"10",idField:"id",columns:this.columns,multiple:!1,order:!0,search:!1}})],1)])},staticRenderFns:[]};var l=a("C7Lr")(i,s,!1,function(t){a("x8EC")},null,null);e.default=l.exports},x8EC:function(t,e){}});