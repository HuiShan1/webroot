webpackJsonp([57],{bdLN:function(t,i){},yVZl:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e("C331"),a={props:{data:{default:null}},data:function(){return{formFields:{},pageOptions:{familyMembers:[],parentsMarriageSituation:[{key:"良好",value:"良好"},{key:"一般",value:"一般"}],psychiatricHistory:[{key:!0,value:"有"},{key:!1,value:"无"}],takeMedicine:[{key:!0,value:"是"},{key:!1,value:"否"}],hasConsultingExperience:[{key:!0,value:"是"},{key:!1,value:"否"}]},formatError:{email:!1,contact:!1}}},methods:{_submit:function(){var t=this;Object(s.c)({url:"/api/mentality/reservation/myStudentInfo",type:"put",data:this.formFields,success:function(i){i.state?t.$toast("保存成功"):t.$toast(i.message)}})},_init:function(){var t=this;Object(s.c)({url:"/api/mentality/reservation/myStudentInfo",type:"get",success:function(i){if(i.state){if(i.data)for(var e in i.data)t.$set(t.formFields,e,i.data[e])}else t.$toast("个人信息初始失败："+i.message)}})},checkContact:function(){if(!/^1[3456789]\d{9}$/.test(this.formFields.contact))return this.$toast("联系方式格式不正确"),void(this.formatError.contact=!0);this.formatError.contact=!1},checkEmail:function(){if(!/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/.test(this.formFields.email))return this.$toast("邮箱格式不正确"),void(this.formatError.email=!0);this.formatError.email=!1},_setValue:function(t,i){if("familyMembers"===t){this.formFields[t]||this.$set(this.formFields,t,[]);var e=this.formFields[t].indexOf(i.key);e>=0?this.formFields[t].splice(e,1):this.formFields[t].push(i.key)}else this.$set(this.formFields,t,i.key)},_getFamilyMembers:function(){var t=this;Object(s.c)({url:"/api/system/dicts?dictType=家庭成员类型",type:"get",success:function(i){i.state&&(i.data.forEach(function(t){t.key=t.value,t.value=t.label}),t.pageOptions.familyMembers=i.data)}})}},created:function(){this._init(),this._getFamilyMembers()}},n={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"psychological-student-info"},[e("div",{staticClass:"info-container"},[e("div",{staticClass:"submit-info col-md-12"},[e("span",{staticClass:"title-tip"},[t._v("完善个人信息")]),t._v(" "),e("div",{staticClass:"info-item"},[e("span",{staticClass:"item-title"},[t._v("联系方式:")]),t._v(" "),e("div",{staticClass:"info-options"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formFields.contact,expression:"formFields.contact"}],class:t.formatError.contact?"error":"",attrs:{type:"text"},domProps:{value:t.formFields.contact},on:{change:t.checkContact,input:function(i){i.target.composing||t.$set(t.formFields,"contact",i.target.value)}}})])]),t._v(" "),e("div",{staticClass:"info-item"},[e("span",{staticClass:"item-title"},[t._v("邮箱:")]),t._v(" "),e("div",{staticClass:"info-options"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formFields.email,expression:"formFields.email"}],class:t.formatError.email?"error":"",attrs:{type:"text",placeholder:"请输入邮箱"},domProps:{value:t.formFields.email},on:{change:t.checkEmail,input:function(i){i.target.composing||t.$set(t.formFields,"email",i.target.value)}}})])]),t._v(" "),e("div",{staticClass:"info-item"},[e("span",{staticClass:"item-title"},[t._v("家庭成员:")]),t._v(" "),e("div",{staticClass:"info-options"},t._l(t.pageOptions.familyMembers,function(i,s){return e("span",{key:s,on:{click:function(e){t._setValue("familyMembers",i)}}},[e("i",{staticClass:"maticon",domProps:{innerHTML:t._s(t.icons(t.formFields.familyMembers&&t.formFields.familyMembers.indexOf(i.key)>=0?"check_box":"check_box_outline_blank"))}}),t._v(t._s(i.value)+"\n            ")])}))]),t._v(" "),e("div",{staticClass:"info-item"},[e("span",{staticClass:"item-title"},[t._v("父母婚姻状况:")]),t._v(" "),e("div",{staticClass:"info-options"},t._l(t.pageOptions.parentsMarriageSituation,function(i,s){return e("span",{key:s,on:{click:function(e){t._setValue("parentsMarriageSituation",i)}}},[e("i",{staticClass:"maticon",domProps:{innerHTML:t._s(t.icons(t.formFields.parentsMarriageSituation===i.key?"radio_button_checked":"radio_button_unchecked"))}}),t._v(t._s(i.value)+"\n            ")])}))]),t._v(" "),e("div",{staticClass:"info-item"},[e("span",{staticClass:"item-title"},[t._v("家庭精神病史:")]),t._v(" "),e("div",{staticClass:"info-options"},t._l(t.pageOptions.psychiatricHistory,function(i,s){return e("span",{key:s,on:{click:function(e){t._setValue("psychiatricHistory",i)}}},[e("i",{staticClass:"maticon",domProps:{innerHTML:t._s(t.icons(t.formFields.psychiatricHistory===i.key?"radio_button_checked":"radio_button_unchecked"))}}),t._v(t._s(i.value)+"\n            ")])}))]),t._v(" "),e("div",{staticClass:"info-item"},[e("span",{staticClass:"item-title"},[t._v("是否服用药物:")]),t._v(" "),e("div",{staticClass:"info-options"},t._l(t.pageOptions.takeMedicine,function(i,s){return e("span",{key:s,on:{click:function(e){t._setValue("takeMedicine",i)}}},[e("i",{staticClass:"maticon",domProps:{innerHTML:t._s(t.icons(t.formFields.takeMedicine===i.key?"radio_button_checked":"radio_button_unchecked"))}}),t._v(t._s(i.value)+"\n            ")])}))]),t._v(" "),e("div",{staticClass:"info-item"},[e("span",{staticClass:"item-title"},[t._v("是否有咨询经历:")]),t._v(" "),e("div",{staticClass:"info-options"},t._l(t.pageOptions.hasConsultingExperience,function(i,s){return e("span",{key:s,on:{click:function(e){t._setValue("hasConsultingExperience",i)}}},[e("i",{staticClass:"maticon",domProps:{innerHTML:t._s(t.icons(t.formFields.hasConsultingExperience===i.key?"radio_button_checked":"radio_button_unchecked"))}}),t._v(t._s(i.value)+"\n            ")])}))]),t._v(" "),e("div",{staticClass:"info-item"},[e("span",{staticClass:"item-title"},[t._v("备注:")]),t._v(" "),e("div",{staticClass:"info-options"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formFields.remark,expression:"formFields.remark"}],attrs:{rows:"3"},domProps:{value:t.formFields.remark},on:{input:function(i){i.target.composing||t.$set(t.formFields,"remark",i.target.value)}}})])]),t._v(" "),e("div",{staticClass:"divide-line"}),t._v(" "),e("div",{staticClass:"info-footer"},[e("button",{staticClass:"agree",on:{click:t._submit}},[t._v("保存")])])])])])},staticRenderFns:[]};var o=e("C7Lr")(a,n,!1,function(t){e("bdLN")},null,null);i.default=o.exports}});