webpackJsonp([94],{"7NVL":function(e,t){},Jh1x:function(e,t){},TQO5:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("Dbzz"),a("NGAA");var n=a("xKYl"),i=a.n(n),o=a("C331"),s=a("4DA3"),l=(i.a,s.a,{components:{Radio:i.a,linkage:s.a},data:function(){var e=this;return{showExport:!1,fieldsToExport:[],addLoading:!1,editLoading:!1,startStopLoading:{start:!1,stop:!1},companyDetailId:"",importPage:!1,importParams:{},showTypeModal:!1,consultantTypeData:[{value:"addSingle",label:"单个新增"},{value:"addGroup",label:"批量新增"}],consultantType:"",blackListRecordTableData:"",blacklistRecordDialog:!1,currentPage:"unit",currentPageTitle:"单位管理",unitManagementAuditRecordsList:[],unitManagementAuditRecordsListUrl:"",unitManagementAuditRecordsListColumns:[],changeEmail:{dialog:!1,value:"",email:"",loading:!1},changeEmailRules:{email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur,change"}]},unitsType:"1",unitsInfoEdit:!1,switchState:{disabled:!1},blackRuleForm:{reasons:"",loading:!1},blackRules:{reasons:[{required:!0,message:"请输入移入黑名单原因",trigger:"blur"}]},blacklistDialog:!1,unitInfoDetail:null,columns:[],tableData_url:"/table-data/employment/manage/company/getCompanyBySearch",unitInfoFrom:{companyName:"",companyCode:"",addressV:"",address:"",addressDetail:"",industry:"",scale:"",property:"",label:"",labelV:[],contactPeople:"",contactPhone:"",officePhone:"",fax:"",postcode:"",companyUrl:"",summary:"",invoiceTitle:"",taxpayerNumber:"",companyRepresentative:"",registeredCapital:"",companyCreateTime:"",license:"",licenseTime:"",mailAddress:"",isLong:!1},unitInfoRules:{companyName:[{required:!0,message:"请输入单位名称",trigger:"blur"}],companyCode:[{required:!0,message:"请输入统一社会信用代码",trigger:"blur"}],addressV:[{required:!0,message:"请选择单位所在地",trigger:"change"}],addressDetail:[{required:!0,message:"请输入单位地址",trigger:"blur"}],industry:[{required:!0,message:"请输入所属行业",trigger:"blur"}],scale:[{required:!0,message:"请输入单位规模",trigger:"blur"}],property:[{required:!0,message:"请输入单位性质",trigger:"blur"}],contactPeople:[{required:!0,message:"请输入联系人",trigger:"blur"}],contactPhone:[{required:!0,validator:function(e,t,a){if(!t)return a(new Error("手机号不能为空"));if(!/^1[3|4|5|7|8][0-9]\d{8}$/.test(t))return a(new Error("请输入正确的手机号"));a()},trigger:"blur"}],officePhone:[{required:!0,validator:function(e,t,a){if(!t)return a(new Error("请输入单位电话"));if(!/^0?1[3|4|5|8][0-9]\d{8}$/.test(t)&&!/^([0-9]{3,4}-)?[0-9]{7,8}$/.test(t))return a(new Error("请输入正确的单位电话"));a()},trigger:"blur"}],summary:[{required:!0,message:"请输入单位介绍",trigger:"blur"}],invoiceTitle:[{required:!0,message:"请输入发票抬头",trigger:"blur"}],taxpayerNumber:[{required:!0,validator:function(e,t,a){if(!t)return a(new Error("请输入纳税人识别号"));if(!/^[0-9a-zA-Z]*$/g.test(t))return a(new Error("请输入正确的纳税人识别号"));a()},trigger:"blur"}],companyRepresentative:[{required:!0,message:"请输入公司法人代表",trigger:"blur"}],companyCreateTime:[{required:!0,message:"请选择单位成立日期",trigger:"change"}],license:[{required:!0,message:"请选择上传的营业执照",trigger:"blur"}],mailAddress:[{required:!0,message:"请输入邮箱地址",trigger:"change"},{type:"email",message:"邮箱地址格式错误",trigger:"change"}],licenseTime:[{validator:function(t,a,n){if(!e.unitInfoFrom.isLong&&!a)return n("请输入营业执照到期时间或选择永久");n()},trigger:"blur"}]},industryOptions:[],scaleOptions:[],propertyOptions:[],labelOptions:[]}},created:function(){this.getFindDictByTypeName("行业","industryOptions"),this.getFindDictByTypeName("单位规模","scaleOptions"),this.getFindDictByTypeName("单位标签","labelOptions"),this.getFindDictByTypeName("单位性质","propertyOptions"),this.initColumns(),this.fieldsToExport=[{title:"单位名称",id:"1"},{title:"统一社会代码",id:"2"},{title:"单位所在地",id:"3"},{title:"所属行业",id:"4"},{title:"单位规模",id:"5"},{title:"单位性质",id:"6"},{title:"单位标签",id:"7"},{title:"联系人",id:"8"},{title:"手机号",id:"9"},{title:"单位电话",id:"10"},{title:"单位传真",id:"11"},{title:"单位邮编",id:"12"},{title:"单位网址",id:"13"},{title:"单位介绍",id:"14"},{title:"单位抬头",id:"15"},{title:"纳税人识别号",id:"16"},{title:"公司法人代表",id:"17"},{title:"注册资金",id:"18"},{title:"单位成立日期",id:"19"},{title:"营业执照到期时间",id:"20"}]},watch:{showTypeModal:function(e){},blacklistDialog:function(e){e||this.resetForm("blacklistRuleForm")},currentPage:function(e){"unit"==e&&(this.tableData_url="/table-data/employment/manage/company/getCompanyBySearch?=timestamp"+Object(o.a)())},"changeEmail.dialog":function(e){e||this.resetForm("changeEmailForm")}},methods:{handleCheckedLabelChange:function(e){this.unitInfoFrom.labelV=e},importPageBack:function(){this.importPage=!1,this.showPage("单位管理","unit")},_selectConsultantType:function(e){this.consultantType=e.value},sumbitTypeModal:function(e){var t=this;setTimeout(function(){t.showTypeModal=!1},0),"addSingle"===e?this.onAddUnit():(this.showTypeModal=!1,this.currentPage="importPage",this.importParams={parentPageTitle:"单位管理",downloadTemplateUrl:"/employment/manage/company/template",downloadErrorTemplateUrl:"/employment/manage/company/errorFile",checkTemplateUrl:"/employment/manage/company/checkExcel",templateName:"批量新增单位模板",importBtnType:[{name:"覆盖导入",url:"/employment/manage/company/addByExcel",method:"post",isShowBtn:!0,success:function(e){e.state&&(t.tableData_url="/table-data/employment/manage/company/getCompanyBySearch?=timestamp"+Object(o.a)())}}]})},exportTable:function(){var e=this.$refs.tree.getChecked(),t=[],a="";if(e.length)for(var n=0;n<e.length;n++)t.push(e[n].id);t.length?a="/downloads/employment/manage/company/getCompanyExcel?conditions="+t.join(","):a="/downloads/employment/manage/company/getCompanyExcel";window.location.href=a,this.showExport=!1},licenseChange:function(e){e&&(this.unitInfoFrom.licenseTime="")},onBlacklistRecordDialog:function(){var e=this;this.blacklistRecordDialog=!0,Object(o.e)({url:"/api/employment/blackList/getBlackListRecord?companyId="+this.unitInfoDetail.companyMessage.id,type:"get",success:function(t){t.state?e.blackListRecordTableData=t.data:tthis.$message.error(t.message)}})},_fileLicenseUpload:function(){var e=this,t=new FormData;t.append("file",event.target.files[0]),t.append("fieldName",event.target.files[0].name);event.target.files[0].name;var a=this;Object(o.e)({url:"/upload/storage/images",type:"post",data:t,contentType:!1,processData:!1,success:function(t){"88888"===t.code?e.unitInfoFrom.license=t.data.hash:a.$toast(t.message)}}).always(function(){})},onAddUnit:function(){this.unitsInfoEdit=!0,this.unitInfoFrom={companyName:"",companyCode:"",addressV:"",addressDetail:"",industry:"",scale:"",property:"",label:"",labelV:[],contactPeople:"",contactPhone:"",officePhone:"",fax:"",postcode:"",companyUrl:"",summary:"",invoiceTitle:"",taxpayerNumber:"",companyRepresentative:"",registeredCapital:"",companyCreateTime:"",license:"",licenseTime:"",isLong:!1},this.showPage("新增单位","addUnit")},setUnitInfoFrom:function(e){this.unitsType=e.type,this.unitInfoFrom.companyName=e.companyName,this.unitInfoFrom.companyCode=e.companyCode,this.unitInfoFrom.address=e.address,this.unitInfoFrom.addressDetail=e.addressDetail,this.unitInfoFrom.industry=e.industry,this.unitInfoFrom.scale=e.scale,this.unitInfoFrom.property=e.property,this.unitInfoFrom.label=e.label,this.unitInfoFrom.contactPeople=e.contactPeople,this.unitInfoFrom.contactPhone=e.contactPhone,this.unitInfoFrom.officePhone=e.officePhone,this.unitInfoFrom.fax=e.fax,this.unitInfoFrom.postcode=e.postcode,this.unitInfoFrom.companyUrl=e.companyUrl,this.unitInfoFrom.summary=e.summary,this.unitInfoFrom.invoiceTitle=e.invoiceTitle,this.unitInfoFrom.taxpayerNumber=e.taxpayerNumber,this.unitInfoFrom.companyRepresentative=e.companyRepresentative,this.unitInfoFrom.registeredCapital=e.registeredCapital,this.unitInfoFrom.companyCreateTime=e.companyCreateTime+" 00:00:00",this.unitInfoFrom.license=e.license,this.unitInfoFrom.licenseTime=e.licenseTime+" 00:00:00",this.unitInfoFrom.isLong=1==e.isLong,e.label&&(this.unitInfoFrom.labelV=e.label.split(","))},getCompanyDetail:function(e){var t=this;Object(o.e)({url:"/api/employment/manage/company/getCompanyDetail?id="+e,type:"get",success:function(e){e.state?(t.unitInfoDetail=e.data,t.showPage("单位管理","unitDetail"),t.setUnitInfoFrom(e.data.companyMessage),t.unitsInfoEdit=!1):t.$message.error(e.message)}})},getDataAddress:function(e){e.city&&(this.unitInfoFrom.addressV=e.city.id)},blacklistSubmitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.blackRuleForm.loading=!0,Object(o.e)({url:"/api/employment/blackList/addCompany",type:"post",data:{companyId:t.unitInfoDetail.companyMessage.id,userId:t.unitInfoDetail.userId,reason:t.blackRuleForm.reasons},success:function(e){e.state?(t.resetForm("blacklistRuleForm"),t.blacklistDialog=!1,t.getCompanyDetail(t.unitInfoDetail.companyMessage.id),t.$message.success("移入黑名单成功")):t.$message.error(e.message)}}).always(function(){t.blackRuleForm.loading=!1})})},onBlackRemove:function(){var e=this;Object(o.e)({url:"/api/employment/blackList/moveOutCompany",type:"PUT",data:{companyId:this.unitInfoDetail.companyMessage.id,userId:this.unitInfoDetail.userId},success:function(t){t.state?(e.getCompanyDetail(e.unitInfoDetail.companyMessage.id),e.$message.success("移除成功")):e.$message.error(t.message)}})},onUnitManagementAuditRecords:function(e){this.showPage("单位审核记录","unitAuditRecord"),this.unitManagementAuditRecordsListUrl="/table-data/employment/audit/getCompanyAuditByCompanyId?companyId="+this.unitInfoDetail.companyMessage.id,this.unitManagementAuditRecordsListColumns=[{id:"createTime",title:"提交时间",className:"text-left",width:130,hidden:!1},{id:"status",title:"审核状态",className:"text-left",width:90,hidden:!1},{id:"operatorName",title:"审核人",width:150,className:"text-left",hidden:!1},{id:"auditTime",title:"审核时间",hidden:!1,width:130},{id:"reason",title:"审核意见",className:"text-left",hidden:!1,width:130}]},onBack:function(){var e=this.currentPage;"unit"==e?this.currentPageTitle="单位管理":"unitDetail"==e?this.showPage("单位管理","unit"):"unitAuditRecord"==e?this.showPage("单位管理","unitDetail"):"addUnit"==e&&this.showPage("单位管理","unit")},showPage:function(e,t){this.currentPageTitle=e,this.currentPage=t},onChangeEmailSubmitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.changeEmail.loading=!0,Object(o.e)({url:"/api/employment/manage/company/changeMail?userId="+t.unitInfoDetail.userId+"&mail="+t.changeEmail.email,type:"PUT",success:function(e){e.state?(t.$message.success("邮箱换绑成功"),t.changeEmail.dialog=!1,t.unitInfoDetail.mailAddress=t.changeEmail.email,t.getCompanyDetail(t.companyDetailId)):t.$message.error(e.message)}}).always(function(){t.changeEmail.loading=!1})})},unitInfoSubmitForm:function(e,t){var a=this;this.$refs[e].validate(function(e){if(!e)return!1;"edit"==t?(a.editLoading=!0,Object(o.e)({url:"/api/employment/manage/company/updateDetail",type:"PUT",data:{type:a.unitsType,userId:a.unitInfoDetail.userId,companyId:a.unitInfoDetail.companyMessage.id,companyCode:a.unitInfoFrom.companyCode,companyName:a.unitInfoFrom.companyName,contactPeople:a.unitInfoFrom.contactPeople,contactPhone:a.unitInfoFrom.contactPhone,fax:a.unitInfoFrom.fax,companyUrl:a.unitInfoFrom.companyUrl,postcode:a.unitInfoFrom.postcode,address:a.unitInfoFrom.addressV,addressDetail:a.unitInfoFrom.addressDetail,license:a.unitInfoFrom.license.replace("/upload/storage/images/",""),industry:a.unitInfoFrom.industry,property:a.unitInfoFrom.property,summary:a.unitInfoFrom.summary,companyRepresentative:a.unitInfoFrom.companyRepresentative,licenseTime:a.unitInfoFrom.licenseTime,isLong:a.unitInfoFrom.isLong?1:0,registeredCapital:a.unitInfoFrom.registeredCapital,officePhone:a.unitInfoFrom.officePhone,scale:a.unitInfoFrom.scale,invoiceTitle:a.unitInfoFrom.invoiceTitle,taxpayerNumber:a.unitInfoFrom.taxpayerNumber,companyCreateTime:a.unitInfoFrom.companyCreateTime,mailAddress:a.unitInfoFrom.mailAddress,label:a.unitInfoFrom.labelV?a.unitInfoFrom.labelV.join(","):""},success:function(e){e.state?(a.$message.success("编辑成功!"),a.getCompanyDetail(a.unitInfoDetail.companyMessage.id)):a.$message.error(e.message)}}).always(function(){a.editLoading=!1})):(a.addLoading=!0,Object(o.e)({url:"/api/employment/manage/company/addCompany",type:"post",data:{type:a.unitsType,companyCode:a.unitInfoFrom.companyCode,companyName:a.unitInfoFrom.companyName,contactPeople:a.unitInfoFrom.contactPeople,contactPhone:a.unitInfoFrom.contactPhone,fax:a.unitInfoFrom.fax,companyUrl:a.unitInfoFrom.companyUrl,postcode:a.unitInfoFrom.postcode,address:a.unitInfoFrom.addressV,addressDetail:a.unitInfoFrom.addressDetail,license:a.unitInfoFrom.license,industry:a.unitInfoFrom.industry,property:a.unitInfoFrom.property,summary:a.unitInfoFrom.summary,companyRepresentative:a.unitInfoFrom.companyRepresentative,licenseTime:a.unitInfoFrom.licenseTime,isLong:a.unitInfoFrom.isLong?1:0,registeredCapital:a.unitInfoFrom.registeredCapital,officePhone:a.unitInfoFrom.officePhone,scale:a.unitInfoFrom.scale,invoiceTitle:a.unitInfoFrom.invoiceTitle,taxpayerNumber:a.unitInfoFrom.taxpayerNumber,companyCreateTime:a.unitInfoFrom.companyCreateTime,mailAddress:a.unitInfoFrom.mailAddress,confirmUrl:"employment/setPassword",label:a.unitInfoFrom.labelV?a.unitInfoFrom.labelV.join(","):""},success:function(e){e.state?(a.$message.success("新增成功!"),a.showPage("单位管理","unit")):a.$message.error(e.message)}}).always(function(){a.addLoading=!1}))})},resetForm:function(e){this.$refs[e].resetFields()},switchChange:function(e){var t=this;"0"==e?(this.startStopLoading.stop=!0,Object(o.e)({url:"/api/employment/manage/company/blockUp?userId="+this.unitInfoDetail.userId,type:"PUT",success:function(e){e.state?(t.$message.success("停用成功"),t.getCompanyDetail(t.companyDetailId)):(t.$message.error(e.message),t.unitInfoDetail.companyMessage.status=!t.unitInfoDetail.companyMessage.status)}}).always(function(){t.startStopLoading.stop=!1})):(this.startStopLoading.start=!0,Object(o.e)({url:"/api/employment/manage/company/recover?userId="+this.unitInfoDetail.userId,type:"PUT",success:function(e){e.state?(t.$message.success("恢复成功"),t.getCompanyDetail(t.companyDetailId)):(t.$message.error(e.message),t.unitInfoDetail.companyMessage.status=!t.unitInfoDetail.companyMessage.status)}}).always(function(){t.startStopLoading.start=!1}))},exportStat:function(){this.showExport=!0},getFindDictByTypeName:function(e,t){var a=this,n=this;Object(o.e)({url:"/api/employment/system/findDictByTypeName?typeName="+e,type:"get",success:function(e){e.state?n[t]=e.data:a.$toast(e.message)}})},initColumns:function(){var e=this;this.columns=[{id:"companyName",title:"单位名称",className:"text-left",width:130,hidden:!1,search:{type:"input",data:{placeholer:"",autoFocus:!1}}},{id:"label",title:"单位标签",className:"text-left",width:90,hidden:!1,hover:!1,formatter:function(e){var t="";return e.label&&(t="<div style='font-size:12px;text-align:center;border-radius:13px;padding:0 11px;overflow: hidden;text-overflow: ellipsis;width:79px;height:28px;line-height:28px;color:#3E92FE;background:rgba(62,146,254,0.2);'>"+e.label+"</div>"),t}},{id:"type",title:"单位类别",width:150,className:"text-left",hidden:!1,search:{type:"select",data:{options:[{value:"",label:"全部"},{value:1,label:"重点单位"},{value:2,label:"普通单位"}],optionsLabel:"label",optionsValue:"value"}},formatter:function(e){return"1"==e.type?"重点单位":"普通单位"}},{id:"industry",title:"所属行业",hidden:!1,width:130},{id:"contactPeople",title:"联系人",className:"text-left",hidden:!1,width:130},{id:"contactPhone",title:"手机号",hidden:!1,width:130},{id:"status",title:"状态",width:150,className:"text-left",hidden:!1,hover:!1,search:{type:"select",data:{options:[{value:"",label:"全部"},{value:0,label:"正常"},{value:1,label:"停用"},{value:2,label:"已拉入黑名单"}],optionsLabel:"label",optionsValue:"value"}},formatter:function(e){var t=e.status,a="",n="";return"0"==t?(a="#64C33C",n="正常"):"1"==t?(a="#727272",n="停用"):"2"==t&&(a="#F36D6D",n="已拉入黑名单"),"<div style='color:"+a+";display:flex;align-items:center;'><i style='display:block;width:8px;height:8px;border-radius:50%;background:"+a+";margin-right:6px;'></i>"+n+"</div>"}},{id:"opts",title:"操作",width:80,hidden:!1,options:[{tag:"a",text:"查看",callback:function(t,a){e.companyDetailId=t.id,e.getCompanyDetail(t.id)}}]}]}}}),r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"unitsManager container-fluid",attrs:{id:"unitsManager"}},["unitDetail"==e.currentPage||"addUnit"==e.currentPage||"unitAuditRecord"==e.currentPage?a("el-button",{staticStyle:{color:"#666"},attrs:{type:"text",icon:"el-icon-back"},on:{click:e.onBack}},[e._v("返回")]):e._e(),e._v(" "),"importPage"!==e.currentPage?a("div",{staticClass:"title"},[e._v(e._s(e.currentPageTitle))]):e._e(),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"unit"==e.currentPage,expression:"currentPage=='unit'"}],staticClass:"unitInfoList"},[a("v-table",{ref:"unitsManagerTable",attrs:{url:e.tableData_url,columns:e.columns,pagesize:"15",idField:"id",multiple:!1,order:!0,search:!0,columnsControl:!0}},[a("div",{staticClass:"pull-right",attrs:{slot:"btn-group"},slot:"btn-group"},[a("el-button",{staticClass:"custom-btn",attrs:{type:"primary",icon:"el-icon-plus"},nativeOn:{click:function(t){e.showTypeModal=!0}}},[e._v("新增单位")]),e._v(" "),a("el-button",{staticClass:"custom-btn",attrs:{type:"primary"},on:{click:e.exportStat}},[e._v("导出")])],1)])],1),e._v(" "),"unitDetail"==e.currentPage||"addUnit"==e.currentPage?a("div",{staticClass:"unitInfo-detail"},["addUnit"!=e.currentPage?a("div",{staticClass:"unit-account"},[a("div",{staticClass:"opt-btn"},[e.unitInfoDetail&&e.unitInfoDetail.companyMessage&&e.unitInfoDetail.companyMessage.status?a("div",{staticClass:"start-stop-warp"},["0"==e.unitInfoDetail.companyMessage.status?a("el-button",{staticClass:"stop",attrs:{type:"text",disabled:"1"==e.unitInfoDetail.companyMessage.status,loading:e.startStopLoading.stop},on:{click:function(t){return e.switchChange("0")}}},[e._v("停用")]):e._e(),e._v(" "),"1"==e.unitInfoDetail.companyMessage.status?a("el-button",{attrs:{type:"text",disabled:"0"==e.unitInfoDetail.companyMessage.status,loading:e.startStopLoading.start},on:{click:function(t){return e.switchChange("1")}}},[e._v("恢复")]):e._e()],1):e._e(),e._v(" "),"2"==e.unitInfoDetail.companyMessage.status?a("el-button",{attrs:{type:"text"},on:{click:e.onBlackRemove}},[e._v("移除黑名单")]):a("el-button",{attrs:{type:"text"},on:{click:function(t){e.blacklistDialog=!0}}},[e._v("移入黑名单")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:e.onBlacklistRecordDialog}},[e._v("黑名单记录")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:e.onUnitManagementAuditRecords}},[e._v("查看单位审核记录")])],1),e._v(" "),a("div",{staticClass:"title-prefix"},[e._v("单位账号")])]):e._e(),e._v(" "),"unitDetail"==e.currentPage&&e.unitInfoDetail.userMail?a("div",{staticClass:"flex-center-between unit-email"},[a("div",[e._v("邮箱："+e._s(e.unitInfoDetail.userMail))]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(t){e.changeEmail.dialog=!0}}},[e._v("换绑邮箱")])],1):e._e(),e._v(" "),e.unitInfoDetail&&e.unitInfoDetail.userStatus?a("div",{staticClass:"flex-center-between unit-switch"},[a("div",[e._v("\n        账号状态：\n        "),a("span",{style:"正常"==e.unitInfoDetail.userStatus?"color:#000;":"color:#F36D6D;"},[e._v(e._s(e.unitInfoDetail.userStatus))])])]):e._e(),e._v(" "),"addUnit"!=e.currentPage?a("div",{staticClass:"unit-info"},[a("div",{staticClass:"title-prefix"},[e._v("单位信息")]),e._v(" "),a("div",{staticClass:"flex-center-between unit-type"},[a("div",[a("span",{staticClass:"unit-type-radio"},[e._v("单位类型")]),e._v(" "),a("radio",{attrs:{disabled:!e.unitsInfoEdit,label:"1"},model:{value:e.unitsType,callback:function(t){e.unitsType=t},expression:"unitsType"}},[e._v("重点单位")]),e._v(" "),a("radio",{attrs:{disabled:!e.unitsInfoEdit,label:"2"},model:{value:e.unitsType,callback:function(t){e.unitsType=t},expression:"unitsType"}},[e._v("普通单位")])],1),e._v(" "),a("el-button",{staticClass:"upload-warp",attrs:{type:"text"},on:{click:function(t){e.unitsInfoEdit=!e.unitsInfoEdit}}},[a("img",{attrs:{src:"/static/image/employment/edit.png",alt:""}}),e._v(" 编辑\n        ")])],1)]):e._e(),e._v(" "),a("div",{staticClass:"unitdetail-content"},[a("div",{staticClass:"detail"},[a("el-form",{ref:"unitInfoFromRules",staticClass:"unit-manager-form",attrs:{model:e.unitInfoFrom,rules:e.unitInfoRules,"show-message":e.unitsInfoEdit,"label-width":"200px"}},["addUnit"==e.currentPage?a("el-form-item",{attrs:{label:"单位邮箱：",prop:"mailAddress"}},[e.unitsInfoEdit?a("el-input",{attrs:{placeholder:"请输入单位邮箱"},model:{value:e.unitInfoFrom.mailAddress,callback:function(t){e.$set(e.unitInfoFrom,"mailAddress",t)},expression:"unitInfoFrom.mailAddress"}}):e._e()],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"单位名称：",prop:"companyName"}},[e.unitsInfoEdit?a("el-input",{attrs:{placeholder:"请输入单位名称"},model:{value:e.unitInfoFrom.companyName,callback:function(t){e.$set(e.unitInfoFrom,"companyName",t)},expression:"unitInfoFrom.companyName"}}):e._e(),e._v(" "),e.unitsInfoEdit?e._e():a("span",[e._v(e._s(e.unitInfoDetail.companyMessage.companyName))])],1),e._v(" "),a("el-form-item",{attrs:{label:"统一社会信用代码：",prop:"companyCode"}},[e.unitsInfoEdit?a("el-input",{attrs:{placeholder:"请输入统一社会信用代码"},model:{value:e.unitInfoFrom.companyCode,callback:function(t){e.$set(e.unitInfoFrom,"companyCode",t)},expression:"unitInfoFrom.companyCode"}}):e._e(),e._v(" "),e.unitsInfoEdit?e._e():a("span",[e._v(e._s(e.unitInfoDetail.companyMessage.companyCode))])],1),e._v(" "),a("el-form-item",{attrs:{label:"单位所在地：",prop:"addressV"}},[e.unitsInfoEdit?a("linkage",{attrs:{options:e.unitInfoFrom.address,width:150},on:{getData:e.getDataAddress}}):e._e(),e._v(" "),e.unitsInfoEdit?e._e():a("span",[e._v(e._s(e.unitInfoDetail.companyMessage.addressName))])],1),e._v(" "),a("el-form-item",{attrs:{label:"单位地址：",prop:"addressDetail"}},[e.unitsInfoEdit?a("el-input",{attrs:{placeholder:"请输入单位地址"},model:{value:e.unitInfoFrom.addressDetail,callback:function(t){e.$set(e.unitInfoFrom,"addressDetail",t)},expression:"unitInfoFrom.addressDetail"}}):e._e(),e._v(" "),e.unitsInfoEdit?e._e():a("span",[e._v(e._s(e.unitInfoDetail.companyMessage.addressDetail))])],1),e._v(" "),a("el-form-item",{attrs:{label:"所属行业：",prop:"industry"}},[e.unitsInfoEdit?a("el-select",{model:{value:e.unitInfoFrom.industry,callback:function(t){e.$set(e.unitInfoFrom,"industry",t)},expression:"unitInfoFrom.industry"}},e._l(e.industryOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value,placeholder:"请选择所属行业"}})}),1):e._e(),e._v(" "),e.unitsInfoEdit?e._e():a("span",[e._v(e._s(e.unitInfoDetail.companyMessage.industryName))])],1),e._v(" "),a("el-form-item",{attrs:{label:"单位规模：",prop:"scale"}},[e.unitsInfoEdit?a("el-select",{model:{value:e.unitInfoFrom.scale,callback:function(t){e.$set(e.unitInfoFrom,"scale",t)},expression:"unitInfoFrom.scale"}},e._l(e.scaleOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value,placeholder:"请选择单位规模"}})}),1):e._e(),e._v(" "),e.unitsInfoEdit?e._e():a("span",[e._v(e._s(e.unitInfoDetail.companyMessage.scaleName))])],1),e._v(" "),a("el-form-item",{attrs:{label:"单位性质：",prop:"property"}},[e.unitsInfoEdit?a("el-select",{model:{value:e.unitInfoFrom.property,callback:function(t){e.$set(e.unitInfoFrom,"property",t)},expression:"unitInfoFrom.property"}},e._l(e.propertyOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value,placeholder:"请选择单位性质"}})}),1):e._e(),e._v(" "),e.unitsInfoEdit?e._e():a("span",[e._v(e._s(e.unitInfoDetail.companyMessage.propertyName))])],1),e._v(" "),a("el-form-item",{attrs:{label:"单位标签：",prop:"labelV"}},[e.unitsInfoEdit?a("el-checkbox-group",{on:{change:e.handleCheckedLabelChange},model:{value:e.unitInfoFrom.labelV,callback:function(t){e.$set(e.unitInfoFrom,"labelV",t)},expression:"unitInfoFrom.labelV"}},e._l(e.labelOptions,function(t){return a("el-checkbox",{key:t.value,attrs:{name:"labelV",label:t.value}},[e._v(e._s(t.label))])}),1):e._e(),e._v(" "),e.unitsInfoEdit?e._e():a("span",[e._v(e._s(e.unitInfoDetail.companyMessage.labelName))])],1),e._v(" "),a("el-form-item",{attrs:{label:"联系人：",prop:"contactPeople"}},[e.unitsInfoEdit?a("el-input",{attrs:{placeholder:"请输入联系人"},model:{value:e.unitInfoFrom.contactPeople,callback:function(t){e.$set(e.unitInfoFrom,"contactPeople",t)},expression:"unitInfoFrom.contactPeople"}}):e._e(),e._v(" "),e.unitsInfoEdit?e._e():a("span",[e._v(e._s(e.unitInfoDetail.companyMessage.contactPeople))])],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号：",prop:"contactPhone"}},[e.unitsInfoEdit?a("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.unitInfoFrom.contactPhone,callback:function(t){e.$set(e.unitInfoFrom,"contactPhone",t)},expression:"unitInfoFrom.contactPhone"}}):e._e(),e._v(" "),e.unitsInfoEdit?e._e():a("span",[e._v(e._s(e.unitInfoDetail.companyMessage.contactPhone))])],1),e._v(" "),a("el-form-item",{attrs:{label:"单位电话：",prop:"officePhone"}},[e.unitsInfoEdit?a("el-input",{attrs:{placeholder:"请输入单位电话"},model:{value:e.unitInfoFrom.officePhone,callback:function(t){e.$set(e.unitInfoFrom,"officePhone",t)},expression:"unitInfoFrom.officePhone"}}):e._e(),e._v(" "),e.unitsInfoEdit?e._e():a("span",[e._v(e._s(e.unitInfoDetail.companyMessage.officePhone))])],1),e._v(" "),a("el-form-item",{attrs:{label:"单位传真：",prop:"fax"}},[e.unitsInfoEdit?a("el-input",{attrs:{placeholder:"请输入单位传真"},model:{value:e.unitInfoFrom.fax,callback:function(t){e.$set(e.unitInfoFrom,"fax",e._n(t))},expression:"unitInfoFrom.fax"}}):e._e(),e._v(" "),e.unitsInfoEdit?e._e():a("span",[e._v(e._s(e.unitInfoDetail.companyMessage.fax))])],1),e._v(" "),a("el-form-item",{attrs:{label:"单位邮编：",prop:"postcode"}},[e.unitsInfoEdit?a("el-input",{attrs:{placeholder:"请输入单位邮编"},model:{value:e.unitInfoFrom.postcode,callback:function(t){e.$set(e.unitInfoFrom,"postcode",e._n(t))},expression:"unitInfoFrom.postcode"}}):e._e(),e._v(" "),e.unitsInfoEdit?e._e():a("span",[e._v(e._s(e.unitInfoDetail.companyMessage.postcode))])],1),e._v(" "),a("el-form-item",{attrs:{label:"单位网址：",prop:"companyUrl"}},[e.unitsInfoEdit?a("el-input",{attrs:{placeholder:"请输入单位网址"},model:{value:e.unitInfoFrom.companyUrl,callback:function(t){e.$set(e.unitInfoFrom,"companyUrl",t)},expression:"unitInfoFrom.companyUrl"}}):e._e(),e._v(" "),e.unitsInfoEdit?e._e():a("span",[e._v(e._s(e.unitInfoDetail.companyMessage.companyUrl))])],1),e._v(" "),a("el-form-item",{attrs:{label:"单位介绍：",prop:"summary"}},[e.unitsInfoEdit?a("el-input",{attrs:{placeholder:"请输入单位介绍"},model:{value:e.unitInfoFrom.summary,callback:function(t){e.$set(e.unitInfoFrom,"summary",t)},expression:"unitInfoFrom.summary"}}):e._e(),e._v(" "),e.unitsInfoEdit?e._e():a("span",[e._v(e._s(e.unitInfoDetail.companyMessage.summary))])],1),e._v(" "),a("el-form-item",{attrs:{label:"发票抬头：",prop:"invoiceTitle"}},[e.unitsInfoEdit?a("el-input",{attrs:{placeholder:"请输入发票抬头"},model:{value:e.unitInfoFrom.invoiceTitle,callback:function(t){e.$set(e.unitInfoFrom,"invoiceTitle",t)},expression:"unitInfoFrom.invoiceTitle"}}):e._e(),e._v(" "),e.unitsInfoEdit?e._e():a("span",[e._v(e._s(e.unitInfoDetail.companyMessage.invoiceTitle))])],1),e._v(" "),a("el-form-item",{attrs:{label:"纳税人识别号：",prop:"taxpayerNumber"}},[e.unitsInfoEdit?a("el-input",{attrs:{placeholder:"请输入纳税人识别号"},model:{value:e.unitInfoFrom.taxpayerNumber,callback:function(t){e.$set(e.unitInfoFrom,"taxpayerNumber",t)},expression:"unitInfoFrom.taxpayerNumber"}}):e._e(),e._v(" "),e.unitsInfoEdit?e._e():a("span",[e._v(e._s(e.unitInfoDetail.companyMessage.taxpayerNumber))])],1),e._v(" "),a("el-form-item",{attrs:{label:"公司法人代表：",prop:"companyRepresentative"}},[e.unitsInfoEdit?a("el-input",{attrs:{placeholder:"请输入公司法人代表"},model:{value:e.unitInfoFrom.companyRepresentative,callback:function(t){e.$set(e.unitInfoFrom,"companyRepresentative",t)},expression:"unitInfoFrom.companyRepresentative"}}):e._e(),e._v(" "),e.unitsInfoEdit?e._e():a("span",[e._v(e._s(e.unitInfoDetail.companyMessage.companyRepresentative))])],1),e._v(" "),a("el-form-item",{attrs:{label:"注册资金(万)：",prop:"registeredCapital"}},[e.unitsInfoEdit?a("el-input",{attrs:{placeholder:"请输入注册资金"},model:{value:e.unitInfoFrom.registeredCapital,callback:function(t){e.$set(e.unitInfoFrom,"registeredCapital",e._n(t))},expression:"unitInfoFrom.registeredCapital"}}):e._e(),e._v(" "),e.unitsInfoEdit?e._e():a("span",[e._v(e._s(e.unitInfoDetail.companyMessage.registeredCapital))])],1),e._v(" "),a("el-form-item",{attrs:{label:"单位成立日期：",required:""}},[e.unitsInfoEdit?a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"companyCreateTime"}},[a("v-datepicker",{ref:"startTime",staticClass:"btn-block licensePciker w100 time-picker",staticStyle:{"margin-right":"20px"},attrs:{placeholder:"请选择单位成立日期",format:e.yyyy-e.MM-e.dd,clearButton:!1,showTime:!1},model:{value:e.unitInfoFrom.companyCreateTime,callback:function(t){e.$set(e.unitInfoFrom,"companyCreateTime",t)},expression:"unitInfoFrom.companyCreateTime"}})],1)],1):e._e(),e._v(" "),e.unitsInfoEdit?e._e():a("span",[e._v(e._s(e.unitInfoDetail.companyMessage.companyCreateTime))])],1),e._v(" "),a("el-form-item",{attrs:{label:"营业执照：",placeholder:"请选择营业执照",prop:"license"}},[e.unitsInfoEdit?a("div",{staticClass:"upload"},[a("div",{staticClass:"file"},[a("div",{class:["avatar-uploader",e.unitInfoFrom.license?"hasImg":""]},[a("i",[a("p",{staticClass:"tips"},[a("span",[e._v("上传营业执照")])])]),e._v(" "),a("input",{staticClass:"upload-template",attrs:{type:"file",id:"upload-file"},on:{change:e._fileLicenseUpload}}),e._v(" "),e.unitInfoFrom.license?a("img",{staticClass:"upload-template-license",attrs:{src:"/upload/storage/images/"+e.unitInfoFrom.license,alt:""}}):e._e()])])]):e._e(),e._v(" "),!e.unitsInfoEdit&&e.unitInfoDetail.companyMessage.license?a("img",{staticClass:"upload-template-license upload-template-license-text",attrs:{src:"/upload/storage/images/"+e.unitInfoDetail.companyMessage.license,alt:""}}):e._e()]),e._v(" "),a("el-form-item",{attrs:{label:"营业执照到期时间："}},[e.unitsInfoEdit?a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"licenseTime"}},[a("v-datepicker",{ref:"startTime",staticClass:"btn-block licensePciker w100 time-picker",staticStyle:{"margin-right":"20px"},attrs:{placeholder:"选择日期",format:e.yyyy-e.MM-e.dd,clearButton:!1,showTime:!1},model:{value:e.unitInfoFrom.licenseTime,callback:function(t){e.$set(e.unitInfoFrom,"licenseTime",t)},expression:"unitInfoFrom.licenseTime"}})],1)],1):e._e(),e._v(" "),e.unitsInfoEdit?a("el-checkbox",{staticStyle:{"padding-left":"15px"},on:{change:e.licenseChange},model:{value:e.unitInfoFrom.isLong,callback:function(t){e.$set(e.unitInfoFrom,"isLong",t)},expression:"unitInfoFrom.isLong"}},[e._v("长期")]):e._e(),e._v(" "),e.unitsInfoEdit?e._e():a("span",[e._v(e._s("1"==e.unitInfoDetail.companyMessage.isLong?"长期":e.unitInfoDetail.companyMessage.licenseTime))])],1)],1)],1),e._v(" "),e.unitsInfoEdit?a("div",{staticClass:"custom-btns"},[a("el-button",{staticClass:"custom",attrs:{plain:""},on:{click:function(t){return e.resetForm("unitInfoFromRules")}}},[e._v("取消")]),e._v(" "),"unitDetail"==e.currentPage?a("el-button",{staticClass:"custom",attrs:{loading:e.editLoading,type:"primary"},on:{click:function(t){return e.unitInfoSubmitForm("unitInfoFromRules","edit")}}},[e._v("保存")]):e._e(),e._v(" "),"addUnit"==e.currentPage?a("el-button",{staticClass:"custom",attrs:{loading:e.addLoading,type:"primary"},on:{click:function(t){return e.unitInfoSubmitForm("unitInfoFromRules","add")}}},[e._v("新增")]):e._e()],1):e._e()])]):e._e(),e._v(" "),"unitAuditRecord"==e.currentPage?a("div",[a("v-table",{attrs:{url:e.unitManagementAuditRecordsListUrl,columns:e.unitManagementAuditRecordsListColumns,pagesize:"15",idField:"id",multiple:!1,order:!0}})],1):e._e(),e._v(" "),a("el-dialog",{attrs:{width:"400px",visible:e.showTypeModal},on:{"update:visible":function(t){e.showTypeModal=t}}},[a("div",{staticClass:"blacklist-dialog-title",attrs:{slot:"title"},slot:"title"},[e._v("\n      选择新增方式\n    ")]),e._v(" "),a("div",{staticClass:"info-options-item"},[a("el-button",{staticClass:"addSingle",on:{click:function(t){return e.sumbitTypeModal("addSingle")}}},[e._v("单个新增")]),e._v(" "),a("el-button",{staticClass:"addGroup",on:{click:function(t){return e.sumbitTypeModal("addGroup")}}},[e._v("批量新增")])],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})]),e._v(" "),a("el-dialog",{staticClass:"blacklist-dialog",attrs:{close:"blacklist-dialog",visible:e.blacklistDialog},on:{"update:visible":function(t){e.blacklistDialog=t}}},[a("div",{staticClass:"blacklist-dialog-title",attrs:{slot:"title"},slot:"title"},[e._v("\n      将\n      "),e.unitInfoDetail&&e.unitInfoDetail.companyMessage?a("span",{staticClass:"company"},[e._v(e._s(e.unitInfoDetail.companyMessage.companyName))]):e._e(),e._v(" 移入黑名单\n    ")]),e._v(" "),a("el-form",{ref:"blacklistRuleForm",staticClass:"demo-ruleForm",attrs:{model:e.blackRuleForm,rules:e.blackRules,"label-width":"60px"}},[a("el-form-item",{attrs:{label:"原因",prop:"reasons"}},[a("el-input",{attrs:{type:"textarea",rows:"5",placeholder:"请输入移入黑名单原因",resize:"none"},model:{value:e.blackRuleForm.reasons,callback:function(t){e.$set(e.blackRuleForm,"reasons",t)},expression:"blackRuleForm.reasons"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-content"},[a("p",[e._v("注意:")]),e._v(" "),a("p",[e._v("1、移入黑名单后本条申请自动设置为不通过")]),e._v(" "),a("p",[e._v("2、单位可以通过申诉向管理提出恢复申请")])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:e.blackRuleForm.loading,type:"primary"},on:{click:function(t){return e.blacklistSubmitForm("blacklistRuleForm")}}},[e._v("移入黑名单")]),e._v(" "),a("el-button",{on:{click:function(t){e.blacklistDialog=!1}}},[e._v("取 消")])],1)],1),e._v(" "),a("el-dialog",{attrs:{close:"changeEmail-dialog",title:"换绑邮箱",visible:e.changeEmail.dialog,width:"500px"},on:{"update:visible":function(t){return e.$set(e.changeEmail,"dialog",t)}}},[e.unitInfoDetail&&e.unitInfoDetail.companyMessage?a("div",{staticClass:"current-email"},[e._v(e._s(e.unitInfoDetail.companyMessage.companyName)+"当前的邮箱是 "),a("span",{staticStyle:{color:"#000","font-weight":"bold"}},[e._v(e._s(e.unitInfoDetail.userMail))])]):e._e(),e._v(" "),a("el-form",{ref:"changeEmailForm",staticClass:"demo-dynamic",attrs:{model:e.changeEmail,rules:e.changeEmailRules,"label-width":"70px"}},[a("el-form-item",{attrs:{prop:"email",label:"邮箱"}},[a("el-input",{attrs:{type:"text",autocomplete:"off"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onChangeEmailSubmitForm("changeEmailForm")}},model:{value:e.changeEmail.email,callback:function(t){e.$set(e.changeEmail,"email",t)},expression:"changeEmail.email"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{staticStyle:{display:"none"},attrs:{type:"password",placeholder:"请输入密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.companyLogin(t)}},model:{value:e.changeEmail.email,callback:function(t){e.$set(e.changeEmail,"email",t)},expression:"changeEmail.email"}})],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{staticClass:"change-email-btn",attrs:{loading:e.changeEmail.loading,type:"primary"},on:{click:function(t){return e.onChangeEmailSubmitForm("changeEmailForm")}}},[e._v("确定重新绑定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"黑名单记录",visible:e.blacklistRecordDialog},on:{"update:visible":function(t){e.blacklistRecordDialog=t}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.blackListRecordTableData}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"操作",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operatorName",label:"操作人",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"reason",label:"原因"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",sortable:"",label:"操作时间"}})],1)],1),e._v(" "),"importPage"===e.currentPage?a("v-import",e._b({on:{backParentPage:e.importPageBack}},"v-import",e.importParams,!1)):e._e(),e._v(" "),a("v-modal",{attrs:{show:e.showExport,effect:"fade"}},[a("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[a("h5",{staticClass:"modal-title"},[e._v("导出 (无勾选字段默认导出所有字段)")])]),e._v(" "),a("div",{staticClass:"modal-body",attrs:{slot:"modal-body"},slot:"modal-body"},[a("v-tree",{ref:"tree",attrs:{id:"resourceTree",cascade:"true",items:e.fieldsToExport,checkable:!0,search:!0}})],1),e._v(" "),a("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(t){e.showExport=!1}}},[e._v("取消")]),e._v(" "),a("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button"},on:{click:e.exportTable}},[e._v("导出")])])])],1)},staticRenderFns:[]};var c=a("C7Lr")(l,r,!1,function(e){a("Jh1x"),a("7NVL")},"data-v-127cdc50",null);t.default=c.exports}});