webpackJsonp([4],{"4cFY":function(t,e){},"9FPf":function(t,e){},FSXf:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("IvJb"),o=a("HzJ8"),n=a.n(o),s=a("L7Pj"),r=a.n(s),l=a("C331"),c=function(t){Object(l.c)({url:"/api/currentUser/roles/24/authorities",success:function(e){return t(null,e)},error:t})},d=function(t,e,a){Object(l.c)({url:"/api/iSignIn/projects/projectTypes/list/"+B.changeTabToInterface(t)+"?keyWord="+(e||""),success:function(t){t.state&&(t.data=t.data.map(function(t){return{id:t.id,name:t.typeName}})),a(null,t)},error:a})},u=function(t,e){Object(l.c)({url:"/api/iSignIn/projects?projectId="+t,success:function(t){t.state&&(t.data=B.getProject(t.data)),e(null,t)},error:e})},h=function(t,e,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5,n=arguments[5];Object(l.c)({url:"/api/iSignIn/projects/"+t+"/"+e+"?page="+i+"&size="+o+"&keyWord="+(a||""),success:function(t){t.state&&(t.list=(t.data.content||[]).map(B.getProject),t.count=t.data.totalElements,t.totalPages=t.data.totalPages),n(null,t)},error:n})},p=function(t,e){Object(l.c)({url:"/api/iSignIn/projects/projectPeoplesCount/"+t,success:function(t){e(null,t)},error:e})},g=function(t,e){Object(l.c)({url:"/api/signIns/list/"+t,success:function(t){t.state&&(t.data=t.data.map(B.getSign)),e(null,t)},error:e})},m=function(t,e){Object(l.c)({url:"/api/signIns/my/"+t,success:function(t){t.state&&(t.data=t.data.map(B.getSign)),e(null,t)},error:e})},f=function(t,e){Object(l.c)({url:"/api/iSignIn/projects/projectTypes",type:"post",data:{typeName:t},success:function(t){t.state&&(t.data={id:t.data.id,name:t.data.typeName}),e(null,t)},error:e})},v=function(t,e){Object(l.c)({url:"/api/iSignIn/projects",type:"post",data:t,success:function(t){t.state&&(t.data=B.getProject(t.data)),e(null,t)},error:e})},y=function(t,e){Object(l.c)({url:"/api/iSignIn/projects",type:"put",data:{projectId:t.id,projectName:t.name,projectTypeId:t.categoryId},success:function(t){return e(null,t)},error:e})},b=function(t,e){Object(l.c)({url:"/api/iSignIn/projects/projectTypes/"+t.id,type:"put",data:{typeName:t.name},success:function(t){return e(null,t)},error:e})},_=function(t,e,a){Object(l.c)({url:"/api/iSignIn/projects/projectAgents/"+t,type:"post",data:e,success:function(t){return a(null,t)},error:a})},C=function(t,e){Object(l.c)({url:"/api/signIns",type:"put",data:{signInId:t.id,signInName:t.name,timeStart:t.startTime,timeEnd:t.endTime,projectId:t.projectId,useDynamicCode:t.useDynamicCode},success:function(t){return e(null,t)},error:e})},w=function(t){Object(l.c)({url:"/api/iSignIn/projects/peopleLimit/conditions",success:function(e){return t(null,e)},error:t})},M=function(t,e,a,i){a=a||{},Object(l.c)({url:"/api/iSignIn/projects/peopleLimit/"+t+"/"+e,type:"put",data:{educationLevel:a.educationLevel,studentStatus:a.inSchoolStatus,grade:a.grade},success:function(t){return i(null,t)},error:i})},S=function(t,e,a,i,o,n){Object(l.c)({url:"/api/signIns",type:"post",data:{projectId:t,signInName:e,timeStart:a,timeEnd:i,useDynamicCode:o},success:function(t){t.state&&(t.data=B.getSign(t.data)),n(null,t)},error:n})},I=function(t,e,a,i){Object(l.c)({url:"/api/signIns/peoples",type:"post",data:{signInId:e,projectId:t,userId:a},success:function(t){return i(null,t)},error:i})},P=function(t,e){Object(l.c)({url:"/api/users/"+t,type:"get",success:function(t){return e(null,t)},error:e})},x=function(t,e){Object(l.c)({url:"/api/signIns/"+t,type:"delete",success:function(t){return e(null,t)},error:e})},T=function(t,e,a,i){Object(l.c)({url:"/api/signIns/signInStatus",type:"put",data:{signInId:t,userId:e,remark:a},success:function(t){return i(null,t)},error:i})},N=function(t,e,a){Object(l.c)({url:"/api/signIns/peoples/"+t+"/"+e,type:"delete",success:function(t){return a(null,t)},error:a})},k=function(t,e){Object(l.c)({url:"/api/signIns/"+t+"/agents",type:"get",success:function(t){e(null,t)},error:e})},j=function(t){Object(l.c)({url:"/api/student/manage/getSelectOptions?type=school",type:"get",success:function(e){t(null,e)},error:t})},L=function(t,e){Object(l.c)({url:"/api/iSignIn/projects/list/agents/"+t,type:"get",success:function(t){e(null,t)},error:e})},E=function(t,e,a,i,o,n){Object(l.c)({url:"/api/signIns/"+t+"/signInUrl",type:"post",data:{distribution:e,collegeCode:a,classId:i,expireTime:o},success:function(t){n(null,t)},error:n})},O=function(t,e){Object(l.c)({url:"/api/signInStatistics/overviews/"+t,type:"get",success:function(t){return e(null,t)},error:e})},A=function(t,e,a){Object(l.c)({url:"/api/signInStatistics/statistics/"+t+"/"+e,type:"get",success:function(t){return a(null,t)},error:a})},D=function(t,e,a,i,o){window.location.href="/downloads/signIns/peoples/excel/MANAGE?signInId="+t+"&name="+(e||"")+"&userNo="+(a||"")+"&college="+(i||"")+"&signInStatus="+(o||"")},$=function(t,e,a,i,o,n,s,r){window.location.href="/downloads/signIns/"+t+"/people/excel?signInId="+t+"&agentId="+e+"&name="+(a||"")+"&userNo="+(i||"")+"&collegeCode="+(o||"")+"&classId="+(n||"")+"&status="+(s||"")+"&filename="+r},B={getProject:function(t){return{id:t.projectId,name:t.projectName,categoryId:t.projectTypeId,categoryName:t.projectTypeName,limitListOfPeople:t.limitListOfPeople,peopleCount:t.projectPeopleCount,educationLevel:t.educationLevel,educationLevelLabel:t.educationLevelName,grade:t.grade,inSchoolStatus:t.studentStatus,peopleLoading:!0,signs:{init:!1,loading:!1,list:[]}}},getSign:function(t){return{id:t.signInId,name:t.signInName,projectId:t.projectId,startTime:t.timeStart,endTime:t.timeEnd,useDynamicCode:t.useDynamicCode,signInStatus:t.signInStatus}},changeTabToInterface:function(t){return{MANAGE:"MANAGE",PROXY:"AGENT",MINE:"MY"}[t]}},R='<svg version="1.1" id="loader-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50;" xml:space="preserve">\n                  <path fill="rgba(0, 0, 0, 0.54)" d="M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z" transform="rotate(30.0001 25 25)">\n                    <animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform>\n                  </path>\n                </svg>',H={icon:R,small:'<svg version="1.1" id="loader-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="18px" height="18px" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50;" xml:space="preserve">\n                <path fill="rgba(0, 0, 0, 0.54)" d="M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z" transform="rotate(30.0001 25 25)">\n                  <animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform>\n                </path>\n              </svg>',iconWithText:R+"加载中"},G=(Number,String,{props:{projectId:Number,projectName:String},data:function(){return{loader:H,departmentId:1,positionLeft:null,players:[],distributaryData:[{id:"bySchool",name:"全校统一管理"},{id:"byClass",name:"以班级分配"},{id:"byTeacher",name:"以带生关系分配"},{id:"byCollege",name:"以学院关系分配"}],scrollAreaHeight:"",noRoleSetAfaterHeight:"",newAuthorityMaxHeight:"",roleSetContentHeight:"",hasError:!0,loading:!0,roleList:[],batchCheck:"",roleEditing:!1,curNode:{distributary:"",operators:[],dataAuthorities:[{authority:null}]},curLink:{},otherLink:{nextNodeId:""},curForm:{formSettingId:"",formSettingName:""},isApplyNode:!1,isChange:!1,isSelectBatchSet:!1,nameIsNull:!0,ownerContentHeight:0,lang:"zh-cn"}},computed:{translate:function(){return Object(l.e)(this.lang).joinRoleSetManage},setColStyle:function(){return this.players.length<=1?{"text-align":"center","padding-left":"105px"}:{"text-align":"left","padding-left":"0"}}},watch:{},created:function(){var t=this;if(!this.projectId)return this.$toast("sorry, something went wrong! [110]");var e=localStorage.getItem("lang");Object(l.e)(e)&&(this.lang=e),this.distributaryData.forEach(function(e,a){e.name=t.translate.distributaryData[e.id]}),L(this.projectId,function(e,a){if(e)return t.$toast("网络错误");if(!a.state)return t.$toast(a.message);var i={SCHOOL:"bySchool",COLLEGE:"byCollege",RELATIONSHIP:"byTeacher",CLASS:"byClass"};t.players=a.data.map(function(e){var a=t.getNewPlayerTemplate();return a.id=e.projectAgentId,a.name=e.agentName,a.distributary=i[e.powerModeOfDistribution],a.roles=e.agentRoleId,a.roleCount=a.roles.length,a});var o=!0,s=!1,r=void 0;try{for(var l,c=n()(t.players);!(o=(l=c.next()).done);o=!0){var d=l.value;t._initRoleList(d)}}catch(e){s=!0,r=e}finally{try{!o&&c.return&&c.return()}finally{if(s)throw r}}t.players.length||t._addPlayer(),t.loading=!1})},mounted:function(){},methods:{getNewPlayerTemplate:function(){return{id:null,name:null,distributary:"bySchool",selectDistributary:"bySchool",roles:[],roleEditing:!1,newRoleName:null,roleAddErrorMsg:null,nameErrorMsg:null,roleCount:0,roleSetData:[],_id:"player_"+(new Date).getTime()}},_addPlayer:function(){if(4==this.players.length)return this.$toast("设置的代理已经包括所有的代理权分配方式，不可再新增");var t=this.getNewPlayerTemplate(),e={bySchool:!1,byCollege:!1,byTeacher:!1,byClass:!1},a=!0,i=!1,o=void 0;try{for(var s,r=n()(this.players);!(a=(s=r.next()).done);a=!0){e[s.value.distributary]=!0}}catch(t){i=!0,o=t}finally{try{!a&&r.return&&r.return()}finally{if(i)throw o}}var l=null;for(var c in e)if(!e[c]){l=c;break}t.distributary=l,t.selectDistributary=l,this.players.push(t),this._initRoleList(t,this.players.length-1)},_changePlayerName:function(t){var e=!1,a=!0,i=!1,o=void 0;try{for(var s,r=n()(this.players);!(a=(s=r.next()).done);a=!0){var l=s.value;l._id!==t._id&&(l.name===t.name&&(t.nameErrorMsg="该代理名称已存在",e=!0))}}catch(t){i=!0,o=t}finally{try{!a&&r.return&&r.return()}finally{if(i)throw o}}e||(t.nameErrorMsg=null)},_afterSelectedDistributary:function(t){var e=parseInt(t.target.$attrs["data-index"]),a=this.players[e];if(a.distributary!=t.val){var i=!1,o=null,s=!0,r=!1,l=void 0;try{for(var c,d=n()(this.players);!(s=(c=d.next()).done);s=!0){var u=c.value;u.distributary==t.val&&(i=!0,o=u)}}catch(t){r=!0,l=t}finally{try{!s&&d.return&&d.return()}finally{if(r)throw l}}if(i)return this.$toast("该代理分配方式已被代理("+(o.name||"该代理未设置名称")+")占用"),void(a.selectDistributary=a.distributary);a.roleEditing=!1,t.val?(a.distributary=t.val,a.roles=[],a.roleCount=0,this._initRoleList(a,e)):a.distributary=""}},_initRoleList:function(t,e){var a=this;"bySchool"===t.distributary||"byCollege"===t.distributary?Object(l.c)({url:"/api/approveRoles",type:"get",data:{level:"bySchool"===t.distributary?"SCHOOL":"COLLEGE",departmentId:this.departmentId},success:function(e){if(e.state){t.roleSetData=e.data.reverse();var i=null;i&&clearTimeout(i),i=setTimeout(function(){var t=r()(".col").height().toFixed(1);a.roleSetContentHeight=t-268,a.scrollAreaHeight=t-218,a.noRoleSetAfaterHeight=t-170,a.newAuthorityMaxHeight=t-83},300)}else a.$toast(e.message)}}):"byClass"===t.distributary&&Object(l.c)({url:"/api/relClass/classCommittees",type:"get",success:function(e){if(e.state){e.data.forEach(function(t){t.name=t.text}),t.roleSetData=e.data.reverse();var i=null;i&&clearTimeout(i),i=setTimeout(function(){var t=r()(".col").height().toFixed(1);a.roleSetContentHeight=t-268,a.scrollAreaHeight=t-218,a.noRoleSetAfaterHeight=t-170,a.newAuthorityMaxHeight=t-83},300)}else alert(e.message)}})},_addOrDeleteRoleToPlayer:function(t,e){var a=e.roles.indexOf(parseInt(t.id));a>=0?e.roles.splice(a,1):e.roles.push(parseInt(t.id)),this.countSelectedRoles(e)},_batchChangeSelectedRoles:function(t){if(t.roleCount==t.roleSetData.length)return t.roleCount=0,void(t.roles=[]);t.roles=t.roleSetData.map(function(t){return parseInt(t.id)}),t.roleCount=t.roleSetData.length},countSelectedRoles:function(t){return t.roleCount=0,t.roleSetData.forEach(function(e){t.roles.indexOf(parseInt(e.id))>=0&&t.roleCount++}),t.roleCount},_creatNewRole:function(t,e){t.roleEditing=!0,t.newRoleName=this.projectName+("bySchool"===t.distributary?"校级":"院级")+"管理员",r()("#roleContent"+e).animate({scrollTop:"0px"},300)},_saveNewRole:function(t){var e=this,a=t.newRoleName;t.roleAddErrorMsg="",a&&""!==a.replace(/\s/g,"")?t.roleSetData.forEach(function(e){a===e.name&&(t.roleAddErrorMsg&&(t.roleAddErrorMsg+=","),t.roleAddErrorMsg+="该角色已存在")}):t.roleAddErrorMsg="角色名不能为空",t.roleAddErrorMsg?setTimeout(function(){t.roleAddErrorMsg=""},1500):Object(l.c)({url:"/api/approveRoles",type:"post",data:{name:a,level:"bySchool"===t.distributary?"SCHOOL":"COLLEGE",departmentId:this.departmentId},success:function(i){i.state?(t.roleSetData.unshift({id:i.data,name:a}),t.roles.push(parseInt(i.data)),t.roleEditing=!1):e.$toast(i.message)}})},_back:function(){if(!this.nameIsNull)return!1;this.$emit("back")},_saveJoinSet:function(){var t=this,e=[],a=!0,i="",o={bySchool:"SCHOOL",byCollege:"COLLEGE",byTeacher:"RELATIONSHIP",byClass:"CLASS"},s=!0,r=!1,l=void 0;try{for(var c,d=n()(this.players);!(s=(c=d.next()).done);s=!0){var u=c.value;u.name||(i+="您还有代理名称还未填写; ",a=!1),"bySchool"!=u.distributary&&"byCollege"!=u.distributary||u.roles.length||(i+=(u.name||"[未设置名称]")+"未选择角色; "),e.push({projectAgentId:u.id,projectId:this.projectId,powerModeOfDistribution:o[u.distributary],agentName:u.name,agentRoleId:u.roles})}}catch(t){r=!0,l=t}finally{try{!s&&d.return&&d.return()}finally{if(r)throw l}}if(!a)return this.$toast(i);_(this.projectId,e,function(e,a){return e?t.$toast("网络错误"):a.state?(t.$toast("设置代理成功"),void t.$emit("back")):t.$toast(a.message)})},_deletePlayers:function(t){this.players.splice(t,1)},_newRowInputFocus:function(t){this.players[t].newRoleName=this.appName+this.players[t].palyerForm.name+"管理员"}},destroyed:function(){}}),F={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid",attrs:{id:"proxy-settings"}},[a("div",{staticClass:"head text-center"},[a("div",{staticClass:"pull-left back-div"},[a("i",{staticClass:"maticon",domProps:{innerHTML:t._s(t.icons("arrow_back"))},on:{click:t._back}},[t._v("arrow_back")])]),t._v(" "),a("div",{staticClass:"pull-right opt-div"},[a("a",{staticClass:"opt-btn",attrs:{href:"javascript:;"},on:{click:t._back}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"btn save",on:{click:t._saveJoinSet}},[t._v("保存")])])]),t._v(" "),t.loading?a("div",{staticClass:"loading-players loader",domProps:{innerHTML:t._s(t.loader.icon+"正在加载代理设置...")}}):a("div",{staticClass:"joinSet-content"},[a("div",{staticClass:"info-container",style:t.setColStyle},[t._l(t.players,function(e,i){return a("div",{key:i,staticClass:"col other-col"},[a("div",{staticClass:"form-group"},[a("i",{staticClass:"maticon pull-left app-icon black-color",domProps:{innerHTML:t._s(t.icons("label"))}},[t._v("label")]),t._v(" "),a("div",{staticClass:"form-group-input pull-left "},[a("label",{staticClass:"name-label light-black-color"},[t._v("名称")]),t._v(" "),a("i",{staticClass:"maticon pull-right more-icon black-color dropdown-toggle",attrs:{"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"},domProps:{innerHTML:t._s(t.icons("more_vert"))}},[t._v("more_vert")]),t._v(" "),a("ul",{staticClass:"dropdown-menu more-opt-menu"},[a("li",{on:{click:function(e){t._deletePlayers(i)}}},[a("a",{attrs:{href:"#"}},[t._v("删除")])])]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"player.name"}],staticClass:"form-control name-input border-bottom-blue black-color",attrs:{type:"text",placeholder:"请输入代理者名称",maxlength:"15"},domProps:{value:e.name},on:{change:function(a){t._changePlayerName(e)},input:function(a){a.target.composing||t.$set(e,"name",a.target.value)}}}),t._v(" "),e.nameErrorMsg?a("p",{staticClass:"name-error-tip text-center"},[t._v(t._s(e.nameErrorMsg))]):t._e()])]),t._v(" "),a("div",{staticClass:"form-group"},[a("i",{staticClass:"maticon pull-left app-icon black-color",domProps:{innerHTML:t._s(t.icons("call_split"))}},[t._v("call_split")]),t._v(" "),a("div",{staticClass:"form-group-input pull-left "},[a("label",{staticClass:"name-label light-black-color"},[t._v("代理权分配方式")]),t._v(" "),a("div",{staticClass:"distribution-select"},[a("v-select",{key:i,ref:"distributarySelect",refInFor:!0,attrs:{options:t.distributaryData,"options-value":"id","options-label":"name","data-index":i,required:!0},on:{afterSelected:t._afterSelectedDistributary},model:{value:e.selectDistributary,callback:function(a){t.$set(e,"selectDistributary",a)},expression:"player.selectDistributary"}})],1)])]),t._v(" "),"byTeacher"!==e.distributary&&""!=e.distributary?a("div",{staticClass:"form-group clear-padding-bottom clear-bord-bottom"},[a("div",{staticClass:"role-set-head"},[a("i",{staticClass:"maticon pull-left app-icon black-color",domProps:{innerHTML:t._s(t.icons("people"))}},[t._v("people")]),t._v(" "),a("div",{staticClass:"form-group-input pull-left ",staticStyle:{height:"35px"}},[a("label",{staticClass:"name-label light-black-color"},[t._v("角色设置")]),t._v(" "),"byClass"===e.distributary||e.roleEditing?t._e():a("span",{staticClass:"creat-new-role blue-color",on:{click:function(a){t._creatNewRole(e,i)}}},[t._v("创建新的角色")])])])]):t._e(),t._v(" "),a("div",{staticClass:"scroll-area",style:{height:"byTeacher"!==e.distributary&&""!=e.distributary?t.scrollAreaHeight+"px":t.noRoleSetAfaterHeight+"px"},attrs:{id:"scrollArea"+i,"data-id":i}},["byTeacher"!==e.distributary&&""!=e.distributary?a("div",{staticClass:"form-group clear-padding-bottom"},[a("div",{staticClass:"role-set-content",style:"max-height:"+t.roleSetContentHeight+"px",attrs:{id:"roleContent"+i}},[e.roleEditing?a("div",{staticClass:"creat-role-input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.newRoleName,expression:"player.newRoleName"},{name:"focus",rawName:"v-focus"}],staticClass:"form-control name-input border-bottom-blue black-color padding-right-70px",attrs:{type:"text",maxlength:"20",placeholder:"请输入角色名称"},domProps:{value:e.newRoleName},on:{input:function(a){a.target.composing||t.$set(e,"newRoleName",a.target.value)}}}),t._v(" "),a("div",{staticClass:"pull-right creat-btn-group"},[a("button",{staticClass:"btn creat-cancle clearBtnBorder",on:{click:function(t){e.roleEditing=!1}}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"btn creat-sure blue-color clearBtnBorder",on:{click:function(a){t._saveNewRole(e)}}},[t._v("确定")])]),t._v(" "),e.roleEditing?a("p",{staticClass:"errorMsg",class:{show:e.roleAddErrorMsg}},[t._v(t._s(e.roleAddErrorMsg))]):t._e()]):t._e(),t._v(" "),a("div",{staticClass:"role-list",attrs:{id:"roleList"+i}},[a("div",{staticClass:"role-list-item margin-bottom-5px"},[a("div",{staticClass:"margin-left-70px"},[a("div",{staticClass:"input-group"},[a("span",{on:{click:function(a){t._batchChangeSelectedRoles(e)}}},[0===e.roleCount?a("i",{staticClass:"maticon role-icon light-black-color",domProps:{innerHTML:t._s(t.icons("check_box_outline_blank"))}},[t._v("check_box_outline_blank")]):e.roleCount===e.roleSetData.length?a("i",{staticClass:"maticon role-icon light-black-color",domProps:{innerHTML:t._s(t.icons("check_box"))}},[t._v("check_box")]):a("i",{staticClass:"maticon role-icon light-black-color",domProps:{innerHTML:t._s(t.icons("indeterminate_check_box"))}},[t._v("indeterminate_check_box")])]),t._v(" "),a("span",{staticClass:"role-name light-black-color"},[t._v("全选")])])])]),t._v(" "),t._l(e.roleSetData,function(i,o){return a("div",{key:o,staticClass:"role-list-item"},[a("div",{staticClass:"margin-left-70px"},[a("div",{staticClass:"input-group"},[a("span",{on:{click:function(a){t._addOrDeleteRoleToPlayer(i,e)}}},[e.roles.indexOf(parseInt(i.id))>=0?a("i",{staticClass:"maticon role-icon light-black-color",domProps:{innerHTML:t._s(t.icons("check_box"))}},[t._v("check_box")]):a("i",{staticClass:"maticon role-icon light-black-color",domProps:{innerHTML:t._s(t.icons("check_box_outline_blank"))}},[t._v("check_box_outline_blank")])]),t._v(" "),a("span",{staticClass:"role-name",class:e.roles.indexOf(parseInt(i.id))>=0?"black-color":"light-black-color",attrs:{title:i.name}},[t._v(t._s(i.name))])])])])})],2)])]):t._e()])])}),t._v(" "),a("div",{staticClass:"add-role"},[a("button",{staticClass:"add-btn clearBtnBorder",on:{click:t._addPlayer}},[t._v("添加代理者")])])],2)])])},staticRenderFns:[]};var q=a("C7Lr")(G,F,!1,function(t){a("PWqW")},null,null).exports,U=a("KH7x"),Y=a.n(U),z=a("aA9S"),Q=a.n(z),X=(String,{props:{name:String}}),W={render:function(){var t=this.$createElement;return(this._self._c||t)("i",{staticClass:"maticon"},[this._v(this._s(this.name))])},staticRenderFns:[]},J=a("C7Lr")(X,W,!1,null,null,null).exports,V=(Boolean,Array,String,Number,{name:"ElCollapse",componentName:"ElCollapse",props:{accordion:Boolean,value:{type:[Array,String,Number],default:function(){return[]}}},data:function(){return{activeNames:[].concat(this.value)}},provide:function(){return{collapse:this}},watch:{value:function(t){this.activeNames=[].concat(t)}},methods:{setActiveNames:function(t){t=[].concat(t);var e=this.accordion?t[0]:t;this.activeNames=t,this.$emit("input",e),this.$emit("change",e)},handleItemClick:function(t){if(this.accordion)this.setActiveNames(!this.activeNames[0]&&0!==this.activeNames[0]||this.activeNames[0]!==t.name?t.name:"");else{var e=this.activeNames.slice(0),a=e.indexOf(t.name);a>-1?e.splice(a,1):e.push(t.name),this.setActiveNames(e)}}},created:function(){this.$on("item-click",this.handleItemClick)}}),K={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"el-collapse",attrs:{role:"tablist","aria-multiselectable":"true"}},[this._t("default")],2)},staticRenderFns:[]},Z=a("C7Lr")(V,K,!1,null,null,null).exports;var tt={methods:{dispatch:function(t,e,a){for(var i=this.$parent||this.$root,o=i.$options.componentName;i&&(!o||o!==t);)(i=i.$parent)&&(o=i.$options.componentName);i&&i.$emit.apply(i,[e].concat(a))},broadcast:function(t,e,a){(function t(e,a,i){this.$children.forEach(function(o){o.$options.componentName===e?o.$emit.apply(o,[a].concat(i)):t.apply(o,[e,a].concat([i]))})}).call(this,t,e,a)}}},et=(a("hRKE"),i.a.prototype.$isServer),at=(et||Number(document.documentMode),function(t){return(t||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")});!et&&document.addEventListener,!et&&document.removeEventListener;function it(t,e){if(!t||!e)return!1;if(-1!==e.indexOf(" "))throw new Error("className should not contain space.");return t.classList?t.classList.contains(e):(" "+t.className+" ").indexOf(" "+e+" ")>-1}function ot(t,e){if(t){for(var a=t.className,i=(e||"").split(" "),o=0,n=i.length;o<n;o++){var s=i[o];s&&(t.classList?t.classList.add(s):it(t,s)||(a+=" "+s))}t.classList||(t.className=a)}}function nt(t,e){if(t&&e){for(var a=e.split(" "),i=" "+t.className+" ",o=0,n=a.length;o<n;o++){var s=a[o];s&&(t.classList?t.classList.remove(s):it(t,s)&&(i=i.replace(" "+s+" "," ")))}t.classList||(t.className=at(i))}}String,String,Number,Number;var st={name:"ElCollapseItem",componentName:"ElCollapseItem",mixins:[tt],data:function(){return{contentWrapStyle:{height:"auto",display:"block"},contentHeight:0,focusing:!1,isClick:!1}},inject:["collapse"],props:{title:String,name:{type:[String,Number],default:function(){return this._uid}},itemWrapCorrectionHeight:{type:Number,default:function(){return 0}}},computed:{isActive:function(){return this.collapse.activeNames.indexOf(this.name)>-1},id:function(){return+new Date}},methods:{handleFocus:function(){var t=this;setTimeout(function(){t.isClick?t.isClick=!1:t.focusing=!0},50)},handleHeaderClick:function(){this.dispatch("ElCollapse","item-click",this),this.focusing=!1,this.isClick=!0},handleEnterClick:function(){this.dispatch("ElCollapse","item-click",this)},beforeEnter:function(t){ot(t,"collapse-transition"),t.dataset||(t.dataset={}),t.dataset.oldPaddingTop=t.style.paddingTop,t.dataset.oldPaddingBottom=t.style.paddingBottom,t.style.height=0+this.itemWrapCorrectionHeight+"px",t.style.paddingTop=0,t.style.paddingBottom=0},enter:function(t){t.dataset.oldOverflow=t.style.overflow,0!==t.scrollHeight?(t.style.height=t.scrollHeight+"px",t.style.paddingTop=t.dataset.oldPaddingTop,t.style.paddingBottom=t.dataset.oldPaddingBottom):(t.style.height="",t.style.paddingTop=t.dataset.oldPaddingTop,t.style.paddingBottom=t.dataset.oldPaddingBottom),t.style.overflow="hidden"},afterEnter:function(t){nt(t,"collapse-transition"),t.style.height="",t.style.overflow=t.dataset.oldOverflow},beforeLeave:function(t){t.dataset||(t.dataset={}),t.dataset.oldPaddingTop=t.style.paddingTop,t.dataset.oldPaddingBottom=t.style.paddingBottom,t.dataset.oldOverflow=t.style.overflow,t.style.height=t.scrollHeight+"px",t.style.overflow="hidden"},leave:function(t){0!==t.scrollHeight&&(ot(t,"collapse-transition"),t.style.height=0+this.itemWrapCorrectionHeight+"px",t.style.paddingTop=0,t.style.paddingBottom=0)},afterLeave:function(t){nt(t,"collapse-transition"),t.style.height="",t.style.overflow=t.dataset.oldOverflow,t.style.paddingTop=t.dataset.oldPaddingTop,t.style.paddingBottom=t.dataset.oldPaddingBottom}}},rt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"el-collapse-item",class:{"is-active":t.isActive}},[a("div",{attrs:{role:"tab","aria-expanded":t.isActive,"aria-controls":"el-collapse-content-"+t.id,"aria-describedby":"el-collapse-content-"+t.id}},[a("div",{staticClass:"el-collapse-item__header",class:{focusing:t.focusing,"is-active":t.isActive},attrs:{role:"button",id:"el-collapse-head-"+t.id,tabindex:"0"},on:{click:t.handleHeaderClick,focus:t.handleFocus,keyup:function(e){return"button"in e||!t._k(e.keyCode,"space",32,e.key," ")||!t._k(e.keyCode,"enter",13,e.key,"Enter")?(e.stopPropagation(),t.handleEnterClick(e)):null},blur:function(e){t.focusing=!1}}},[a("i",{staticClass:"el-collapse-item__arrow maticon",class:{"is-active":t.isActive}},[t._v("expand_more")]),t._v(" "),t._t("title",[t._v(t._s(t.title))])],2)]),t._v(" "),a("transition",{on:{beforeEnter:t.beforeEnter,enter:t.enter,"after-enter":t.afterEnter,"before-leave":t.beforeLeave,leave:t.leave,"after-leave":t.afterLeave}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isActive,expression:"isActive"}],staticClass:"el-collapse-item__wrap",attrs:{role:"tabpanel","aria-hidden":!t.isActive,"aria-labelledby":"el-collapse-head-"+t.id,id:"el-collapse-content-"+t.id}},[a("div",{staticClass:"el-collapse-item__content"},[t._t("content")],2)])])],1)},staticRenderFns:[]};var lt=a("C7Lr")(st,rt,!1,function(t){a("OgYg")},null,null).exports,ct=(Object,String,Number,Number,Array,Object,Boolean,Object,Boolean,{components:{"el-collapse":Z,"el-collapse-item":lt,VIcon:J},props:{tabs:Object,curTab:String,activeCategoryId:Number,activeProjectId:Number,categories:{type:Array,default:function(){return[]}},projects:Object,loading:{type:Boolean,default:!1},limitOptions:Object,hasAuthority:Boolean},data:function(){return{lang:"zh-cn",loader:H,peopleConditionsModal:{show:!1,title:"选择条件",grade:"",educationLevel:"",educationLevelLabel:"",inSchoolStatus:"",inSchoolStatusLabel:"",grades:[{id:0,text:"不限制"}],gradesMax:10,inSchoolStatusOptions:[{id:0,text:"不限制"},{id:"IN_SCHOOL",text:"在校"},{id:"NOT_IN_SCHOOL",text:"不在校"}]},selectLimitOptions:{educationLevel:0,grade:0,inSchoolStatus:0}}},created:function(){var t=window.localStorage.getItem("lang");t&&Object(l.e)(t)&&(this.lang=t);for(var e=(new Date).getFullYear()+1,a=0;a<this.peopleConditionsModal.gradesMax;++a){var i=e--+"";this.peopleConditionsModal.grades.push({id:i,text:i})}},computed:{i18n:function(){return Object(l.e)(this.lang).iSign},isManager:function(){return this.curTab===this.tabs.MANAGE},isMine:function(){return this.curTab===this.tabs.MINE},isProxy:function(){return this.curTab===this.tabs.PROXY}},methods:{getProjectCollapseItemId:function(t,e){return t.id+"-"+e.id},toEditCategoryName:function(t){this.$emit("to-edit-category-name",t)},toEditProjectName:function(t){this.$emit("to-edit-project-name",t)},toAddSign:function(t){if(!t.limitListOfPeople)return this.$toast("请先设置人员限制");this.$emit("to-add-sign",t)},toProxySettings:function(t){this.$emit("to-proxy-settings",t)},toSignInfo:function(t,e){this.isMine||this.$emit("to-sign-info",{project:t,sign:e})},selectCategory:function(t){t&&this.$emit("select-category",t)},selectProject:function(t){t&&this.$emit("select-project",t)},setLimitType:function(t,e){this.$emit("set-limit-type",{project:t,type:e})},toSelectCondition:function(t){this.selectLimitOptions.educationLevel=0,this.selectLimitOptions.grade=0,this.selectLimitOptions.inSchoolStatus=0,this.peopleConditionsModal.educationLevel="",this.peopleConditionsModal.grade="",this.peopleConditionsModal.inSchoolStatus="",this.peopleConditionsModal.show=!0,this.peopleConditionsModal.project=t},setConditionLimit:function(){this.$emit("set-limit-type",{project:this.peopleConditionsModal.project,type:"BY_CONDITIONS",conditions:{educationLevel:this.peopleConditionsModal.educationLevel,grade:this.peopleConditionsModal.grade,inSchoolStatus:this.peopleConditionsModal.inSchoolStatus,educationLevelLabel:this.peopleConditionsModal.educationLevelLabel,inSchoolStatusLabel:this.peopleConditionsModal.inSchoolStatusLabel}}),this.peopleConditionsModal.show=!1},selectEducationLevel:function(t){this.peopleConditionsModal.educationLevel=t.val||"",this.$nextTick(function(){this.peopleConditionsModal.educationLevelLabel=t.target&&t.target.selected||"obj.target.selected is null"})},selectGrade:function(t){this.peopleConditionsModal.grade=t.val||""},selectInSchoolStatus:function(t){this.peopleConditionsModal.inSchoolStatus=t.val||"",this.$nextTick(function(){this.peopleConditionsModal.inSchoolStatusLabel=t.target&&t.target.selected||"obj.target.selected is null"})},deleteSign:function(t,e){window.confirm("确定要删除"+e.name+"吗?")&&this.$emit("delete-sign",{project:t,sign:e})},toImport:function(t){this.$emit("to-import",t)},getLimitPeopleDesc:function(t){if(!t.limitListOfPeople)return this.i18n.peopleRestrition;switch(t.limitListOfPeople){case"NOT_LIMIT":return"无限制";case"BY_CONDITIONS":var e=[];t.educationLevel&&e.push(t.educationLevelLabel),t.grade&&e.push(t.grade+"级"),t.inSchoolStatus&&e.push("IN_SCHOOL"==t.inSchoolStatus?"在校":"不在校"),e.length||e.push("无条件限制");return(e.length>=2?e.join(","):e[0])+"("+t.peopleCount+"人)";case"ALL_SCHOOL":return"全校在校生("+t.peopleCount+"人)";default:return"自定义名单("+t.peopleCount+"人)"}},showMore:function(t){this.$emit("show-more-projects",t)}}}),dt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.loading?a("div",{staticClass:"empty-categories loader",domProps:{innerHTML:t._s(t.loader.iconWithText)}}):t.hasAuthority?t.categories.length?a("el-collapse",{attrs:{value:t.activeCategoryId,accordion:""},on:{change:t.selectCategory}},t._l(t.categories,function(e,i){return a("el-collapse-item",{key:i,staticClass:"i-sign-category-item",attrs:{name:e.id,itemWrapCorrectionHeight:48}},[a("template",{slot:"title"},[t.isManager?a("div",{staticClass:"category-item-title",on:{click:function(a){a.stopPropagation(),t.toEditCategoryName(e)}}},[t._v(t._s(e.name)+"\n          "),a("span",{staticClass:"edit-mask"},[t._v(".")]),t._v(" "),a("v-icon",{attrs:{name:"edit",title:t.i18n.editName}})],1):a("div",{staticClass:"category-item-title"},[t._v(t._s(e.name))])]),t._v(" "),a("template",{slot:"content"},[t.projects[e.id]?t.projects[e.id].loading?a("div",{staticClass:"empty-projects loader",domProps:{innerHTML:t._s(t.loader.iconWithText)}}):t.projects[e.id].list.length?a("el-collapse",{attrs:{value:t.activeProjectId,accordion:""},on:{change:t.selectProject}},[t._l(t.projects[e.id].list,function(i,o){return a("el-collapse-item",{key:o,staticClass:"i-sign-project-item",attrs:{name:t.getProjectCollapseItemId(e,i)}},[a("template",{slot:"title"},[a("div",{staticClass:"project-name-container"},[a("div",{staticClass:"project-name"},[t._v(t._s(i.name))]),t._v(" "),t.isManager?a("div",{staticClass:"project-edit",on:{click:function(e){e.stopPropagation(),t.toEditProjectName(i)}}},[a("v-icon",{attrs:{name:"edit",title:t.i18n.editName}})],1):t._e()]),t._v(" "),t.isManager?a("div",{staticClass:"project-actions"},[a("div",{staticClass:"people-restration"},[a("button",{staticClass:"btn btn-primary clearBtnBorder",attrs:{type:"button"},on:{click:function(t){t.stopPropagation()}}},[a("v-icon",{staticClass:"pull-left",attrs:{name:"people"}}),t._v(" "),a("span",{domProps:{innerHTML:t._s(i.peopleLoading?t.loader.small:t.getLimitPeopleDesc(i))}})],1),t._v(" "),a("transition",{attrs:{name:"fade"}},[a("ul",{staticClass:"list-popper"},[a("li",{on:{click:function(e){e.stopPropagation(),t.setLimitType(i,"NOT_LIMIT")}}},[t._v("无限制")]),t._v(" "),a("li",{on:{click:function(e){e.stopPropagation(),t.toSelectCondition(i)}}},[t._v("按条件筛选")]),t._v(" "),a("li",{on:{click:function(e){e.stopPropagation(),t.setLimitType(i,"ALL_SCHOOL")}}},[t._v("全校在校生")]),t._v(" "),a("li",{on:{click:function(e){e.stopPropagation(),t.toImport(i)}}},[t._v("自定义名单导入")])])])],1),t._v(" "),a("button",{staticClass:"btn btn-primary clearBtnBorder",attrs:{type:"button"},on:{click:function(e){e.stopPropagation(),t.toProxySettings(i)}}},[a("v-icon",{staticClass:"pull-left",attrs:{name:"settings"}}),t._v(t._s(t.i18n.proxySettings))],1),t._v(" "),a("button",{staticClass:"btn btn-primary clearBtnBorder",attrs:{type:"button"},on:{click:function(e){e.stopPropagation(),t.toAddSign(i)}}},[a("v-icon",{staticClass:"pull-left",attrs:{name:"add"}}),t._v(t._s(t.i18n.addSign)+"\n                ")],1)]):t._e()]),t._v(" "),a("template",{slot:"content"},[a("div",{staticClass:"signs"},[i.signs?i.signs.loading?a("div",{staticClass:"empty-signs loader",domProps:{innerHTML:t._s(t.loader.iconWithText)}}):i.signs.list.length?t._l(i.signs.list,function(e,o){return a("div",{key:o,staticClass:"sign",class:{"sign-hover":!t.isMine,"sign-success":"SIGN"==e.signInStatus||"MANUAL_ENTRY"==e.signInStatus,"sign-failed":"TIME_OUT_NOT_SIGN"==e.signInStatus,"sign-without-icon":t.isProxy},on:{click:function(a){t.toSignInfo(i,e)}}},[t._v("\n                "+t._s(e.name)+"\n                "),t.isManager?a("v-icon",{staticClass:"sign-status-icon delete-sign",attrs:{name:"delete"},nativeOn:{click:function(a){a.stopPropagation(),t.deleteSign(i,e)}}}):t._e(),t._v(" "),!t.isMine||"SIGN"!=e.signInStatus&&"MANUAL_ENTRY"!=e.signInStatus?t.isMine&&"TIME_OUT_NOT_SIGN"==e.signInStatus?a("v-icon",{staticClass:"sign-status-icon",attrs:{name:"clear"}}):t._e():a("v-icon",{staticClass:"sign-status-icon",attrs:{name:"done"}})],1)}):a("div",{staticClass:"empty-signs"},[t._v("\n                "+t._s(t.isManager?"该项目下没有签到":"暂无签到")+"\n              ")]):a("div",[t._v("\n                nothing here\n              ")])],2)])],2)}),t._v(" "),t.projects[e.id].hasMore&&!t.projects[e.id].pageLoading?a("div",{staticClass:"show-more",on:{click:function(a){t.showMore(e)}}},[t._v("查看更多")]):t._e(),t._v(" "),t.projects[e.id].pageLoading?a("div",{staticClass:"page-loading loader",domProps:{innerHTML:t._s(t.loader.iconWithText)}}):t._e(),t._v(" "),t.projects[e.id].showNoMoreTip?a("div",{staticClass:"page-loading"},[t._v("已经到底了~")]):t._e()],2):a("div",{staticClass:"empty-projects"},[t._v("\n          暂无签到项目\n        ")]):a("div",{staticClass:"empty-projects"},[t._v("\n          nothing here\n        ")])],1)],2)})):a("div",{staticClass:"empty-categories"},[t._v("\n    "+t._s("暂无项目分类")+"\n  ")]):a("div",{staticClass:"empty-categories loader"},[t._v("\n    您无管理签到项目的权限\n  ")]),t._v(" "),a("v-modal",{attrs:{show:t.peopleConditionsModal.show,effect:"fade",width:"500"}},[a("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("\n        "+t._s(t.peopleConditionsModal.title)+"\n      ")])]),t._v(" "),a("div",{staticClass:"modal-body container-fluid",attrs:{slot:"modal-body"},slot:"modal-body"},[a("div",{staticClass:"conditions"},[a("ul",[a("li",[a("label",[t._v("培养层次")]),t._v(" "),a("v-select",{ref:"educationLevel",attrs:{options:t.limitOptions.educationLevel,"options-value":"id","options-label":"text",required:!0},on:{afterSelected:t.selectEducationLevel},model:{value:t.selectLimitOptions.educationLevel,callback:function(e){t.$set(t.selectLimitOptions,"educationLevel",e)},expression:"selectLimitOptions.educationLevel"}})],1),t._v(" "),a("li",[a("label",[t._v("年级")]),t._v(" "),a("v-select",{ref:"grade",attrs:{options:t.peopleConditionsModal.grades,"options-value":"id","options-label":"text",required:!0},on:{afterSelected:t.selectGrade},model:{value:t.selectLimitOptions.grade,callback:function(e){t.$set(t.selectLimitOptions,"grade",e)},expression:"selectLimitOptions.grade"}})],1),t._v(" "),a("li",[a("label",[t._v("在校状态")]),t._v(" "),a("v-select",{ref:"inSchoolStatus",attrs:{options:t.peopleConditionsModal.inSchoolStatusOptions,"options-value":"id","options-label":"text",required:!0},on:{afterSelected:t.selectInSchoolStatus},model:{value:t.selectLimitOptions.inSchoolStatus,callback:function(e){t.$set(t.selectLimitOptions,"inSchoolStatus",e)},expression:"selectLimitOptions.inSchoolStatus"}})],1)])])]),t._v(" "),a("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.peopleConditionsModal.show=!1}}},[t._v(t._s(t.i18n.cancel))]),t._v(" "),a("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.setConditionLimit(t.peopleConditionsModal.project)}}},[t._v(t._s(t.i18n.sure))])])])],1)},staticRenderFns:[]};var ut=a("C7Lr")(ct,dt,!1,function(t){a("9FPf")},null,null).exports,ht=(Object(l.b)(function(){this.tabsData[this.curTab].init=!1,this.selectTab(this.curTab)},400),{components:{VIcon:J,CategoryProjectList:ut},data:function(){return{lang:"zh-cn",tabs:{MANAGE:"MANAGE",PROXY:"PROXY",MINE:"MINE"},keyword:null,curTab:"MANAGE",tabsData:{MANAGE:{text:null,name:null,loading:!0,init:!1,activeCategoryId:null,activeProjectId:null,categories:[],projects:{},hasAuthority:!1},PROXY:{text:null,name:null,loading:!0,init:!1,activeCategoryId:null,activeProjectId:null,categories:[],projects:{},hasAuthority:!1},MINE:{text:null,name:null,loading:!0,init:!1,activeCategoryId:null,activeProjectId:null,categories:[],projects:{},hasAuthority:!1}},userTypes:{MANAGE:"MANAGE",PROXY:"AGENT",MINE:"MY"},newProjectModal:{show:!1,name:null,categoryId:null,projectNameMaxLength:30,categoryNameMaxLength:15,categories:[],showAddCategoryForm:!1,newCategoryName:null},editNameModal:{show:!1,title:null,placeholder:null,maxLength:null,i18n:null,id:null,type:null,name:null,focusInput:!0,category:null,project:null},newSignModal:{show:!1,name:null,startTime:"",endTime:"",useDynamicCode:!1,project:null,projectId:null,maxLength:20,dateFormat:"yyyy-MM-dd hh:ii:ss"},importPeople:{show:!1,parentPageTitle:null,downloadTemplateUrl:"/iSignIn/projects/downloadTemplate",downloadErrorTemplateUrl:"/iSignIn/projects/excels/error",checkTemplateUrl:"",importBtnType:null,templateName:"自定义名单模板",project:null},limitOptions:{educationLevel:[{id:0,text:"不限制"}]}}},created:function(){var t=window.localStorage.getItem("lang");t&&Object(l.e)(t)&&(this.lang=t),this.editNameModal.i18n=this.i18n,this.tabsData.MANAGE.name=this.tabsData.MANAGE.text=this.i18n.listTypeManage,this.tabsData.PROXY.name=this.tabsData.PROXY.text=this.i18n.listTypeProxy,this.tabsData.MINE.name=this.tabsData.MINE.text=this.i18n.listTypeMine,this.selectTab(this.tabs.MANAGE),this.initLimitConditions()},computed:{i18n:function(){return Object(l.e)(this.lang).iSign}},methods:{isCurrentTab:function(t){return this.curTab===t},selectTab:function(t){var e=this,a=this.tabsData[t];this.curTab===t&&(a.init=!1,a.loading=!0,a.projects={},a.activeCategoryId=null,a.activeProjectId=null),this.curTab=t,a.init?a.loading=!1:(a.loading=!0,c(function(i,o){return i?e.$toast(e.i18n.error.networkError):o.state?(a.hasAuthority=!0,t!=e.tabs.MANAGE||o.data?void d(e.curTab,e.keyword,function(i,o){if(i)return e.$toast(e.i18n.error.networkError);if(!o.state)return e.$toast(o.message);if(a.init=!0,a.categories=o.data,a.loading=!1,a.categories.length){var s=a.categories[0];a.activeCategoryId=s.id;var r=e.getProjectDefaultViewSettings();e.$set(a.projects,s.id,r),h(e.userTypes[t],s.id,e.keyword,r.page,r.size,function(t,i){if(t)return e.$toast(e.i18n.error.networkError);if(!i.state)return e.$toast(i.message);r.init=!0,r.list=i.list,r.loading=!1,r.hasMore=i.totalPages>r.page+1,r.list.length&&(a.activeProjectId=a.activeCategoryId+"-"+r.list[0].id,e.selectProject(a.activeProjectId));var o=!0,s=!1,l=void 0;try{for(var c,d=n()(i.list);!(o=(c=d.next()).done);o=!0){var u=c.value;e.setProjectPeopleCount(u)}}catch(t){s=!0,l=t}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}})}}):(a.hasAuthority=!1,a.init=!0,void(a.loading=!1))):e.$toast(o.message)}))},initLimitConditions:function(){var t=this;w(function(e,a){if(e)return t.$toast(t.i18n.error.networkError);if(!a.state)return t.$toast(a.message);if(a.data)for(var i in a.data)t.limitOptions.educationLevel.push({id:i,text:a.data[i]})})},showMoreProjects:function(t){var e=this,a=this.tabsData[this.curTab].projects[t.id];a.page+=1,a.pageLoading=!0,h(this.userTypes[this.curTab],t.id,this.keyword,a.page,a.size,function(t,i){if(t)return e.$toast(e.i18n.error.networkError);if(!i.state)return e.$toast(i.message);a.pageLoading=!1,a.list=a.list.concat(i.list),a.hasMore=i.totalPages>a.size+1,a.hasMore||(a.showNoMoreTip=!0,setTimeout(function(){a.showNoMoreTip=!1},2e3));var o=!0,s=!1,r=void 0;try{for(var l,c=n()(i.list);!(o=(l=c.next()).done);o=!0){var d=l.value;e.setProjectPeopleCount(d)}}catch(t){s=!0,r=t}finally{try{!o&&c.return&&c.return()}finally{if(s)throw r}}})},mouseoverTab:function(t){t===this.curTab&&(this.tabsData[t].text=this.i18n.refresh)},mouseoutTab:function(t){this.tabsData[t].text=this.tabsData[t].name},toAddProjectModal:function(){var t=this;d(this.curTab,this.keyword,function(e,a){if(e)return t.$toast(t.i18n.error.networkError);a.state?(t.newProjectModal.categories=a.data,t.newProjectModal.categoryId=null,t.newProjectModal.newCategoryName=null,t.newProjectModal.show=!0):t.$toast(a.message)})},addCategory:function(){var t=this;if(!this.newProjectModal.newCategoryName)return this.$toast(this.i18n.error.pleaseFillInCategoryName);f(this.newProjectModal.newCategoryName,function(e,a){return e?t.$toast(t.i18n.error.networkError):a.state?(t.newProjectModal.categories.unshift(a.data),t.newProjectModal.categoryId=a.data.id,t.unshiftCategoryToTabs(a.data),t.$toast(t.i18n.tip.addCategorySuccess),void(t.newProjectModal.showAddCategoryForm=!1)):"50003"==a.code?t.$toast(t.i18n.error.categoryNameIsExisted):t.$toast(a.message)})},unshiftCategoryToTabs:function(t){for(var e in this.tabsData)this.tabsData[e].categories.unshift(t),this.$set(this.tabsData[e].projects,t.id,this.getProjectDefaultViewSettings())},addProject:function(){var t=this;if(!this.newProjectModal.name)return this.$toast(this.i18n.error.pleaseFillInProjectName);var e=this.newProjectModal.categoryId;if(!e&&!this.newProjectModal.newCategoryName)return this.$toast(this.i18n.error.pleaseChooseCategoryOrAddCategory);v({projectName:this.newProjectModal.name,projectTypeId:e,projectTypeName:this.newProjectModal.newCategoryName},function(a,i){if(a)return t.$toast(t.i18n.error.networkError);if(!i.state)return t.$toast(i.message);var o=t.tabsData[t.curTab].projects;o[e]||t.$set(o,e,t.getProjectDefaultViewSettings()),i.data.peopleLoading=!1,i.data.peopleCount=0,o[e].init=!1,o[e].loading=!1,o[e].list.unshift(i.data),t.newProjectModal.show=!1,t.tabsData[t.curTab].activeCategoryId=e,t.selectProject(e+"-"+i.data.id),alert("项目创建成功，请继续设置人员限制、代理设置、签到");var n=t.tabsData[t.curTab].categories,s=-1;for(var r in n)if(n[r].id==e){s=parseInt(r);break}if(-1==s)return console.warn("unexpected data: category not found:",n,e);0!=s&&n.unshift(n.splice(s,1)[0])})},toEditCategoryName:function(t){this.editNameModal.show=!0,this.editNameModal.title=this.i18n.editCategoryName,this.editNameModal.placeholder=this.i18n.addCategoryPlaceholder,this.editNameModal.maxLength=this.newProjectModal.categoryNameMaxLength,this.editNameModal.focusInput=!0,this.editNameModal.id=t.id,this.editNameModal.name=t.name,this.editNameModal.type="category",this.editNameModal.category=t,this.editNameModal.project=null},toEditProjectName:function(t){this.editNameModal.show=!0,this.editNameModal.title=this.i18n.editProjectName,this.editNameModal.placeholder=this.i18n.addProjectPlaceholder,this.editNameModal.maxLength=this.newProjectModal.projectNameMaxLength,this.editNameModal.focusInput=!0,this.editNameModal.id=t.id,this.editNameModal.name=t.name,this.editNameModal.type="project",this.editNameModal.category=null,this.editNameModal.project=t},toAddSign:function(t){this.newSignModal.show=!0,this.newSignModal.projectId=t.id,this.newSignModal.project=t,this.newSignModal.name="",this.newSignModal.startTime=null,this.newSignModal.endTime=null,this.newSignModal.useDynamicCode=!1,this.$refs.startTime.value="",this.$refs.endTime.value=""},toSignInfo:function(t){this.$emit("to-sign-info",Q()(t,{tab:this.curTab}))},toProxySettings:function(t){this.$emit("to-proxy-settings",t)},toImport:function(t){var e=this;this.importPeople.parentPageTitle=t.name,this.importPeople.checkTemplateUrl="/iSignIn/projects/peopleLimit/excels/"+t.id,this.importPeople.importBtnType=[{url:"/iSignIn/projects/peopleLimit/"+t.id+"/LIMIT_BY_LIST",method:"PUT",isShowBtn:!0,name:"覆盖导入",success:function(t){t.state&&e.importSuccess()}}],this.importPeople.show=!0,this.importPeople.project=t},signStartSelected:function(t){if(this.newSignModal.endTime&&new Date(t.value.replace(/-/g,"/"))-new Date(this.newSignModal.endTime.replace(/-/g,"/"))>=0)return this.newSignModal.startTime?this.$refs.startTime.value=this.newSignModal.startTime:this.$refs.startTime.clearValue(),void this.$toast(this.i18n.endTimeMustBeAfterStartTime);this.newSignModal.startTime=t.value},signEndSelected:function(t){var e=t.value.replace(/-/g,"/");return this.newSignModal.startTime&&new Date(e)-new Date(this.newSignModal.startTime.replace(/-/g,"/"))<=0?(this.newSignModal.endTime?this.$refs.endTime.value=this.newSignModal.endTime:this.$refs.endTime.clearValue(),void this.$toast(this.i18n.endTimeMustBeAfterStartTime)):new Date-new Date(e)>0?(this.$toast(this.i18n.endTimeMustBeAfterNow),void(this.newSignModal.endTime?this.$refs.endTime.value=this.newSignModal.endTime:this.$refs.endTime.clearValue())):void(this.newSignModal.endTime=t.value)},addSign:function(){var t=this;return this.newSignModal.startTime?this.newSignModal.endTime?this.newSignModal.name?void S(this.newSignModal.projectId,this.newSignModal.name,this.newSignModal.startTime,this.newSignModal.endTime,this.newSignModal.useDynamicCode,function(e,a){return e?t.$toast(t.i18n.error.networkError):a.state?(t.newSignModal.project.signs.init=!1,t.$toast(t.i18n.tip.addSignSuccess),t.newSignModal.show=!1,t.newSignModal.project.signs.list.push(a.data),void t.selectProject(t.newSignModal.project.categoryId+"-"+t.newSignModal.projectId)):t.$toast(a.message)}):this.$toast(this.i18n.error.pleaseFillInSignName):this.$toast(this.i18n.error.pleaseChooseEndTime):this.$toast(this.i18n.error.pleaseChooseStartTime)},deleteSign:function(t){var e=this,a=t.project,i=t.sign;x(i.id,function(t,o){if(t)return e.$toast(e.i18n.error.networkError);if(!o.state)return"50001"===o.code?e.$toast("该签到已经被删除，请刷新页面查看最新数据"):e.$toast(o.message);e.$toast(e.i18n.tip.deleteSuccess);var n=-1;a.signs.list.forEach(function(t,e){i.id==t.id&&(n=e)}),-1!==n?a.signs.list.splice(n,1):console.warn("delete sign which not in project",i,-1)})},submitEditName:function(){var t=this;if(!this.editNameModal.name)return this.$toast(this.i18n.error.pleaseFillInName);var e={id:this.editNameModal.id,name:this.editNameModal.name};"category"==this.editNameModal.type?b(e,function(e,a){return e?t.$toast(t.i18n.error.networkError):a.state?(t.$toast(t.i18n.tip.modifySuccess),t.editNameModal.category.name=t.editNameModal.name,void(t.editNameModal.show=!1)):"50003"===a.code?t.$toast("该分类名称已经存在"):t.$toast(a.message)}):(e.categoryId=this.editNameModal.project.categoryId,y(e,function(e,a){return e?t.$toast(t.i18n.error.networkError):a.state?(t.$toast(t.i18n.tip.modifySuccess),t.editNameModal.project.name=t.editNameModal.name,void(t.editNameModal.show=!1)):"50003"===a.code?t.$toast("该项目名称已经存在"):t.$toast(a.message)}))},getProjectDefaultViewSettings:function(){return{init:!1,page:0,size:5,list:[],loading:!0,end:!1,hasMore:!1,pageLoading:!1,showNoMoreTip:!1}},selectCategory:function(t){var e=this,a=this.tabsData[this.curTab],i=a.projects[t]||this.getProjectDefaultViewSettings();i.init||(this.$set(a.projects,t,i),h(this.userTypes[this.curTab],t,this.keyword,i.page,i.size,function(o,s){if(o)return e.$toast(e.i18n.error.networkError);if(!s.state)return e.$toast(s.message);i.init=!0,i.list=s.list,i.loading=!1,i.hasMore=s.totalPages>i.page+1,i.list.length&&(a.activeProjectId=t+"-"+i.list[0].id,e.selectProject(a.activeProjectId));var r=!0,l=!1,c=void 0;try{for(var d,u=n()(s.list);!(r=(d=u.next()).done);r=!0){var h=d.value;e.setProjectPeopleCount(h)}}catch(o){l=!0,c=o}finally{try{!r&&u.return&&u.return()}finally{if(l)throw c}}}))},selectProject:function(t){var e=this,a=this.tabsData[this.curTab];a.activeProjectId=t;var i=t.split("-"),o=Y()(i,2),s=o[0],r=o[1],l=a.projects[s].list,c=void 0,d=!0,u=!1,h=void 0;try{for(var p,f=n()(l);!(d=(p=f.next()).done);d=!0){var v=p.value;if(v.id==r){c=v;break}}}catch(t){u=!0,h=t}finally{try{!d&&f.return&&f.return()}finally{if(u)throw h}}if(!c)return this.$toast(this.i18n.error.dataError);if(!c.signs.init){var y=g;this.curTab==this.tabs.MINE&&(y=m),c.signs.loading=!0,y(c.id,function(t,a){return t?e.$toast(e.i18n.error.networkError):a.state?(c.signs.init=!0,c.signs.loading=!1,void(a.data.length&&(c.signs.list=a.data))):e.$toast(a.message)})}},setLimitType:function(t){var e=this,a=t.project,i=t.type,o=t.conditions;a.peopleLoading=!0,a.peopleCount="",o=o||{},M(a.id,i,o,function(t,n){return t?e.$toast(e.i18n.error.networkError):n.state?(e.$toast(e.i18n.tip.setSuccess),a.limitListOfPeople=i,a.educationLevel=o.educationLevel,a.educationLevelLabel=o.educationLevelLabel,a.grade=o.grade,a.inSchoolStatus=o.inSchoolStatus,void e.setProjectPeopleCount(a)):e.$toast(n.message)})},setProjectPeopleCount:function(t){var e=this;p(t.id,function(a,i){return a?e.$toast(e.i18n.error.networkError):i.state?(t.peopleLoading=!1,void(t.peopleCount=i.data)):e.$toast(i.message)})},importSuccess:function(){var t=this;this.$toast("设置成功"),this.importPeople.show=!1,this.importPeople.project.peopleLoading=!0,u(this.importPeople.project.id,function(e,a){return e?t.$toast(t.i18n.error.networkError):a.state?(t.importPeople.project.peopleLoading=!1,t.importPeople.project.limitListOfPeople=a.data.limitListOfPeople,void(t.importPeople.project.peopleCount=a.data.peopleCount)):t.$toast(a.message)})},closeImportPeople:function(){this.importPeople.show=!1},searchCategoriesAndProjects:Object(l.b)(function(){this.tabsData[this.curTab].init=!1,this.selectTab(this.curTab)},400)}}),pt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.importPeople.show?a("v-import",t._b({on:{backParentPage:t.closeImportPeople}},"v-import",t.importPeople,!1)):a("div",{attrs:{id:"i-sign"}},[a("div",{staticClass:"i-sign-header"},[a("ul",{staticClass:"tabs"},t._l(t.tabs,function(e){return a("li",{key:e,class:{active:t.isCurrentTab(e)},on:{click:function(a){t.selectTab(e)},mouseover:function(a){t.mouseoverTab(e)},mouseout:function(a){t.mouseoutTab(e)}}},[t._v(t._s(t.tabsData[e].text))])})),t._v(" "),a("div",{staticClass:"search"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{type:"text"},domProps:{value:t.keyword},on:{input:[function(e){e.target.composing||(t.keyword=e.target.value)},t.searchCategoriesAndProjects]}}),t._v(" "),a("v-icon",{attrs:{name:"search"}})],1),t._v(" "),t.isCurrentTab(t.tabs.MANAGE)?a("div",{staticClass:"actions"},[a("button",{staticClass:"btn btn-primary clearBtnBorder",attrs:{type:"button"},on:{click:t.toAddProjectModal}},[a("v-icon",{staticClass:"pull-left",attrs:{name:"add"}}),t._v(t._s(t.i18n.addProject)+"\n      ")],1)]):t._e()]),t._v(" "),a("div",{staticClass:"i-sign-projects"},t._l(t.tabs,function(e){return a("div",{key:e},[a("category-project-list",{directives:[{name:"show",rawName:"v-show",value:t.isCurrentTab(e),expression:"isCurrentTab(tab)"}],key:e,attrs:{tabs:t.tabs,"cur-tab":e,loading:t.tabsData[e].loading,categories:t.tabsData[e].categories,projects:t.tabsData[e].projects,activeCategoryId:t.tabsData[e].activeCategoryId,activeProjectId:t.tabsData[e].activeProjectId,hasAuthority:t.tabsData[e].hasAuthority,limitOptions:t.limitOptions},on:{"to-edit-category-name":t.toEditCategoryName,"to-edit-project-name":t.toEditProjectName,"to-add-sign":t.toAddSign,"to-proxy-settings":t.toProxySettings,"to-sign-info":t.toSignInfo,"to-import":t.toImport,"select-category":t.selectCategory,"select-project":t.selectProject,"set-limit-type":t.setLimitType,"delete-sign":t.deleteSign,"show-more-projects":t.showMoreProjects}})],1)})),t._v(" "),a("v-modal",{attrs:{show:t.newProjectModal.show,effect:"fade",width:"400"}},[a("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("\n        "+t._s(t.i18n.addProject)+"\n      ")])]),t._v(" "),a("div",{staticClass:"modal-body container-fluid",attrs:{slot:"modal-body"},slot:"modal-body"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newProjectModal.name,expression:"newProjectModal.name"}],staticClass:"form-control modal-input",attrs:{type:"text",maxlength:t.newProjectModal.projectNameMaxLength,placeholder:t.i18n.addProjectPlaceholder},domProps:{value:t.newProjectModal.name},on:{input:function(e){e.target.composing||t.$set(t.newProjectModal,"name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"row type-div"},[a("div",{staticClass:"app-type-text"},[t._v("\n          "+t._s(t.i18n.selectCategory)+"\n          "),a("span",{staticClass:"add-category",on:{click:function(e){t.newProjectModal.showAddCategoryForm=!0}}},[t._v(t._s(t.i18n.new))])]),t._v(" "),a("div",{staticClass:"app-type-content"},[t.newProjectModal.showAddCategoryForm?a("div",{staticClass:"creat-category-input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newProjectModal.newCategoryName,expression:"newProjectModal.newCategoryName"},{name:"focus",rawName:"v-focus"}],staticClass:"form-control",attrs:{type:"text",maxlength:t.newProjectModal.categoryNameMaxLength,placeholder:t.i18n.addCategoryPlaceholder},domProps:{value:t.newProjectModal.newCategoryName},on:{input:function(e){e.target.composing||t.$set(t.newProjectModal,"newCategoryName",e.target.value)}}}),t._v(" "),a("div",{staticClass:"pull-right create-btn-group"},[a("button",{staticClass:"btn create-cancel clearBtnBorder",on:{click:function(e){t.newProjectModal.showAddCategoryForm=!1}}},[t._v(t._s(t.i18n.cancel))]),t._v(" "),a("button",{staticClass:"btn create-sure clearBtnBorder",on:{click:t.addCategory}},[t._v(t._s(t.i18n.sure))])]),t._v(" "),a("p",{staticClass:"error-msg"})]):t._e(),t._v(" "),t._l(t.newProjectModal.categories,function(e,i){return a("p",{key:i,staticClass:"type-p",class:{active:t.newProjectModal.categoryId===e.id},on:{click:function(a){t.newProjectModal.categoryId=e.id}}},[a("v-icon",{attrs:{name:"done"}}),t._v("\n          "+t._s(e.name)+"\n          ")],1)})],2)])]),t._v(" "),a("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.newProjectModal.show=!1}}},[t._v(t._s(t.i18n.cancel))]),t._v(" "),a("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button"},on:{click:t.addProject}},[t._v(t._s(t.i18n.sure))])])]),t._v(" "),a("v-modal",{attrs:{show:t.editNameModal.show,effect:"fade",width:"400"}},[a("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("\n        "+t._s(t.editNameModal.title)+"\n      ")])]),t._v(" "),a("div",{staticClass:"modal-body container-fluid",attrs:{slot:"modal-body"},slot:"modal-body"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.editNameModal.name,expression:"editNameModal.name"},{name:"focus",rawName:"v-focus",value:t.editNameModal.focusInput,expression:"editNameModal.focusInput"}],staticClass:"form-control modal-input",attrs:{type:"text",maxlength:t.editNameModal.maxLength,placeholder:t.editNameModal.placeholder},domProps:{value:t.editNameModal.name},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.submitEditName(e):null},input:function(e){e.target.composing||t.$set(t.editNameModal,"name",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.editNameModal.show=!1}}},[t._v(t._s(t.i18n.cancel))]),t._v(" "),a("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button"},on:{click:t.submitEditName}},[t._v(t._s(t.i18n.sure))])])]),t._v(" "),a("v-modal",{attrs:{show:t.newSignModal.show,effect:"fade",width:"400"}},[a("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("\n        "+t._s(t.i18n.addSign)+"\n      ")])]),t._v(" "),a("div",{staticClass:"modal-body modal-full-width container-fluid",attrs:{slot:"modal-body"},slot:"modal-body"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newSignModal.name,expression:"newSignModal.name"}],staticClass:"form-control",attrs:{type:"text",maxlength:t.newSignModal.maxLength,placeholder:t.i18n.addSignPlaceholder},domProps:{value:t.newSignModal.name},on:{input:function(e){e.target.composing||t.$set(t.newSignModal,"name",e.target.value)}}}),t._v(" "),a("v-datepicker",{ref:"startTime",staticClass:"btn-block time-picker",attrs:{format:t.newSignModal.dateFormat,placeholder:t.i18n.signStartPlaceholder,clearButton:!1},on:{daySelected:t.signStartSelected}}),t._v(" "),a("v-datepicker",{ref:"endTime",staticClass:"btn-block time-picker",attrs:{format:t.newSignModal.dateFormat,placeholder:t.i18n.signEndPlaceholder,clearButton:!1},on:{daySelected:t.signEndSelected}}),t._v(" "),a("div",{staticClass:"switch",class:t.newSignModal.useDynamicCode?"on":"off",on:{click:function(e){t.newSignModal.useDynamicCode=!t.newSignModal.useDynamicCode}}},[a("span",{staticClass:"label"},[t._v(t._s(t.i18n.useDynamicCode))]),t._v(" "),a("div",{staticClass:"slider"},[a("div",{staticClass:"pipe"}),t._v(" "),a("div",{staticClass:"head"})])])],1)]),t._v(" "),a("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.newSignModal.show=!1}}},[t._v(t._s(t.i18n.cancel))]),t._v(" "),a("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button"},on:{click:t.addSign}},[t._v(t._s(t.i18n.sure))])])])],1)},staticRenderFns:[]};var gt=a("C7Lr")(ht,pt,!1,function(t){a("4cFY")},null,null).exports,mt=a("5YEj"),ft=a.n(mt),vt=a("LqYc"),yt=a.n(vt),bt=(a("9r/T"),Object,Object,String,{NOT_SIGN:"未签到",SIGN:"已签到",MANUAL_ENTRY:"手工签到",TIME_OUT_NOT_SIGN:"超时未签到"}),_t="SCHOOL",Ct="COLLEGE",wt="CLASS",Mt="RELATIONSHIP",St={components:{VIcon:J},props:{project:Object,sign:Object,userType:String},data:function(){return{loader:H,lang:"zh-cn",datePickerStartTime:"",datePickerEndTime:"",tableParams:{pagesize:10,idField:"id",columns:[],multi:!1,order:!0,search:!1,ts:+new Date},searchOptions:{colleges:[],status:[{id:"NOT_SIGN",text:"未签到"},{id:"SIGN",text:"已签到"},{id:"MANUAL_ENTRY",text:"手工签到"}],managedColleges:[]},addPersonModal:{show:!1,userNo:null,userName:null,userId:null,tip:null},signManualModal:{show:!1,remark:null,signId:null,userId:null,userNo:null},qrcode:{fullscreen:!1,oldInstance:null,url:"",instance:null,timer:null},statModal:{show:!1,syncTime:"",totalWidth:550,minWidth:10,loading:!1,noStat:!1,generalChart:{init:!1,instance:null,options:{tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},color:["rgba(92, 107, 192, 1)","rgba(92, 107, 192, .75)","rgba(92, 107, 192, .5)"],series:[{name:"统计",type:"pie",radius:"60%",center:["49%","41%"],data:[],label:{normal:{show:!0}},labelLine:{normal:{show:!0}},itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},legend:{total:{color:"#aaa",text:"应签到",num:0},done:{color:"rgba(92, 107, 192, 1)",text:"已签到",num:0},manual:{color:"rgba(92, 107, 192, .75)",text:"手动签到",num:0},todo:{color:"rgba(92, 107, 192, 0.5)",text:"未签到",num:0}}},currentControl:"general",control:{general:{text:"总览",show:!0,checked:!0,loading:!1},college:{text:"各学院对比",show:!0,checked:!1,type:"COLLEGE",data:[],loading:!1},instructor:{text:"各辅导员对比",show:!0,checked:!1,type:"INSTRUCTOR",data:[],loading:!1},clazz:{text:"各班级对比",show:!0,checked:!1,type:"CLAZZ",data:[],loading:!1}}},proxy:{proxies:[],id:null,distributary:_t,proxyId:null,name:"",classId:"",collegeCode:""},exporting:!1}},created:function(){var t=this,e=window.localStorage.getItem("lang");e&&Object(l.e)(e)&&(this.lang=e),this.datePickerStartTime=this.sign.startTime,this.datePickerEndTime=this.sign.endTime,this.isProxy&&this.initProxies(),this.initManagedColleges(function(){t.initTable()}),this.stopQrcodeTimer()},mounted:function(){this.isProxy||this.initQrcode()},computed:{i18n:function(){return Object(l.e)(this.lang).iSign},tableUrl:function(){return this.isManager?"/table-data/signIns/peoples/MANAGE?signInId="+this.sign.id+"&ts="+this.tableParams.ts:this.isProxy?this.proxy.proxyId?"/table-data/signIns/"+this.sign.id+"/people/pages?ts="+this.tableParams.ts+"&agentId="+this.proxy.proxyId+"&classId="+(this.proxy.classId||"")+"&collegeCode="+(this.proxy.collegeCode||""):"":void 0},isManager:function(){return"MANAGE"===this.userType},isProxy:function(){return"PROXY"===this.userType},qrCodeExpireTime:function(){return this.sign.useDynamicCode?15:0}},methods:{back:function(){this.$emit("back")},initTable:function(){var t=this;this.tableParams.columns=[{id:"name",title:this.i18n.signInfo.userName,className:"text-left",width:"55px",hidden:!1,search:{type:"input",data:{placeholder:""}}},{id:"userNo",title:this.i18n.signInfo.userNo,className:"text-left",width:"120px",hidden:!1,search:{type:"input",data:{placeholder:""}}},{id:"college",title:this.i18n.signInfo.college,className:"text-left",width:"120px",hidden:!1,search:{type:"select",data:{options:this.searchOptions.colleges,optionsLabel:"text",optionsValue:"id",placeholder:""}}},{id:"signInStatus",title:this.i18n.signInfo.signStatus,className:"text-left",width:"60px",hidden:!1,formatter:function(t){return bt[t.signInStatus]},search:{type:"select",data:{options:this.searchOptions.status,optionsLabel:"text",optionsValue:"id",placeholder:""}}},{id:"signInTime",title:this.i18n.signInfo.signTime,className:"text-left",width:"150px",hidden:!1},{id:"remark",title:this.i18n.signInfo.remark,className:"text-left",width:"250px",hidden:!1},{id:"opt",title:"",className:"text-right",hidden:!1,formatter:function(e){var a=[];return"NOT_SIGN"==e.signInStatus&&a.push({tag:"a",text:t.i18n.signInfo.recordByHand,className:"opt-btn",callback:function(e,a){t.signManualModal.userId=e.userId,t.signManualModal.userNo=e.userNo,t.signManualModal.signId=e.signInId,t.signManualModal.show=!0}}),t.isManager&&a.push({tag:"a",text:t.i18n.signInfo.remove,className:"opt-btn",callback:function(e,a){window.confirm("确定把"+e.name+"从此次签到中移除?")&&N(e.signInId,e.userId,function(e,a){return e?t.$toast(t.i18n.error.networkError):a.state?(t.$toast(t.i18n.tip.removeSuccess),void(t.tableParams.ts=+new Date)):t.$toast(a.message)})}}),a}}]},signStartSelected:function(t){if(this.sign.startTime!==t.value){if(this.sign.endTime&&new Date(t.value.replace(/-/g,"/"))-new Date(this.sign.endTime.replace(/-/g,"/"))>=0)return this.datePickerStartTime=this.sign.startTime,void this.$toast(this.i18n.endTimeMustBeAfterStartTime);this.sign.startTime=this.normalizeDateString(t.value),this.saveSign()}},signEndSelected:function(t){if(this.sign.endTime!==t.value){if(this.sign.startTime&&new Date(t.value.replace(/-/g,"/"))-new Date(this.sign.startTime.replace(/-/g,"/"))<=0)return this.datePickerEndTime=this.sign.endTime,void this.$toast(this.i18n.endTimeMustBeAfterStartTime);this.sign.endTime=this.normalizeDateString(t.value),this.saveSign()}},normalizeDateString:function(t){return t&&19!==t.length?t+":00":t},changeDynamicCode:function(){var t=this;if(this.isManager){if(!this.sign.useDynamicCode)if(!window.confirm("若改为动态码，则之前的静态码将失效，确认修改吗？"))return;this.sign.useDynamicCode=!this.sign.useDynamicCode,this.saveSign(function(e){e&&(t.sign.useDynamicCode?(t.startQrcodeTimer(),t.refreshQrcode()):(t.stopQrcodeTimer(),t.refreshQrcode()))})}},changeProxy:function(t){if(t.val){var e=t.val,a=!0,i=!1,o=void 0;try{for(var s,r=n()(this.proxy.proxies);!(a=(s=r.next()).done);a=!0){var l=s.value;l.id===e&&(this.setCurrentProxy(l),this.refreshQrcode())}}catch(t){i=!0,o=t}finally{try{!a&&r.return&&r.return()}finally{if(i)throw o}}}},saveSign:function(t){var e=this;C(this.sign,function(a,i){return a?(t&&t(),e.$toast(e.i18n.error.networkError)):i.state?(e.$toast(e.i18n.tip.saveSuccess),void(t&&t(!0))):(t&&t(),e.$toast(i.message))})},showStat:function(){var t=this;this.statModal.loading=!0,this.statModal.show=!0,O(this.sign.id,function(e,a){if(e)return t.$toast(t.i18n.error.networkError);if(!a.state)return t.$toast(a.message);t.statModal.loading=!1;var i=a.data;if(!i)return t.statModal.noStat=!0;t.statModal.noStat=!1,t.statModal.generalChart.legend.total.num=i.count,t.statModal.generalChart.legend.done.num=i.countSign,t.statModal.generalChart.legend.todo.num=i.countNotSinIn,t.statModal.generalChart.legend.manual.num=i.countManualEntry,t.statModal.syncTime=i.timeTemp,t.$nextTick(function(){t.refreshGeneralChart()})})},getSignOptionWidth:function(t){var e=t.done/t.total,a=t.manual/t.total,i=t.todo/t.total;(0==t.total||i==e&&i==a)&&(i=e=a=.3333333);var o=this.statModal.totalWidth*e,n=this.statModal.totalWidth*a,s=this.statModal.totalWidth*i,r=0;return o<10&&(r+=10-o,o=10),n<10&&(r+=10-n,n=10),s<10&&(r+=10-s,s=10),o<n?n>s?n-=r:o>s?o-=r:s-=r:o>s?o-=r:n>s?n-=r:s-=r,{done:o,manual:n,todo:s}},initChartIfNotInit:function(){this.statModal.generalChart.instance=ft.a.init(document.getElementById("general-chart"))},initQrcode:function(){var t=this;this.createSignUrl(function(e){e&&(t.qrcode.url=e,t.qrcode.instance?(t.qrcode.instance.clear(),t.qrcode.instance.makeCode(e)):t.qrcode.instance=new yt.a("sign-qrcode",{text:e,width:400,height:400}),t.sign.useDynamicCode?t.startQrcodeTimer():t.stopQrcodeTimer())})},refreshQrcode:function(){var t=this;this.createSignUrl(function(e){e&&(t.qrcode.url=e,t.qrcode.instance?(t.qrcode.instance.clear(),t.qrcode.instance.makeCode(e)):t.qrcode.instance=new yt.a("sign-qrcode",{text:e,width:400,height:400}))})},startQrcodeTimer:function(){var t=this;this.stopQrcodeTimer(),this.qrcode.timer=setInterval(function(){t.refreshQrcode()},1e4)},stopQrcodeTimer:function(){this.qrcode.timer&&(clearInterval(this.qrcode.timer),this.qrcode.timer=null)},refreshGeneralChart:function(){this.initChartIfNotInit(),this.statModal.generalChart.options.series[0].data=[{value:this.statModal.generalChart.legend.done.num,name:"已签到"},{name:"手动签到",value:this.statModal.generalChart.legend.manual.num},{name:"未签到",value:this.statModal.generalChart.legend.todo.num}],this.statModal.generalChart.instance.setOption(this.statModal.generalChart.options)},getRadioIcon:function(t){return t?"radio_button_checked":"radio_button_unchecked"},changeStatType:function(t){var e=this,a=this.statModal.control[t];for(var i in this.statModal.control)this.statModal.control[i].checked=!1;a.checked=!0,this.statModal.currentControl=t,"general"!=t&&A(this.sign.id,a.type,function(t,i){return t?e.$toast(e.i18n.error.networkError):i.state?void(a.data=i.data.map(function(t){var a={overview:{total:t.overview.count,done:t.overview.countSign,manual:t.overview.countManualEntry,todo:t.overview.countNotSinIn},title:t.title,sort:t.sort};return a.widthData=e.getSignOptionWidth(a.overview),a})):e.$toast(i.message)})},fullscreen:function(){var t=this;this.qrcode.oldInstance=this.qrcode.instance,this.qrcode.fullscreen=!0,this.$nextTick(function(){t.qrcode.instance=new yt.a("sign-qrcode-fullscreen",{text:t.qrcode.url,width:400,height:400})})},existFullscreen:function(){this.clearQrcodeInstance(),this.qrcode.instance.clear(),this.qrcode.fullscreen=!1,this.qrcode.instance=this.qrcode.oldInstance},clearQrcodeInstance:function(){for(var t=this.qrcode.instance._el;t.hasChildNodes();)t.removeChild(t.lastChild)},initManagedColleges:function(t){var e=this;j(function(a,i){if(a)return e.$toast(e.i18n.error.networkError);if(!i.state)return e.$toast(i.message);var o=!0,s=!1,r=void 0;try{for(var l,c=n()(i.data.colleges);!(o=(l=c.next()).done);o=!0){var d=l.value;-1==d.id&&(d.id="")}}catch(a){s=!0,r=a}finally{try{!o&&c.return&&c.return()}finally{if(s)throw r}}e.searchOptions.managedColleges=i.data.colleges,e.searchOptions.colleges=e.searchOptions.managedColleges,t&&t()})},initProxies:function(){var t=this;k(this.sign.id,function(e,a){if(e)return t.$toast(t.i18n.error.networkError);if(!a.state)return t.$toast(a.message);if(!a.data)return t.$toast(t.i18n.error.dataError);var i=[],o=[],s=[],r=[],l=!1,c=!1,d=!1,u=!1,h=!0,p=!1,g=void 0;try{for(var m,f=n()(a.data);!(h=(m=f.next()).done);h=!0){var v=m.value;switch(v.distribution){case _t:i.push(t.createMixProxy(_t,v.agentId,v.agentName,v.agentName,null,null)),l=!0;break;case Ct:for(var y in v.colleges)o.push(t.createMixProxy(Ct,v.agentId,v.agentName,v.colleges[y],null,y));c=!0;break;case wt:for(var b in v.clazz)s.push(t.createMixProxy(wt,v.agentId,v.agentName,v.clazz[b],b,null));d=!0;break;case Mt:r.push(t.createMixProxy(Mt,v.agentId,v.agentName,v.agentName,null,null)),u=!0;break;default:console.warn("unknown proxy:",v)}}}catch(e){p=!0,g=e}finally{try{!h&&f.return&&f.return()}finally{if(p)throw g}}t.proxy.proxies=i.concat(o.concat(s.concat(r))),t.setCurrentProxy(t.proxy.proxies[0]),t.$nextTick(function(){t.initQrcode()}),t.statModal.control.college.show=!1,t.statModal.control.instructor.show=!1,t.statModal.control.clazz.show=!1,l?(t.statModal.control.college.show=!0,t.statModal.control.instructor.show=!0,t.statModal.control.clazz.show=!0):c?(t.statModal.control.college.show=!0,t.statModal.control.clazz.show=!0):(u||d)&&(t.statModal.control.clazz.show=!0)})},setCurrentProxy:function(t){this.proxy.id=t.id,this.proxy.proxyId=t.proxyId,this.proxy.name=t.name,this.proxy.collegeCode=t.collegeCode,this.proxy.classId=t.classId,this.proxy.distributary=t.distributary,t.distributary===Ct?this.searchOptions.colleges=[{id:t.collegeCode,text:t.name}]:this.searchOptions.colleges=this.searchOptions.managedColleges},createMixProxy:function(t,e,a,i,o,n){return{id:t+"-"+e+"-"+(o||"__")+"-"+(n||"__"),proxyId:e,distributary:t,proxyName:a,name:i,classId:o||"",collegeCode:n||""}},signManual:function(){var t=this;if(!this.signManualModal.remark)return this.$toast("您还未填写备注");T(this.sign.id,this.signManualModal.userId,this.signManualModal.remark,function(e,a){return e?t.$toast(t.i18n.error.networkError):a.state?(t.$toast(t.i18n.tip.setSuccess),t.tableParams.ts=+new Date,void(t.signManualModal.show=!1)):t.$toast(a.message)})},checkUser:function(){var t=this;if(!this.addPersonModal.userNo)return this.$toast("请输入学号");this.addPersonModal.userId=null,this.addPersonModal.tip="检测中...",P(this.addPersonModal.userNo,function(e,a){return e?t.$toast(t.i18n.error.networkError):a.state?(t.addPersonModal.userId=a.data.userId,void(t.addPersonModal.userName=t.addPersonModal.tip=a.data.name)):"50001"==a.code?t.addPersonModal.tip="不存在该学号":t.$toast(a.message)})},addSignPeople:function(){var t=this;if(!this.addPersonModal.userId)return this.$toast("请输入学号");I(this.project.id,this.sign.id,this.addPersonModal.userId,function(e,a){return e?t.$toast(t.i18n.error.networkError):a.state?(t.$toast("添加成功"),t.tableParams.ts=+new Date,void(t.addPersonModal.show=!1)):"50003"==a.code?t.$toast(t.addPersonModal.userName+"已经在签到名单中"):t.$toast(a.message)})},createSignUrl:function(t){var e=this;E(this.sign.id,this.proxy.distributary,this.proxy.collegeCode,this.proxy.classId,this.qrCodeExpireTime,function(a,i){if(a)return t(),e.$toast(e.i18n.error.networkError);if(!i.state)return t(),e.$toast(i.message);var o=window.location.origin+i.data+"?scope=yiban_scan_result";t(o)})},exportSigns:function(){var t=this.$refs["sign-table"].tableSearchFields||{};if(this.isManager)D(this.sign.id,t.name,t.userNo,t.college,t.signInStatus);else{var e=this.project.name+this.sign.name+".xlsx";$(this.sign.id,this.proxy.proxyId,t.name,t.userNo,this.proxy.collegeCode||t.college,this.proxy.classId,t.signInStatus,e)}}},beforeDestroy:function(){this.stopQrcodeTimer()}},It={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.qrcode.fullscreen,expression:"qrcode.fullscreen"}],attrs:{id:"qrcode-fullscreen"}},[a("v-icon",{attrs:{name:"close"},nativeOn:{click:function(e){return t.existFullscreen(e)}}}),t._v(" "),a("div",{staticClass:"qrcode-container"},[a("div",{attrs:{id:"sign-qrcode-name"}},[t._v(t._s(t.sign.name))]),t._v(" "),t.sign.useDynamicCode?a("div",{attrs:{id:"sign-qrcode-type"}},[t._v("动态码(刷新间隔10s)")]):t._e(),t._v(" "),a("div",{attrs:{id:"sign-qrcode-fullscreen"}}),t._v(" "),a("div",{attrs:{id:"sign-qrcode-time"}},[t._v(t._s(t.sign.startTime+" ~ "+t.sign.endTime))])])],1),t._v(" "),a("div",{staticClass:"container-fluid",attrs:{id:"sign-info"}},[a("div",{staticClass:"row text-center"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"pull-left back-div",on:{click:t.back}},[a("v-icon",{attrs:{name:"arrow_back"}}),t._v("\n          "+t._s(t.isProxy?t.sign.name:"")+"\n        ")],1)])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-9"},[a("v-table",{ref:"sign-table",attrs:{title:t.isManager?t.sign.name:"",url:t.tableUrl,pagesize:t.tableParams.pagesize,idField:t.tableParams.idField,columns:t.tableParams.columns,multiple:t.tableParams.multi,order:t.tableParams.order,search:t.tableParams.search}},[a("div",{attrs:{slot:"btn-group",role:"group"},slot:"btn-group"},[t.isProxy?a("div",{staticClass:"btn-group college-select pull-left"},[a("v-select",{attrs:{options:this.proxy.proxies,value:this.proxy.id,"options-value":"id","options-label":"name",required:!0,"close-on-select":"",justify:""},on:{afterSelected:t.changeProxy}})],1):t._e(),t._v(" "),a("div",{staticClass:"pull-right "},[a("button",{staticClass:"btn btn-bgColor-style edit-btn loader",class:{disabled:t.exporting},attrs:{type:"button"},domProps:{innerHTML:t._s(t.exporting?t.loader.small+"导出中":t.i18n.export)},on:{click:t.exportSigns}}),t._v(" "),t.isManager?a("button",{staticClass:"btn btn-bgColor-style edit-btn",attrs:{type:"button"},on:{click:function(e){t.addPersonModal.show=!0}}},[t._v(t._s(t.i18n.signInfo.editPeople))]):t._e(),t._v(" "),a("button",{staticClass:"btn btn-bgColor-style stat-btn",attrs:{type:"button"},on:{click:t.showStat}},[a("v-icon",{staticClass:"pull-left",attrs:{name:"donut_large"}}),t._v("\n              "+t._s(t.i18n.signInfo.stat)+"\n            ")],1)])])])],1),t._v(" "),a("div",{staticClass:"col-md-3 sign-detail"},[a("div",{staticClass:"sign-detail-div"},[a("div",{staticClass:"info-row"},[a("span",{staticClass:"title"},[t._v(t._s(t.i18n.signInfo.start))]),t._v(" "),t.isManager?a("v-datepicker",{ref:"startTime",staticClass:"btn-block time-picker",attrs:{format:"yyyy-MM-dd hh:ii",clearButton:!1},on:{daySelected:t.signStartSelected},model:{value:t.datePickerStartTime,callback:function(e){t.datePickerStartTime=e},expression:"datePickerStartTime"}}):a("span",{staticClass:"time"},[t._v(t._s(t.sign.startTime))])],1),t._v(" "),a("div",{staticClass:"info-row"},[a("span",{staticClass:"title"},[t._v(t._s(t.i18n.signInfo.end))]),t._v(" "),t.isManager?a("v-datepicker",{ref:"endTime",staticClass:"btn-block time-picker",attrs:{format:"yyyy-MM-dd hh:ii",clearButton:!1},on:{daySelected:t.signEndSelected},model:{value:t.datePickerEndTime,callback:function(e){t.datePickerEndTime=e},expression:"datePickerEndTime"}}):a("span",{staticClass:"time"},[t._v(t._s(t.sign.endTime))])],1),t._v(" "),a("div",{staticClass:"info-row"},[a("div",{staticClass:"switch",class:{on:t.sign.useDynamicCode,readonly:t.isProxy},on:{click:t.changeDynamicCode}},[a("span",{staticClass:"label"},[t._v(t._s(t.i18n.useDynamicCode))]),t._v(" "),t._m(0)])])]),t._v(" "),a("div",{staticClass:"qr-code-container sign-detail-div"},[a("div",{staticClass:"qr-code"},[a("v-icon",{attrs:{name:"zoom_out_map"},nativeOn:{click:function(e){return t.fullscreen(e)}}}),t._v(" "),a("div",{attrs:{id:"sign-qrcode"}})],1)])])]),t._v(" "),a("v-modal",{attrs:{show:t.addPersonModal.show,effect:"fade",width:"400"}},[a("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("\n          "+t._s(t.i18n.signInfo.editPeople)+"\n        ")])]),t._v(" "),a("div",{staticClass:"modal-body container-fluid",attrs:{slot:"modal-body"},slot:"modal-body"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.addPersonModal.userNo,expression:"addPersonModal.userNo"},{name:"focus",rawName:"v-focus"}],staticClass:"form-control modal-input",attrs:{type:"text",placeholder:t.i18n.signInfo.addPersonPlaceholder},domProps:{value:t.addPersonModal.userNo},on:{change:t.checkUser,input:function(e){e.target.composing||t.$set(t.addPersonModal,"userNo",e.target.value)}}}),t._v(" "),a("a",{staticClass:"check"},[t._v(t._s(t.i18n.check))]),t._v(" "),a("p",{staticClass:"check-user-tip"},[t._v(t._s(t.addPersonModal.tip))])])]),t._v(" "),a("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.addPersonModal.show=!1}}},[t._v(t._s(t.i18n.cancel))]),t._v(" "),a("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button"},on:{click:t.addSignPeople}},[t._v(t._s(t.i18n.sure))])])]),t._v(" "),a("v-modal",{attrs:{show:t.signManualModal.show,effect:"fade",width:"400"}},[a("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("\n          "+t._s(t.i18n.signInfo.recordByHand)+"\n        ")])]),t._v(" "),a("div",{staticClass:"modal-body container-fluid",attrs:{slot:"modal-body"},slot:"modal-body"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.signManualModal.remark,expression:"signManualModal.remark"},{name:"focus",rawName:"v-focus"}],staticClass:"form-control modal-input",attrs:{type:"text",maxlength:"100",placeholder:t.i18n.signInfo.recordByHandPlaceholder},domProps:{value:t.signManualModal.remark},on:{input:function(e){e.target.composing||t.$set(t.signManualModal,"remark",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"})]),t._v(" "),a("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.signManualModal.show=!1}}},[t._v(t._s(t.i18n.cancel))]),t._v(" "),a("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button"},on:{click:t.signManual}},[t._v(t._s(t.i18n.sure))])])]),t._v(" "),a("v-modal",{attrs:{id:"stat-modal",show:t.statModal.show,effect:"fade",width:"900"}},[a("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[a("h5",{staticClass:"modal-title"},[a("v-icon",{attrs:{name:"close"},nativeOn:{click:function(e){t.statModal.show=!1}}}),t._v(" "),a("span",[t._v(t._s(t.i18n.signInfo.stat))])],1)]),t._v(" "),a("div",{staticClass:"modal-body container-fluid",attrs:{slot:"modal-body"},slot:"modal-body"},[t.statModal.loading?a("div",{staticClass:"loader",domProps:{innerHTML:t._s(t.loader.iconWithText)}}):t.statModal.noStat?a("div",{staticClass:"loader"},[t._v("暂无统计数据")]):a("div",{staticStyle:{display:"inline-block"}},[a("div",{attrs:{id:"stat-control"}},[a("ul",t._l(t.statModal.control,function(e,i){return e.show?a("li",{key:i,on:{click:function(e){t.changeStatType(i)}}},[a("v-icon",{attrs:{name:t.getRadioIcon(e.checked)}}),t._v(" "),a("span",[t._v(t._s(e.text))])],1):t._e()}))]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"general"===t.statModal.currentControl,expression:"statModal.currentControl === 'general'"}]},[a("div",{attrs:{id:"general-chart-text"}},[a("ul",t._l(t.statModal.generalChart.legend,function(e,i){return a("li",{key:i},[a("span",{staticClass:"color",style:{background:e.color}}),t._v(" "),a("span",{staticClass:"text"},[t._v(t._s(e.text))]),t._v(" "),a("span",{staticClass:"num"},[t._v(t._s(e.num))])])}))]),t._v(" "),a("div",{attrs:{id:"general-chart"}})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"general"!==t.statModal.currentControl,expression:"statModal.currentControl !== 'general'"}]},[a("div",{attrs:{id:"bar-chart"}},t._l(t.statModal.control,function(e,i){return"manage"!=i&&e.checked?a("ul",{key:i,staticClass:"items"},t._l(e.data,function(e){return a("li",{key:e.title,staticClass:"item"},[a("div",{staticClass:"title",attrs:{title:e.title}},[t._v(t._s(e.title))]),t._v(" "),a("div",{staticClass:"bar"},[a("ul",{staticClass:"bar-chart"},[a("li",{staticClass:"part bar-done",style:{width:e.widthData.done+"px"},attrs:{title:"已签到:"+e.overview.done}}),t._v(" "),a("li",{staticClass:"part bar-manual",style:{width:e.widthData.manual+"px"},attrs:{title:"手工签到:"+e.overview.manual}}),t._v(" "),a("li",{staticClass:"part bar-todo",style:{width:e.widthData.todo+"px"},attrs:{title:"未签到:"+e.overview.todo}})]),t._v(" "),a("ul",{staticClass:"bar-tip"},[a("li",{staticClass:"text",style:{width:e.widthData.done+"px"}},[t._v(t._s(e.widthData.done>36?"已签到 "+e.overview.done:""))]),t._v(" "),a("li",{staticClass:"text",style:{width:e.widthData.manual+"px"}},[t._v(t._s(e.widthData.manual>36?"手工签到 "+e.overview.manual:""))]),t._v(" "),a("li",{staticClass:"text",style:{width:e.widthData.todo+"px"}},[t._v(t._s(e.widthData.todo>36?"未签到 "+e.overview.todo:""))])])])])})):t._e()}))]),t._v(" "),a("div",{attrs:{id:"stat-sync-time"}},[t._v("以上数据统计截止至："+t._s(t.statModal.syncTime))])])])])],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"slider"},[e("div",{staticClass:"pipe"}),this._v(" "),e("div",{staticClass:"head"})])}]};var Pt=a("C7Lr")(St,It,!1,function(t){a("Xpfo")},null,null).exports,xt={components:{ProjectManage:gt,ProxySettings:q,SignInfo:Pt},data:function(){return{pages:{PROJECT_MANAGE:"PROJECT_MANAGE",PROXY_SETTINGS:"PROXY_SETTINGS",SIGN_INFO:"SIGN_INFO"},curPage:"PROJECT_MANAGE",proxySettings:{projectId:null,projectName:null},signInfo:{project:null,sign:null,userType:null}}},created:function(){},computed:{},methods:{isCurrentPage:function(t){return this.curPage===t},toProxySettings:function(t){this.proxySettings.projectId=t.id,this.proxySettings.projectName=t.name,this.jumpTo(this.pages.PROXY_SETTINGS)},toSignInfo:function(t){var e=t.project,a=t.sign,i=t.tab;this.signInfo.project=e,this.signInfo.sign=a,this.signInfo.userType=i,this.jumpTo(this.pages.SIGN_INFO)},toProjectManage:function(){this.jumpTo(this.pages.PROJECT_MANAGE)},jumpTo:function(t){this.curPage=t}}},Tt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"100%","overflow-y":"scroll"}},[a("project-manage",{directives:[{name:"show",rawName:"v-show",value:t.isCurrentPage(t.pages.PROJECT_MANAGE),expression:"isCurrentPage(pages.PROJECT_MANAGE)"}],on:{"to-proxy-settings":t.toProxySettings,"to-sign-info":t.toSignInfo}}),t._v(" "),t.isCurrentPage(t.pages.PROXY_SETTINGS)?a("proxy-settings",t._b({key:t.proxySettings.projectId,on:{back:t.toProjectManage}},"proxy-settings",t.proxySettings,!1)):t._e(),t._v(" "),t.isCurrentPage(t.pages.SIGN_INFO)?a("sign-info",t._b({key:t.signInfo.sign.id,on:{back:t.toProjectManage}},"sign-info",t.signInfo,!1)):t._e()],1)},staticRenderFns:[]};var Nt=a("C7Lr")(xt,Tt,!1,function(t){a("un2d")},null,null);e.default=Nt.exports},KH7x:function(t,e,a){"use strict";e.__esModule=!0;var i=n(a("MGgt")),o=n(a("HzJ8"));function n(t){return t&&t.__esModule?t:{default:t}}e.default=function(){return function(t,e){if(Array.isArray(t))return t;if((0,i.default)(Object(t)))return function(t,e){var a=[],i=!0,n=!1,s=void 0;try{for(var r,l=(0,o.default)(t);!(i=(r=l.next()).done)&&(a.push(r.value),!e||a.length!==e);i=!0);}catch(t){n=!0,s=t}finally{try{!i&&l.return&&l.return()}finally{if(n)throw s}}return a}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},LqYc:function(t,e,a){var i,o;o=function(){function t(t){this.mode=a.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=0,i=this.data.length;e<i;e++){var o=[],n=this.data.charCodeAt(e);n>65536?(o[0]=240|(1835008&n)>>>18,o[1]=128|(258048&n)>>>12,o[2]=128|(4032&n)>>>6,o[3]=128|63&n):n>2048?(o[0]=224|(61440&n)>>>12,o[1]=128|(4032&n)>>>6,o[2]=128|63&n):n>128?(o[0]=192|(1984&n)>>>6,o[1]=128|63&n):o[0]=n,this.parsedData.push(o)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function e(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}t.prototype={getLength:function(t){return this.parsedData.length},write:function(t){for(var e=0,a=this.parsedData.length;e<a;e++)t.put(this.parsedData[e],8)}},e.prototype={addData:function(e){var a=new t(e);this.dataList.push(a),this.dataCache=null},isDark:function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,a){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++){this.modules[i]=new Array(this.moduleCount);for(var o=0;o<this.moduleCount;o++)this.modules[i][o]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,a),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,a)},setupPositionProbePattern:function(t,e){for(var a=-1;a<=7;a++)if(!(t+a<=-1||this.moduleCount<=t+a))for(var i=-1;i<=7;i++)e+i<=-1||this.moduleCount<=e+i||(this.modules[t+a][e+i]=0<=a&&a<=6&&(0==i||6==i)||0<=i&&i<=6&&(0==a||6==a)||2<=a&&a<=4&&2<=i&&i<=4)},getBestMaskPattern:function(){for(var t=0,e=0,a=0;a<8;a++){this.makeImpl(!0,a);var i=p.getLostPoint(this);(0==a||t>i)&&(t=i,e=a)}return e},createMovieClip:function(t,e,a){var i=t.createEmptyMovieClip(e,a);this.make();for(var o=0;o<this.modules.length;o++)for(var n=1*o,s=0;s<this.modules[o].length;s++){var r=1*s;this.modules[o][s]&&(i.beginFill(0,100),i.moveTo(r,n),i.lineTo(r+1,n),i.lineTo(r+1,n+1),i.lineTo(r,n+1),i.endFill())}return i},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=p.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var a=0;a<t.length;a++){var i=t[e],o=t[a];if(null==this.modules[i][o])for(var n=-2;n<=2;n++)for(var s=-2;s<=2;s++)this.modules[i+n][o+s]=-2==n||2==n||-2==s||2==s||0==n&&0==s}},setupTypeNumber:function(t){for(var e=p.getBCHTypeNumber(this.typeNumber),a=0;a<18;a++){var i=!t&&1==(e>>a&1);this.modules[Math.floor(a/3)][a%3+this.moduleCount-8-3]=i}for(a=0;a<18;a++){i=!t&&1==(e>>a&1);this.modules[a%3+this.moduleCount-8-3][Math.floor(a/3)]=i}},setupTypeInfo:function(t,e){for(var a=this.errorCorrectLevel<<3|e,i=p.getBCHTypeInfo(a),o=0;o<15;o++){var n=!t&&1==(i>>o&1);o<6?this.modules[o][8]=n:o<8?this.modules[o+1][8]=n:this.modules[this.moduleCount-15+o][8]=n}for(o=0;o<15;o++){n=!t&&1==(i>>o&1);o<8?this.modules[8][this.moduleCount-o-1]=n:o<9?this.modules[8][15-o-1+1]=n:this.modules[8][15-o-1]=n}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var a=-1,i=this.moduleCount-1,o=7,n=0,s=this.moduleCount-1;s>0;s-=2)for(6==s&&s--;;){for(var r=0;r<2;r++)if(null==this.modules[i][s-r]){var l=!1;n<t.length&&(l=1==(t[n]>>>o&1)),p.getMask(e,i,s-r)&&(l=!l),this.modules[i][s-r]=l,-1==--o&&(n++,o=7)}if((i+=a)<0||this.moduleCount<=i){i-=a,a=-a;break}}}},e.PAD0=236,e.PAD1=17,e.createData=function(t,a,i){for(var o=v.getRSBlocks(t,a),n=new y,s=0;s<i.length;s++){var r=i[s];n.put(r.mode,4),n.put(r.getLength(),p.getLengthInBits(r.mode,t)),r.write(n)}var l=0;for(s=0;s<o.length;s++)l+=o[s].dataCount;if(n.getLengthInBits()>8*l)throw new Error("code length overflow. ("+n.getLengthInBits()+">"+8*l+")");for(n.getLengthInBits()+4<=8*l&&n.put(0,4);n.getLengthInBits()%8!=0;)n.putBit(!1);for(;!(n.getLengthInBits()>=8*l||(n.put(e.PAD0,8),n.getLengthInBits()>=8*l));)n.put(e.PAD1,8);return e.createBytes(n,o)},e.createBytes=function(t,e){for(var a=0,i=0,o=0,n=new Array(e.length),s=new Array(e.length),r=0;r<e.length;r++){var l=e[r].dataCount,c=e[r].totalCount-l;i=Math.max(i,l),o=Math.max(o,c),n[r]=new Array(l);for(var d=0;d<n[r].length;d++)n[r][d]=255&t.buffer[d+a];a+=l;var u=p.getErrorCorrectPolynomial(c),h=new f(n[r],u.getLength()-1).mod(u);s[r]=new Array(u.getLength()-1);for(d=0;d<s[r].length;d++){var g=d+h.getLength()-s[r].length;s[r][d]=g>=0?h.get(g):0}}var m=0;for(d=0;d<e.length;d++)m+=e[d].totalCount;var v=new Array(m),y=0;for(d=0;d<i;d++)for(r=0;r<e.length;r++)d<n[r].length&&(v[y++]=n[r][d]);for(d=0;d<o;d++)for(r=0;r<e.length;r++)d<s[r].length&&(v[y++]=s[r][d]);return v};for(var a={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},o={L:1,M:0,Q:3,H:2},n=0,s=1,r=2,l=3,c=4,d=5,u=6,h=7,p={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;p.getBCHDigit(e)-p.getBCHDigit(p.G15)>=0;)e^=p.G15<<p.getBCHDigit(e)-p.getBCHDigit(p.G15);return(t<<10|e)^p.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;p.getBCHDigit(e)-p.getBCHDigit(p.G18)>=0;)e^=p.G18<<p.getBCHDigit(e)-p.getBCHDigit(p.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return p.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,a){switch(t){case n:return(e+a)%2==0;case s:return e%2==0;case r:return a%3==0;case l:return(e+a)%3==0;case c:return(Math.floor(e/2)+Math.floor(a/3))%2==0;case d:return e*a%2+e*a%3==0;case u:return(e*a%2+e*a%3)%2==0;case h:return(e*a%3+(e+a)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new f([1],0),a=0;a<t;a++)e=e.multiply(new f([1,g.gexp(a)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case a.MODE_NUMBER:return 10;case a.MODE_ALPHA_NUM:return 9;case a.MODE_8BIT_BYTE:case a.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case a.MODE_NUMBER:return 12;case a.MODE_ALPHA_NUM:return 11;case a.MODE_8BIT_BYTE:return 16;case a.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(e<41))throw new Error("type:"+e);switch(t){case a.MODE_NUMBER:return 14;case a.MODE_ALPHA_NUM:return 13;case a.MODE_8BIT_BYTE:return 16;case a.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),a=0,i=0;i<e;i++)for(var o=0;o<e;o++){for(var n=0,s=t.isDark(i,o),r=-1;r<=1;r++)if(!(i+r<0||e<=i+r))for(var l=-1;l<=1;l++)o+l<0||e<=o+l||0==r&&0==l||s==t.isDark(i+r,o+l)&&n++;n>5&&(a+=3+n-5)}for(i=0;i<e-1;i++)for(o=0;o<e-1;o++){var c=0;t.isDark(i,o)&&c++,t.isDark(i+1,o)&&c++,t.isDark(i,o+1)&&c++,t.isDark(i+1,o+1)&&c++,0!=c&&4!=c||(a+=3)}for(i=0;i<e;i++)for(o=0;o<e-6;o++)t.isDark(i,o)&&!t.isDark(i,o+1)&&t.isDark(i,o+2)&&t.isDark(i,o+3)&&t.isDark(i,o+4)&&!t.isDark(i,o+5)&&t.isDark(i,o+6)&&(a+=40);for(o=0;o<e;o++)for(i=0;i<e-6;i++)t.isDark(i,o)&&!t.isDark(i+1,o)&&t.isDark(i+2,o)&&t.isDark(i+3,o)&&t.isDark(i+4,o)&&!t.isDark(i+5,o)&&t.isDark(i+6,o)&&(a+=40);var d=0;for(o=0;o<e;o++)for(i=0;i<e;i++)t.isDark(i,o)&&d++;return a+=10*(Math.abs(100*d/e/e-50)/5)}},g={glog:function(t){if(t<1)throw new Error("glog("+t+")");return g.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return g.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},m=0;m<8;m++)g.EXP_TABLE[m]=1<<m;for(m=8;m<256;m++)g.EXP_TABLE[m]=g.EXP_TABLE[m-4]^g.EXP_TABLE[m-5]^g.EXP_TABLE[m-6]^g.EXP_TABLE[m-8];for(m=0;m<255;m++)g.LOG_TABLE[g.EXP_TABLE[m]]=m;function f(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);for(var a=0;a<t.length&&0==t[a];)a++;this.num=new Array(t.length-a+e);for(var i=0;i<t.length-a;i++)this.num[i]=t[i+a]}function v(t,e){this.totalCount=t,this.dataCount=e}function y(){this.buffer=[],this.length=0}f.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),a=0;a<this.getLength();a++)for(var i=0;i<t.getLength();i++)e[a+i]^=g.gexp(g.glog(this.get(a))+g.glog(t.get(i)));return new f(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=g.glog(this.get(0))-g.glog(t.get(0)),a=new Array(this.getLength()),i=0;i<this.getLength();i++)a[i]=this.get(i);for(i=0;i<t.getLength();i++)a[i]^=g.gexp(g.glog(t.get(i))+e);return new f(a,0).mod(t)}},v.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],v.getRSBlocks=function(t,e){var a=v.getRsBlockTable(t,e);if(void 0==a)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var i=a.length/3,o=[],n=0;n<i;n++)for(var s=a[3*n+0],r=a[3*n+1],l=a[3*n+2],c=0;c<s;c++)o.push(new v(r,l));return o},v.getRsBlockTable=function(t,e){switch(e){case o.L:return v.RS_BLOCK_TABLE[4*(t-1)+0];case o.M:return v.RS_BLOCK_TABLE[4*(t-1)+1];case o.Q:return v.RS_BLOCK_TABLE[4*(t-1)+2];case o.H:return v.RS_BLOCK_TABLE[4*(t-1)+3];default:return}},y.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var a=0;a<e;a++)this.putBit(1==(t>>>e-a-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var b=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function _(){var t=!1,e=navigator.userAgent;if(/android/i.test(e)){t=!0;var a=e.toString().match(/android ([0-9]\.[0-9])/i);a&&a[1]&&(t=parseFloat(a[1]))}return t}var C=function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){var e=this._htOption,a=this._el,i=t.getModuleCount();Math.floor(e.width/i),Math.floor(e.height/i);function o(t,e){var a=document.createElementNS("http://www.w3.org/2000/svg",t);for(var i in e)e.hasOwnProperty(i)&&a.setAttribute(i,e[i]);return a}this.clear();var n=o("svg",{viewBox:"0 0 "+String(i)+" "+String(i),width:"100%",height:"100%",fill:e.colorLight});n.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),a.appendChild(n),n.appendChild(o("rect",{fill:e.colorLight,width:"100%",height:"100%"})),n.appendChild(o("rect",{fill:e.colorDark,width:"1",height:"1",id:"template"}));for(var s=0;s<i;s++)for(var r=0;r<i;r++)if(t.isDark(s,r)){var l=o("use",{x:String(r),y:String(s)});l.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),n.appendChild(l)}},t.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},t}(),w="svg"===document.documentElement.tagName.toLowerCase()?C:"undefined"==typeof CanvasRenderingContext2D?function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){for(var e=this._htOption,a=this._el,i=t.getModuleCount(),o=Math.floor(e.width/i),n=Math.floor(e.height/i),s=['<table style="border:0;border-collapse:collapse;">'],r=0;r<i;r++){s.push("<tr>");for(var l=0;l<i;l++)s.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+o+"px;height:"+n+"px;background-color:"+(t.isDark(r,l)?e.colorDark:e.colorLight)+';"></td>');s.push("</tr>")}s.push("</table>"),a.innerHTML=s.join("");var c=a.childNodes[0],d=(e.width-c.offsetWidth)/2,u=(e.height-c.offsetHeight)/2;d>0&&u>0&&(c.style.margin=u+"px "+d+"px")},t.prototype.clear=function(){this._el.innerHTML=""},t}():function(){function t(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}if(this._android&&this._android<=2.1){var e=1/window.devicePixelRatio,a=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(t,i,o,n,s,r,l,c,d){if("nodeName"in t&&/img/i.test(t.nodeName))for(var u=arguments.length-1;u>=1;u--)arguments[u]=arguments[u]*e;else void 0===c&&(arguments[1]*=e,arguments[2]*=e,arguments[3]*=e,arguments[4]*=e);a.apply(this,arguments)}}var i=function(t,e){this._bIsPainted=!1,this._android=_(),this._htOption=e,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=e.width,this._elCanvas.height=e.height,t.appendChild(this._elCanvas),this._el=t,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return i.prototype.draw=function(t){var e=this._elImage,a=this._oContext,i=this._htOption,o=t.getModuleCount(),n=i.width/o,s=i.height/o,r=Math.round(n),l=Math.round(s);e.style.display="none",this.clear();for(var c=0;c<o;c++)for(var d=0;d<o;d++){var u=t.isDark(c,d),h=d*n,p=c*s;a.strokeStyle=u?i.colorDark:i.colorLight,a.lineWidth=1,a.fillStyle=u?i.colorDark:i.colorLight,a.fillRect(h,p,n,s),a.strokeRect(Math.floor(h)+.5,Math.floor(p)+.5,r,l),a.strokeRect(Math.ceil(h)-.5,Math.ceil(p)-.5,r,l)}this._bIsPainted=!0},i.prototype.makeImage=function(){this._bIsPainted&&function(t,e){var a=this;if(a._fFail=e,a._fSuccess=t,null===a._bSupportDataURI){var i=document.createElement("img"),o=function(){a._bSupportDataURI=!1,a._fFail&&a._fFail.call(a)};return i.onabort=o,i.onerror=o,i.onload=function(){a._bSupportDataURI=!0,a._fSuccess&&a._fSuccess.call(a)},void(i.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")}!0===a._bSupportDataURI&&a._fSuccess?a._fSuccess.call(a):!1===a._bSupportDataURI&&a._fFail&&a._fFail.call(a)}.call(this,t)},i.prototype.isPainted=function(){return this._bIsPainted},i.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},i.prototype.round=function(t){return t?Math.floor(1e3*t)/1e3:t},i}();function M(t,e){for(var a=1,i=function(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)}(t),n=0,s=b.length;n<=s;n++){var r=0;switch(e){case o.L:r=b[n][0];break;case o.M:r=b[n][1];break;case o.Q:r=b[n][2];break;case o.H:r=b[n][3]}if(i<=r)break;a++}if(a>b.length)throw new Error("Too long data");return a}return(i=function(t,e){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:o.H},"string"==typeof e&&(e={text:e}),e)for(var a in e)this._htOption[a]=e[a];"string"==typeof t&&(t=document.getElementById(t)),this._htOption.useSVG&&(w=C),this._android=_(),this._el=t,this._oQRCode=null,this._oDrawing=new w(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)}).prototype.makeCode=function(t){this._oQRCode=new e(M(t,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this._el.title=t,this._oDrawing.draw(this._oQRCode),this.makeImage()},i.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},i.prototype.clear=function(){this._oDrawing.clear()},i.CorrectLevel=o,i},t.exports=o()},MGgt:function(t,e,a){t.exports={default:a("VnND"),__esModule:!0}},OgYg:function(t,e){},PWqW:function(t,e){},VnND:function(t,e,a){a("xsjh"),a("zRHv"),t.exports=a("wUj7")},Xpfo:function(t,e){},un2d:function(t,e){},wUj7:function(t,e,a){var i=a("jUE6"),o=a("mhb3")("iterator"),n=a("XRq0");t.exports=a("UB+n").isIterable=function(t){var e=Object(t);return void 0!==e[o]||"@@iterator"in e||n.hasOwnProperty(i(e))}}});