webpackJsonp([68],{TMfh:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("IvJb"),i=a("C331"),n=a("Do79");s.a.component("c-reserveTable",n.a);s.a.component("c-reserveTable",n.a);var l={data:function(){return{showEditModal:!1,showSettingModal:!1,weekTime:{},schoolData:[],selectCampus:"",schedulingType:"RESERVATION",isShowSchedulingType:!1,isUpdateNext:!1,consultantArr:[],settingData:{schedulingId:"",startTime:"",endTime:"",timeList:[{timeId:"timeId",timeQuantumStart:"",timeQuantumEnd:""}]},schedulingSettingType:"add",schedulingTypeData:[{id:"RESERVATION",label:"预约"},{id:"ARRANGE_TALKS",label:"首次访谈"}],consultantId:"",schedulingData:[],selectedTabelCells:[],tableData:[],timeQuantumArray:[],consultantInfoArr:[],dataTimeId:"",changeDate:"",lang:"zh-cn"}},computed:{translate:function(){return Object(i.e)(this.lang).employmentUnitManage}},watch:{selectCampus:{deep:!0,handler:function(){this._initTableData(this.weekTime)}},schedulingType:{deep:!0,handler:function(){this._initTableData(this.weekTime)}}},created:function(){var e=this,t=localStorage.getItem("lang");Object(i.e)(t)&&(this.lang=t),Object(i.c)({url:"/api/mentality/scheduling/campus",dataType:"json",type:"get",success:function(t){t.state?(e.schoolData=t.data,e.selectCampus=t.data[0].value):e.$toast(t.message)}}),Object(i.c)({url:"/api/mentality/config",dataType:"json",type:"get",success:function(t){t.state?t.data&&(e.isShowSchedulingType=t.data.interviewFirst):e.$toast(t.message)}}),this._getWeekTime()},methods:{_getWeekTime:function(e){e&&(this.weekTime=e,this.selectCampus&&this._initTableData(e))},_initTableData:function(e){var t=this;Object(i.c)({url:"/api/mentality/scheduling/teachers/page/week?campus="+this.selectCampus+"&type="+this.schedulingType+"&dateStart="+e.dateStart+"&dateEnd="+e.dateEnd,dataType:"json",type:"get",success:function(e){if(e.state)if(e.data&&e.data.length>0){if(t.schedulingData=e.data,t.timeQuantumArray=[],e.data[0].setting)for(var a in e.data[0].setting.timeSetting){var s=e.data[0].setting.timeSetting[a];t.timeQuantumArray.push({id:s.id,timeQuantum:s.timeQuantumStart+"-"+s.timeQuantumEnd})}}else t.schedulingData=[],t.timeQuantumArray=[];else t.$toast(e.message)}})}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container",attrs:{id:"my-scheduling"}},[a("div",{staticClass:"scheduling-manage"},[a("c-reserveTable",{attrs:{tableData:e.schedulingData,isShowDateOfDay:!0,tableType:"check",timeQuantumArray:e.timeQuantumArray},on:{getWeekTime:e._getWeekTime,editConsultant:e._editConsultant}},[a("div",{staticClass:"campus-select",attrs:{slot:"header-select"},slot:"header-select"},[e.schoolData.length>0?a("div",{staticClass:"select-radio"},[a("label",{staticClass:"radio-text"},[e._v("校区")]),e._v(" "),a("span"),e._v(" "),a("div",{staticClass:"radio-area"},e._l(e.schoolData,function(t,s){return a("div",{key:s},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectCampus,expression:"selectCampus"}],attrs:{type:"radio",id:"col.id"},domProps:{value:t.value,checked:e._q(e.selectCampus,t.value)},on:{change:function(a){e.selectCampus=t.value}}}),e._v(" "),a("label",{staticClass:"campus-name",attrs:{for:"col.id"}},[e._v(e._s(t.label))])])}))]):e._e(),e._v(" "),e.isShowSchedulingType?a("div",{staticClass:"select-radio",staticStyle:{"margin-left":"19px"}},[a("label",{staticClass:"radio-text"},[e._v("排班类型")]),e._v(" "),a("span"),e._v(" "),a("div",{staticClass:"radio-area"},e._l(e.schedulingTypeData,function(t,s){return a("div",{key:s},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.schedulingType,expression:"schedulingType"}],attrs:{type:"radio",id:"col.id"},domProps:{value:t.id,checked:e._q(e.schedulingType,t.id)},on:{change:function(a){e.schedulingType=t.id}}}),e._v(" "),a("label",{staticClass:"campus-name",attrs:{for:"col.id"}},[e._v(e._s(t.label))])])}))]):e._e()]),e._v(" "),a("div",{staticClass:"body-slot",attrs:{slot:"body-slot"},slot:"body-slot"},[a("div",{staticClass:"pull-left"},[a("span",{staticClass:"time-tips"},[e._v(e._s(e.weekTime.weekStartTime)+"-"+e._s(e.weekTime.weekEndTime)+" 排班表")]),e._v(" "),a("span",[a("span",{staticClass:"morning-color"}),e._v(" "),a("span",{staticClass:"morning-name"},[e._v("上午")])]),e._v(" "),a("span",[a("span",{staticClass:"afternoon-color"}),e._v(" "),a("span",{staticClass:"afternoon-name"},[e._v("下午")])])])])])],1)])},staticRenderFns:[]};var d=a("C7Lr")(l,c,!1,function(e){a("iBi4")},null,null);t.default=d.exports},iBi4:function(e,t){}});