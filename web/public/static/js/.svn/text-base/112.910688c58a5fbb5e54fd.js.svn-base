webpackJsonp([112],{AjNI:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("IvJb"),i=e("C331"),o=e("lh7w");s.a.component("FlowSetManage",o.default);s.a.component("FlowSetManage",o.default);var l={props:{},created:function(){var t=this,a=localStorage.getItem("lang");Object(i.e)(a)&&(this.lang=a),this.columns=[{id:"name",title:this.translate.name,className:"text-left",hidden:!1,search:{type:"input",data:{placeholder:""}}},{id:"opt",title:this.translate.opt,className:"text-center",width:"210px",hidden:!1,formatter:function(a,e){return[{tag:"a",text:t.translate.edit,className:"opt-btn",callback:function(a,e){t.activityTypeName=a.name,t.flowId=a.flowId,t.showAddModal=!0,t.modalType=t.translate.edit,t.activityTypeId=a.id}},{tag:"a",text:t.translate.setActivityReviewProcess,className:"opt-btn",callback:function(a,e){t.flowId=a.flowId,t.activityTypeName=a.name,t.activityTypeId=a.id,t.miniRoutes="flowSetManage",t.$emit("fullScreen",!0)}},{tag:"a",text:t.translate.delete,className:"opt-btn",callback:function(a,e){confirm(t.translate.removeConfirmTip)&&Object(i.c)({url:"/api/sc/activities/types/"+a.id,dataType:"json",type:"delete",success:function(a){a.state?t.url=t.url.split("?")[0]+"?timestamp="+Object(i.a)():t.$toast(t.translate.removeFailedTip+":"+a.message)}})}}]}}]},data:function(){return{columns:[],type:"",url:"/table-data/sc/activities/types/pages",activityTypeName:"",activityTypeId:"",showAddModal:!1,modalType:"",isDisabled:!0,flowId:"",miniRoutes:"list",lang:"zh-cn"}},computed:{translate:function(){return Object(i.e)(this.lang).activityTypeManage}},watch:{},mounted:function(){},methods:{_showAddModal:function(){this.showAddModal=!0,this.modalType=this.translate.add,this.activityTypeName=""},_changeActivityType:function(){if(!this.activityTypeName)return this.$toast("分类名称不能为空"),!1;this.modalType===this.translate.add?this._addActivityType():this.modalType===this.translate.edit&&this._editActivityType()},_addActivityType:function(){var t=this;Object(i.c)({url:"/api/sc/activities/types",dataType:"json",type:"post",data:{name:this.activityTypeName,flowId:this.flowId},success:function(a){a.state?(t.showAddModal=!1,t.url=t.url.split("?")[0]+"?timestamp="+Object(i.a)()):t.$toast(a.message)}})},_editActivityType:function(){var t=this;Object(i.c)({url:"/api/sc/activities/types/"+this.activityTypeId,dataType:"json",type:"put",data:{name:this.activityTypeName},success:function(a){a.state?(t.showAddModal=!1,t.url=t.url.split("?")[0]+"?timestamp="+Object(i.a)()):t.$toast(a.message)}})},_setProcess:function(){this.miniRoutes="flowSetMange"},_backToPage:function(t){this.miniRoutes=t,this.$emit("fullScreen",!1)},_saveFlowInfo:function(t){var a=this,e="/api/sc/activities/types/"+this.activityTypeId+"/flowSetting";Object(i.c)({url:e,type:"put",data:t,success:function(t){t.state?(a.$toast(a.translate.saveSuccessTip2,0,"check"),a._backToPage("list")):a.$toast(t.message)}})}}},n={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"activity-type-manage-page"},[e("div",{directives:[{name:"show",rawName:"v-show",value:"list"===t.miniRoutes,expression:"miniRoutes === 'list'"}],staticClass:"activity-type-manage"},[e("div",{staticClass:"content text-center"},[e("v-table",{ref:"activityTypeTable",attrs:{title:t.translate.title,url:t.url,pagesize:"10",idField:"id",columns:t.columns,multiple:!1,order:!0,search:!1}},[e("div",{attrs:{slot:"btn-group",role:"group"},slot:"btn-group"},[e("div",{staticClass:"btn-group pull-right "},[e("button",{staticClass:"btn add-activityType btn-bgColor-style clearBtnBorder",attrs:{type:"button"},on:{click:t._showAddModal}},[e("i",{staticClass:"maticon pull-left",domProps:{innerHTML:t._s(t.icons("add"))}},[t._v("add")]),t._v(t._s(t.translate.add)+t._s(t.translate.activityType))])])])])],1),t._v(" "),e("v-modal",{staticClass:"activityType-modal",attrs:{show:t.showAddModal,effect:"fade",width:"446"}},[e("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[e("h5",{staticClass:"modal-title"},[t._v("\n          "+t._s(t.modalType)+t._s(t.translate.activityType)+"\n        ")])]),t._v(" "),e("div",{staticClass:"modal-body",attrs:{slot:"modal-body"},slot:"modal-body"},[e("div",{staticClass:"form-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.activityTypeName,expression:"activityTypeName"}],staticClass:"form-control search-input activityType-input",attrs:{type:"text",placeholder:t.translate.typeNamePlaceholder,maxlength:"50"},domProps:{value:t.activityTypeName},on:{input:function(a){a.target.composing||(t.activityTypeName=a.target.value)}}})])]),t._v(" "),e("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[e("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(a){t.showAddModal=!1}}},[t._v(t._s(t.translate.cancel))]),t._v(" "),e("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button"},on:{click:t._changeActivityType}},[t._v(t._s(t.translate.confirm))])])])],1),t._v(" "),"flowSetManage"===t.miniRoutes&&t.activityTypeId?e("FlowSetManage",{attrs:{type:"sc",appName:t.activityTypeName,appId:t.activityTypeId,flowId:t.flowId},on:{back:function(a){t._backToPage("list")},submit:t._saveFlowInfo}}):t._e()],1)},staticRenderFns:[]};var c=e("C7Lr")(l,n,!1,function(t){e("stMV")},null,null);a.default=c.exports},stMV:function(t,a){}});