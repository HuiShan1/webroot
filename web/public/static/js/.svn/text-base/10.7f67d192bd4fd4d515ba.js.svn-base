webpackJsonp([10],{gkyT:function(t,a){},jimW:function(t,a){},of2G:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("C331"),i={props:["userInfo"],data:function(){return{tableCheckedList:[],tableCheckedListAll:"",isPassOpinionBtn:!1,passOpinionLoading:!1,batchPassLoading:{pass:!1,noPass:!1},auditRuleForm:{audit:"",loading:!1,dialog:!1},auditRules:{audit:[{required:!0,message:"请输入不通过审核意见",trigger:"blur"}]},blackRuleForm:{reasons:"",loading:!1},blackRules:{reasons:[{required:!0,message:"请输入移入黑名单原因",trigger:"blur"}]},blacklistDialog:!1,unitInfoDetail:null,currentPage:"unit",currentPageTitle:"单位管理",unitManagementAuditRecordsList:[],unitManagementAuditRecordsListUrl:"",unitManagementAuditRecordsListColumns:[],blacklistReasons:"",blacklistVisible:!1,columns:[],tableData_url:"/table-data/employment/audit/getCompanyAuditBySearch"}},created:function(){this.initColumns()},watch:{blacklistDialog:function(t){t||this.resetForm("blacklistRuleForm")}},methods:{stateColor:function(t){var a={color:"",text:""};switch(t){case"0":a.color="#3E92FE",a.text="待审核";break;case"1":a.color="#727272",a.text="已通过";break;case"2":a.color="#EF7676",a.text="未通过";break;case"3":a.color="#727272",a.text="已撤回"}return a},wipeTimeYMD:function(t){if(t)return/\d{4}-\d{1,2}-\d{1,2}/g.exec(t)[0]},onBatchPass:function(t){var a=this;if(0!=this.tableCheckedList.length){var e=[];this.tableCheckedList.map(function(t){e.push(t.id)}),"yes"==t?(this.batchPassLoading.pass=!0,Object(s.e)({url:"/api/employment/audit/agreeCompanyAuditList",type:"put",data:{relationIds:e},success:function(t){t.state?(a.$message.success("批量通过成功"),a.tableData_url="/table-data/employment/audit/getCompanyAuditBySearch?timestamp="+Object(s.a)()):a.$message.error(t.message)}}).always(function(){a.batchPassLoading.pass=!1})):(this.batchPassLoading.noPass=!0,Object(s.e)({url:"/api/employment/audit/repulseCompanyAuditList",type:"put",data:{relationIds:e},success:function(t){t.state?(a.$message.success("批量不通过成功"),a.tableData_url="/table-data/employment/audit/getCompanyAuditBySearch?timestamp="+Object(s.a)()):a.$message.error(t.message)}}).always(function(){a.batchPassLoading.noPass=!1}))}else this.$message.error("请选择需要操作的待审核字段字段")},_tableChecked:function(t){var a=[];t.forEach(function(t){"0"==t.status&&a.push(t)}),this.tableCheckedListAll=t.length,this.tableCheckedList=a},getCompanyDraft:function(t){var a=this;Object(s.e)({url:"/api/employment/audit/getCompanyDraft",type:"get",data:{relationId:t},success:function(t){t.state?(a.unitInfoDetail=t.data,a.showPage("单位管理","unitInfoDetail")):a.$message.error(t.message)}})},blacklistSubmitForm:function(t){var a=this;this.$refs[t].validate(function(t){if(!t)return!1;a.blackRuleForm.loading=!0,Object(s.e)({url:"/api/employment/blackList/addCompany",type:"post",data:{companyId:a.unitInfoDetail.companyId,userId:a.unitInfoDetail.userId,reason:a.blackRuleForm.reasons},success:function(t){t.state?(a.resetForm("blacklistRuleForm"),a.blacklistDialog=!1,a.$message.success("移入黑名单成功")):a.$message.error(t.message)}}).always(function(){a.blackRuleForm.loading=!1})})},onUnitManagementAuditRecords:function(){var t=this;this.showPage("单位审核记录","unitAuditRecord"),this.unitManagementAuditRecordsListUrl="/table-data/employment/audit/getCompanyAuditByCompanyId?companyId="+this.unitInfoDetail.companyId,this.unitManagementAuditRecordsListColumns=[{id:"createTime",title:"提交时间",className:"text-left",width:130,hidden:!1},{id:"status",title:"审核状态",className:"text-left",width:90,hidden:!1},{id:"operatorName",title:"审核人",width:150,className:"text-left",hidden:!1},{id:"auditTime",title:"审核时间",hidden:!1,width:130},{id:"reason",title:"审核意见",className:"text-left",hidden:!1,width:130},{id:"opts",title:"操作",width:80,hidden:!1,options:[{tag:"a",text:"查看",callback:function(a,e){t.isPassOpinionBtn=!1,t.getCompanyDraft(a.relationId)}}]}]},onBack:function(){var t=this.currentPage;"unit"==t||("unitInfoDetail"==t?this.showPage("单位管理","unit"):"unitAuditRecord"==t&&this.showPage("单位管理","unitInfoDetail"))},showPage:function(t,a){this.currentPageTitle=t,this.currentPage=a},resetForm:function(t){this.$refs[t].resetFields()},onPassOpinion:function(){var t=this;this.passOpinionLoading=!0,Object(s.e)({url:"/api/employment/audit/agreeCompanyAudit?id="+this.unitInfoDetail.id,type:"put",success:function(a){a.state?(t.$message.success("已通过审核"),t.showPage("单位信息审核","unit")):t.$message.error(a.message)}}).always(function(){t.passOpinionLoading=!1})},noPassOpinionSure:function(t){var a=this;this.$refs[t].validate(function(t){if(!t)return!1;a.auditRuleForm.loading=!0,Object(s.e)({url:"/api/employment/audit/repulseCompanyAudit?relationId="+a.unitInfoDetail.id+"&reason="+a.auditRuleForm.audit,type:"put",success:function(t){t.state?(a.$message.success("已拒绝该公司审核"),a.resetForm("auditRuleForm"),a.auditRuleForm.dialog=!1,a.showPage("单位信息审核","unit")):a.$message.error(t.message)}}).always(function(){a.auditRuleForm.loading=!1})})},initColumns:function(){var t=this,a=this;this.columns=[{id:"companyName",title:"单位名称",className:"text-left",width:130,hidden:!1,search:{type:"input",data:{placeholer:"",autoFocus:!1}}},{id:"label",title:"单位标签",className:"text-left",width:150,hidden:!1,hover:!1,formatter:function(t){var a="";return t.label&&(a="<div style='font-size:12px;text-align:center;border-radius:13px;padding:0 11px;overflow: hidden;text-overflow: ellipsis;width:79px;height:28px;line-height:28px;color:#3E92FE;background:rgba(62,146,254,0.2);'>"+t.label+"</div>"),a}},{id:"contactPeople",title:"联系人",width:150,className:"text-left",hidden:!1},{id:"contactPhone",title:"手机号",hidden:!1,width:130},{id:"createTime",title:"提交时间",className:"text-left",hidden:!1,width:130},{id:"status",title:"状态",hidden:!1,hover:!1,width:130,search:{type:"select",data:{options:[{value:"",label:"全部"},{value:0,label:"待审核"},{value:1,label:"已通过"},{value:2,label:"未通过"}],optionsLabel:"label",optionsValue:"value"}},formatter:function(t){var e=a.stateColor(t.status);return"<div style='color:"+e.color+";display:flex;align-items:center;'><i style='display:block;width:8px;height:8px;border-radius:50%;background:"+e.color+";margin-right:6px;'></i>"+e.text+"</div>"}},{id:"reason",title:"审核意见",width:150,className:"text-left",hidden:!1},{id:"opts",title:"操作",width:80,hidden:!1,formatter:function(a){return"0"==a.status?[{tag:"a",text:"审核",callback:function(a,e){t.isPassOpinionBtn=!0,t.getCompanyDraft(a.id)}}]:[{tag:"a",text:"查看",callback:function(a,e){t.isPassOpinionBtn=!0,t.getCompanyDraft(a.id)}}]}}]}}},l={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"unitInformationAudit container-fluid",attrs:{id:"unitInformationAudit"}},["unit"==t.currentPage?e("div",{staticClass:"unitInfoList"},[e("div",{staticClass:"title"},[t._v("单位信息审核")]),t._v(" "),e("v-table",{attrs:{url:t.tableData_url,columns:t.columns,pagesize:"15",idField:"id",multiple:!0,order:!0,search:!0},on:{afterChecked:t._tableChecked}},[e("div",{staticClass:"pull-left",attrs:{slot:"btn-group"},slot:"btn-group"},[t.tableCheckedListAll?e("el-button",{staticClass:"operability-hint",attrs:{type:"text"}},[t._v("已选择"+t._s(t.tableCheckedListAll)+"项,其中可操作的有"+t._s(t.tableCheckedList.length)+"项")]):t._e(),t._v(" "),t.tableCheckedList.length?e("el-button",{attrs:{loading:t.batchPassLoading.pass,type:"text"},on:{click:function(a){return t.onBatchPass("yes")}}},[t._v("通过")]):t._e(),t._v(" "),t.tableCheckedList.length?e("el-button",{attrs:{loading:t.batchPassLoading.onPass,type:"text"},on:{click:function(a){return t.onBatchPass("no")}}},[t._v("不通过")]):t._e()],1)])],1):t._e(),t._v(" "),"unit"!=t.currentPage?e("div",{staticClass:"flex-between"},[e("el-button",{staticStyle:{color:"#666"},attrs:{type:"text",icon:"el-icon-back"},on:{click:t.onBack}},[t._v("返回")]),t._v(" "),"unitInfoDetail"==t.currentPage?e("div",{staticClass:"opt-btn"},[e("el-button",{attrs:{type:"text"},on:{click:function(a){t.blacklistDialog=!0}}},[t._v("移入黑名单")]),t._v(" "),e("el-button",{attrs:{type:"text"},on:{click:t.onUnitManagementAuditRecords}},[t._v("查看单位审核记录")])],1):t._e()],1):t._e(),t._v(" "),"unitInfoDetail"==t.currentPage&&t.unitInfoDetail?e("div",{staticClass:"unitInfo-detail"},[e("div",{staticClass:"unitdetail-content"},[e("div",{staticClass:"audit-item"},[e("div",[e("span",[t._v("审核状态：")]),t._v(" "),e("span",{style:"color:"+t.stateColor(t.unitInfoDetail.status).color},[t._v(t._s(t.unitInfoDetail.statusName))])]),t._v(" "),e("div",[e("span",[t._v("审核人：")]),t._v(" "),e("span",{staticClass:"name"},[t._v(t._s(t.unitInfoDetail.auditName))])]),t._v(" "),e("div",[e("span",[t._v("审核时间：")]),t._v(" "),e("span",{staticClass:"time"},[t._v(t._s(t.unitInfoDetail.auditTime))])])]),t._v(" "),e("div",{staticClass:"audit-options ellipsis"},[e("span",[t._v("审核意见：")]),t._v(" "),e("span",[t._v(t._s(t.unitInfoDetail.auditAdvice))])]),t._v(" "),e("div",{staticClass:"detail"},[e("div",{staticClass:"detail-item row"},[e("span",{staticClass:"name col-md-4"},[t._v("单位名称：")]),t._v(" "),e("span",{staticClass:"value col-md-8"},[t._v(t._s(t.unitInfoDetail.companyName))])]),t._v(" "),e("div",{staticClass:"detail-item row"},[e("span",{staticClass:"name col-md-4"},[t._v("统一社会信用代码：")]),t._v(" "),e("span",{staticClass:"value col-md-8"},[t._v(t._s(t.unitInfoDetail.companyCode))])]),t._v(" "),e("div",{staticClass:"detail-item row"},[e("span",{staticClass:"name col-md-4"},[t._v("单位所在地：")]),t._v(" "),e("span",{staticClass:"value col-md-8"},[t._v(t._s(t.unitInfoDetail.address))])]),t._v(" "),e("div",{staticClass:"detail-item row"},[e("span",{staticClass:"name col-md-4"},[t._v("单位地址：")]),t._v(" "),e("span",{staticClass:"value col-md-8"},[t._v(t._s(t.unitInfoDetail.addressDetail))])]),t._v(" "),e("div",{staticClass:"detail-item row"},[e("span",{staticClass:"name col-md-4"},[t._v("所属行业：")]),t._v(" "),e("span",{staticClass:"value col-md-8"},[t._v(t._s(t.unitInfoDetail.industry))])]),t._v(" "),e("div",{staticClass:"detail-item row"},[e("span",{staticClass:"name col-md-4"},[t._v("单位规模：")]),t._v(" "),e("span",{staticClass:"value col-md-8"},[t._v(t._s(t.unitInfoDetail.scale))])]),t._v(" "),e("div",{staticClass:"detail-item row"},[e("span",{staticClass:"name col-md-4"},[t._v("单位性质：")]),t._v(" "),e("span",{staticClass:"value col-md-8"},[t._v(t._s(t.unitInfoDetail.property))])]),t._v(" "),e("div",{staticClass:"detail-item row"},[e("span",{staticClass:"name col-md-4"},[t._v("单位标签：")]),t._v(" "),e("span",{staticClass:"value col-md-8"},[t._v(t._s(t.unitInfoDetail.label))])]),t._v(" "),e("div",{staticClass:"detail-item row"},[e("span",{staticClass:"name col-md-4"},[t._v("联系人：")]),t._v(" "),e("span",{staticClass:"value col-md-8"},[t._v(t._s(t.unitInfoDetail.contactPeople))])]),t._v(" "),e("div",{staticClass:"detail-item row"},[e("span",{staticClass:"name col-md-4"},[t._v("手机号：")]),t._v(" "),e("span",{staticClass:"value col-md-8"},[t._v(t._s(t.unitInfoDetail.contactPhone))])]),t._v(" "),e("div",{staticClass:"detail-item row"},[e("span",{staticClass:"name col-md-4"},[t._v("单位电话：")]),t._v(" "),e("span",{staticClass:"value col-md-8"},[t._v(t._s(t.unitInfoDetail.officePhone))])]),t._v(" "),e("div",{staticClass:"detail-item row"},[e("span",{staticClass:"name col-md-4"},[t._v("单位电子邮箱：")]),t._v(" "),e("span",{staticClass:"value col-md-8"},[t._v(t._s(t.unitInfoDetail.mailAddress))])]),t._v(" "),e("div",{staticClass:"detail-item row"},[e("span",{staticClass:"name col-md-4"},[t._v("单位传真：")]),t._v(" "),e("span",{staticClass:"value col-md-8"},[t._v(t._s(t.unitInfoDetail.fax))])]),t._v(" "),e("div",{staticClass:"detail-item row"},[e("span",{staticClass:"name col-md-4"},[t._v("单位邮编：")]),t._v(" "),e("span",{staticClass:"value col-md-8"},[t._v(t._s(t.unitInfoDetail.postcode))])]),t._v(" "),e("div",{staticClass:"detail-item row"},[e("span",{staticClass:"name col-md-4"},[t._v("单位网址：")]),t._v(" "),e("span",{staticClass:"value col-md-8"},[t._v(t._s(t.unitInfoDetail.companyUrl))])]),t._v(" "),e("div",{staticClass:"detail-item row"},[e("span",{staticClass:"name col-md-4"},[t._v("单位介绍：")]),t._v(" "),e("span",{staticClass:"value col-md-8"},[t._v(t._s(t.unitInfoDetail.summary))])]),t._v(" "),e("div",{staticClass:"detail-item row"},[e("span",{staticClass:"name col-md-4"},[t._v("发票抬头：")]),t._v(" "),e("span",{staticClass:"value col-md-8"},[t._v(t._s(t.unitInfoDetail.invoiceTitle))])]),t._v(" "),e("div",{staticClass:"detail-item row"},[e("span",{staticClass:"name col-md-4"},[t._v("纳税人识别号：")]),t._v(" "),e("span",{staticClass:"value col-md-8"},[t._v(t._s(t.unitInfoDetail.taxpayerNumber))])]),t._v(" "),e("div",{staticClass:"detail-item row"},[e("span",{staticClass:"name col-md-4"},[t._v("公司法人代表：")]),t._v(" "),e("span",{staticClass:"value col-md-8"},[t._v(t._s(t.unitInfoDetail.companyRepresentative))])]),t._v(" "),e("div",{staticClass:"detail-item row"},[e("span",{staticClass:"name col-md-4"},[t._v("注册资金：")]),t._v(" "),e("span",{staticClass:"value col-md-8"},[t._v(t._s(t.unitInfoDetail.registeredCapital))])]),t._v(" "),e("div",{staticClass:"detail-item row"},[e("span",{staticClass:"name col-md-4"},[t._v("单位成立日期：")]),t._v(" "),e("span",{staticClass:"value col-md-8"},[t._v(t._s(t.wipeTimeYMD(t.unitInfoDetail.companyCreateTime)))])]),t._v(" "),e("div",{staticClass:"detail-item row"},[e("span",{staticClass:"name col-md-4"},[t._v("营业执照：")]),t._v(" "),e("div",{staticClass:"upload"},[e("div",{staticClass:"avatar-uploader"},[t.unitInfoDetail.license?e("img",{staticClass:"upload-template-license",attrs:{src:"/upload/storage/images/"+t.unitInfoDetail.license,alt:""}}):t._e()])])]),t._v(" "),e("div",{staticClass:"detail-item row"},[e("span",{staticClass:"name col-md-4"},[t._v("营业执照到期时间：")]),t._v(" "),e("span",{staticClass:"value col-md-8"},[t._v(t._s(0==t.unitInfoDetail.isLong?t.wipeTimeYMD(t.unitInfoDetail.licenseTime):"长期"))])])]),t._v(" "),t.isPassOpinionBtn&&"0"==t.unitInfoDetail.status?e("div",{staticClass:"custom-btns"},[e("el-button",{staticClass:"custom",attrs:{plain:""},on:{click:function(a){t.auditRuleForm.dialog=!0}}},[t._v("不通过")]),t._v(" "),e("el-button",{staticClass:"custom",attrs:{loading:t.passOpinionLoading,type:"primary"},on:{click:t.onPassOpinion}},[t._v("通过")])],1):t._e()])]):t._e(),t._v(" "),e("el-dialog",{attrs:{close:"blacklist-dialog",visible:t.blacklistDialog},on:{"update:visible":function(a){t.blacklistDialog=a}}},[e("div",{staticClass:"blacklist-dialog-title",attrs:{slot:"title"},slot:"title"},[t._v("\n      将\n      "),t.unitInfoDetail&&t.unitInfoDetail.companyName?e("span",{staticClass:"company"},[t._v(t._s(t.unitInfoDetail.companyName))]):t._e(),t._v(" 移入黑名单\n    ")]),t._v(" "),e("el-form",{ref:"blacklistRuleForm",staticClass:"demo-ruleForm",attrs:{model:t.blackRuleForm,rules:t.blackRules,"label-width":"60px"}},[e("el-form-item",{attrs:{label:"原因",prop:"reasons"}},[e("el-input",{attrs:{type:"textarea",rows:"5",placeholder:"请输入移入黑名单原因",resize:"none"},model:{value:t.blackRuleForm.reasons,callback:function(a){t.$set(t.blackRuleForm,"reasons",a)},expression:"blackRuleForm.reasons"}})],1)],1),t._v(" "),e("div",{staticClass:"dialog-content"},[e("p",[t._v("注意:")]),t._v(" "),e("p",[t._v("1、移入黑名单后本条申请自动设置为不通过")]),t._v(" "),e("p",[t._v("2、单位可以通过申诉向管理提出恢复申请")])]),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{loading:t.blackRuleForm.loading,type:"primary"},on:{click:function(a){return t.blacklistSubmitForm("blacklistRuleForm")}}},[t._v("移入黑名单")]),t._v(" "),e("el-button",{on:{click:function(a){t.blacklistDialog=!1}}},[t._v("取 消")])],1)],1),t._v(" "),"unitAuditRecord"==t.currentPage?e("div",[e("v-table",{attrs:{url:t.unitManagementAuditRecordsListUrl,columns:t.unitManagementAuditRecordsListColumns,pagesize:"15",idField:"id",multiple:!1,order:!0}})],1):t._e(),t._v(" "),e("el-dialog",{attrs:{close:"blacklist-dialog",title:"不通过审核原因",visible:t.auditRuleForm.dialog},on:{"update:visible":function(a){return t.$set(t.auditRuleForm,"dialog",a)}}},[e("el-form",{ref:"auditRuleForm",staticClass:"demo-ruleForm",attrs:{model:t.auditRuleForm,rules:t.auditRules}},[e("el-form-item",{attrs:{prop:"audit"}},[e("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",rows:"5",placeholder:"请填写不通过审核意见，便于单位修改申请信息",resize:"none"},model:{value:t.auditRuleForm.audit,callback:function(a){t.$set(t.auditRuleForm,"audit",a)},expression:"auditRuleForm.audit"}})],1)],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary",loading:t.auditRuleForm.loading},on:{click:function(a){return t.noPassOpinionSure("auditRuleForm")}}},[t._v("确定")]),t._v(" "),e("el-button",{attrs:{plain:""},on:{click:function(a){t.auditRuleForm.dialog=!1}}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var n=e("VU/8")(i,l,!1,function(t){e("gkyT"),e("jimW")},"data-v-4ee82118",null);a.default=n.exports}});