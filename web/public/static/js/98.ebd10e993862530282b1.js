webpackJsonp([98],{"Y+63":function(t,e,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=l("C331"),a=l("a/8i"),i=(a.default,{props:["userInfo"],data:function(){return{pageSize:10,collectListTotal:0,curPage:0,tableData_url:"/table-data/employment/collection/list",collectTitle:"我的收藏",toDetails:!1,collectList:[],collectedDetails:""}},components:{ApplayDetails:a.default},created:function(){this.getCollected()},watch:{curPage:function(){this.getCollected()}},methods:{getRouter:function(t){this.$parent.curRoute="/schoolResumepx"},handleCurrentChange:function(t){this.curPage=t-1},getCollected:function(){var t=this;Object(s.e)({url:this.tableData_url,type:"get",data:{pageSize:this.pageSize,pageIndex:this.curPage},success:function(e){e.state&&e.data&&(t.collectList=e.data,t.collectListTotal=e.total)}})},toCollectedDetails:function(t){this.collectTitle="收藏详情",this.toDetails=!0,t.id=t.relationId,this.collectedDetails=t},getInfoError:function(){this.toDetails=!1},setCollect:function(t){var e=this;this.userInfo||"STUDENT"!=this.userInfo.type||(this.$message.error("您还未登录或非学生,暂无权限申请职位"),this.$router.push("/employment/login"));var l;l="/api/employment/collection/cancelCollectByRelationId/"+t.relationId,Object(s.e)({url:l,type:"delete",success:function(t){t.state?(e.getCollected(),e.$message.success("取消收藏成功")):e.$message.error("取消收藏失败")}})}}}),o={render:function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{attrs:{id:"collect"}},[t.toDetails?l("el-button",{staticStyle:{color:"#666"},attrs:{type:"text",icon:"el-icon-back"},on:{click:function(e){t.toDetails=!1,t.collectTitle="我的收藏"}}},[t._v("返回")]):t._e(),t._v(" "),l("div",{staticClass:"top"},[l("h1",[t._v(t._s(t.collectTitle))])]),t._v(" "),t.toDetails?l("Applay-details",{attrs:{checkUserInfo:t.userInfo,recruitmentInfo:t.collectedDetails},on:{getRouter:t.getRouter,getInfoError:t.getInfoError}}):t._e(),t._v(" "),l("div",{directives:[{name:"show",rawName:"v-show",value:!t.toDetails,expression:"!toDetails"}]},[t.collectList.length?l("ul",{staticClass:"collectList"},t._l(t.collectList,function(e,s){return l("li",{key:s,staticClass:"item",on:{click:function(l){return t.toCollectedDetails(e)}}},[l("div",{staticClass:"left"},[l("div",[l("span",{staticClass:"job-name"},[t._v(t._s(e.positionName))]),t._v(" "),l("span",{staticClass:"job-price"},[t._v(t._s(e.salary))])]),t._v(" "),l("div",{staticClass:"job-address"},[t._v(t._s(e.workplace))])]),t._v(" "),l("div",{staticClass:"right"},[l("div",{staticClass:"normal"},[l("div",{staticClass:"job-company"},[t._v(t._s(e.companyName))]),t._v(" "),l("div",{staticClass:"job-time"},[t._v(t._s(e.collectionTime?e.collectionTime.split(" ")[0]:""))])]),t._v(" "),l("div",{staticClass:"hover"},[l("img",{staticClass:"like",attrs:{src:"/static/image/employment/like_active.png",alt:""},on:{click:function(l){return l.stopPropagation(),l.preventDefault(),t.setCollect(e)}}}),t._v(" "),l("span",[t._v("已收藏")]),t._v(" "),l("el-button",{staticClass:"apply-btn",attrs:{type:"primary"}},[t._v("申请这个职位")])],1)])])}),0):t._e(),t._v(" "),t.collectList.length?t._e():l("p",{staticClass:"noResult"},[t._v("\n      暂无收藏记录！\n    ")]),t._v(" "),l("div",{staticClass:"paginationBox"},[t.collectList.length?l("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":t.pageSize,total:t.collectListTotal},on:{"current-change":t.handleCurrentChange}}):t._e()],1)])],1)},staticRenderFns:[]};var c=l("C7Lr")(i,o,!1,function(t){l("zVK8")},"data-v-e7edd6a2",null);e.default=c.exports},zVK8:function(t,e){}});