webpackJsonp([101],{D1e4:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={components:{},data:function(){return{url:"/table-data/payment/allproject",schoolyearList:[{text:"2022",id:"2022"},{text:"2021",id:"2021"},{text:"2020",id:"2020"},{text:"2019",id:"2019"},{text:"2018",id:"2018"},{text:"2017",id:"2017"},{text:"2016",id:"2016"}]}},created:function(){this._initColumnsOfSearch()},methods:{_initColumnsOfSearch:function(){var t=this;this.columns=[{id:"year",title:"年份",width:120,className:"text-left",hidden:!1,formatter:function(t,e){return t.year},search:{type:"select",data:{options:t.schoolyearList,optionsLabel:"text",optionsValue:"id"}}},{id:"name",title:"批次",width:150,className:"text-left",hidden:!1,search:{type:"input"}},{id:"beginTime",title:"开始时间",width:150,className:"text-center",hidden:!1},{id:"endTime",title:"结束时间",width:150,className:"text-left",hidden:!1},{id:"opt",title:"操作",className:"text-left",width:150,hidden:!1,formatter:function(e,a){var s=[],l={tag:"a",text:"编辑",className:"opt-btn",callback:function(e,a){t.showeditNewItemModal=!0,t.iseditNewItem=!1,t.editNewItem.id=e.id,t.editNewItem.schoolyear=e.year,t.editNewItem.payItemName=e.name,t.editNewItem.paystartTime=e.beginTime,t.editNewItem.payendTime=e.endTime,t.editNewItem.amount=e.amount}},d={tag:"a",text:"删除",className:"opt-btn",callback:function(e,a){confirm("确定删除此项目吗？")&&sAjax({url:"/api/payment/checkamount?id="+e.id,dataType:"json",type:"get",success:function(a){a.data.okDelete?sAjax({url:"/api/payment/deleteproject?id="+e.id,dataType:"json",type:"delete",success:function(e){e.state?(t.url="/table-data/payment/allproject?timestamp="+(new Date).getTime(),t.toast("删除数据成功"),t.showAddClassModal=!1):t.toast("删除数据失败")}}):alert("已有人缴费，无法删除该项目!")}})}};return s.push(l),s.push(d),s}}]},createClass:function(){this.showAddClassModal=!0,this.addNewItem={college:"",schoolyear:"",grade:"",gradeId:"",level:"",levelId:"",payNum:"",payItemName:"",orderNumber:[],orderNumberId:[],createClass:"",classNumber:0,classText:""}}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid",attrs:{id:"enrollBatchManage-page"}},[a("div",{staticClass:"row text-center class-list-page"},[a("v-table",{ref:"enrollBatchManageTable",attrs:{url:t.url,pagesize:"10",idField:"id",columns:t.columns,order:!0,search:!0}},[a("div",{staticClass:"btn-group pull-right",attrs:{slot:"btn-group",role:"group"},slot:"btn-group"},[a("button",{staticClass:"btn btn-bgColor-style clearBtnBorder",attrs:{type:"button"},on:{click:function(e){return t.createClass()}}},[t._v("新增项目")])])])],1),t._v(" "),a("v-modal",{attrs:{show:t.showAddClassModal,effect:"fade",width:"500"}},[a("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("新增项目")])]),t._v(" "),t.showAddClassModal?a("div",{staticClass:"modal-body",attrs:{slot:"modal-body"},slot:"modal-body"},[a("div",{staticClass:"input-group addClass-input-group"},[a("label",{staticClass:"addClass-text"},[t._v("学年:")]),t._v(" "),a("v-select",{staticClass:"btn-block search-select",attrs:{options:t.collegeOptions.grades,"options-value":"id","options-label":"text",search:"","close-on-select":""},on:{afterSelected:t.addNewItemSchoolyearSelected},model:{value:t.addNewItem.schoolyear,callback:function(e){t.$set(t.addNewItem,"schoolyear",e)},expression:"addNewItem.schoolyear"}})],1),t._v(" "),a("div",{staticClass:"input-group addClass-input-group"},[a("label",{staticClass:"addClass-text"},[t._v("缴费项目名称:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.addNewItem.payItemName,expression:"addNewItem.payItemName"}],staticClass:"form-control search-input",attrs:{type:"text","aria-describedby":"basic-addClass-payItemName"},domProps:{value:t.addNewItem.payItemName},on:{input:function(e){e.target.composing||t.$set(t.addNewItem,"payItemName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group edit-class-group"},[a("label",{staticClass:"edit-class-text time-picker-label pull-left"},[t._v("开始时间:")]),t._v(" "),a("v-datepicker",{ref:"datepicker",staticClass:"btn-block time-picker",attrs:{format:"yyyy-MM-dd hh:ii",clearButton:!1,showTime:!1},on:{daySelected:t.startTimeSelected},model:{value:t.addNewItem.paystartTime,callback:function(e){t.$set(t.addNewItem,"paystartTime",e)},expression:"addNewItem.paystartTime"}})],1),t._v(" "),a("div",{staticClass:"form-group edit-class-group"},[a("label",{staticClass:"edit-class-text time-picker-label pull-left"},[t._v("结束时间:")]),t._v(" "),a("v-datepicker",{ref:"datepicker",staticClass:"btn-block time-picker",attrs:{format:"yyyy-MM-dd hh:ii",clearButton:!1,showTime:!1},on:{daySelected:t.endTimeSelected},model:{value:t.addNewItem.payendTime,callback:function(e){t.$set(t.addNewItem,"payendTime",e)},expression:"addNewItem.payendTime"}})],1),t._v(" "),a("div",{staticClass:"input-group addClass-input-group"},[a("label",{staticClass:"addClass-text"},[t._v("每人应缴费金额:")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.addNewItem.payItemNum,expression:"addNewItem.payItemNum"}],staticClass:"form-control search-input",attrs:{placeholder:"选填*请输入数字",type:"text","aria-describedby":"basic-addClass-payItemName"},domProps:{value:t.addNewItem.payItemNum},on:{input:function(e){e.target.composing||t.$set(t.addNewItem,"payItemNum",e.target.value)}}})])]):t._e(),t._v(" "),a("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.showAddClassModal=!1}}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){return t.insureAdd()}}},[t._v("确认")])])])],1)},staticRenderFns:[]};var d=a("Mz/3")(s,l,!1,function(t){a("GxHT")},"data-v-3692b4ea",null);e.default=d.exports},GxHT:function(t,e){}});