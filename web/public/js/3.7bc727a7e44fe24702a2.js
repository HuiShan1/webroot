webpackJsonp([3],{"2l/9":function(e,s){},FIvG:function(e,s){},tWvK:function(e,s,t){e.exports=t.p+"static/img/registerbg.06e3483.png"},vq26:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var o=t("C331"),i=t("Gme2"),a=t("8c0Y"),r=t("p/OS"),n=t.n(r),l=(i.a,a.a,{name:"employmentLogin",components:{EmHeader:i.a,EmUser:a.a},data:function(){return{schoolId:"",ixyLogin:!1,cas:!1,clickIxyLogin:!1,title:{name:"就业管理系统",url:"employmentPlatform"},pageType:2,formLogin:{username:"",password:""},formLoginIxy:{username:"",password:""},roleType:"student",ruleLogin:{username:[{required:!0,message:"请输入帐号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},isBlacklisted:!1,reason:{content:"123",date:"2019.04.22"},disabled:!1,disabled_userId:"",dialogVisible:!1,disabled_reason:{}}},created:function(){var e=this;this.schoolId=this.$route.params.schoolId,Object(o.d)({type:"get",url:"/system/config?sys=employment",success:function(s){s.state?(e.cas=s.data.cas,e.ixyLogin=s.data.ixyLogin):e.$message.error("error")}})},methods:{toRegister:function(){this.$router.push("/employment/register")},toForgetPsd:function(){this.$router.push("/employment/forget")},ixyLoginClick:function(){this.clickIxyLogin=!0},groupChange:function(){this.clickIxyLogin=!1},schoolLogin:function(){window.location.href=this.cas},ixySubmit:function(){var e=this,s=this,t=this.formLoginIxy.username,i=n.a.createHash("md5").update(this.formLoginIxy.password).digest("hex");Object(o.d)({url:"/users/certifications",type:"post",data:{userNo:t,password:i},success:function(e){s.closeWaiting(),e.state?location.href="/employment":s.$toast(e.message)},headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Authorization",Authorization:"schoolId="+s.schoolId}}).always(function(){e.$waiting.close()})},companyLogin:function(){var e=this,s=this;this.$refs.formLogin.validate(function(t){if(t){var i=s.formLogin.password;e.disabled=!1,Object(o.d)({type:"post",url:"/employment/certifications/loginCheck",data:{userMail:s.formLogin.username,userPassword:n.a.createHash("md5").update(i).digest("hex")},success:function(t){if(t.state){if("DISABLED"==t.data.userStatus)return e.disabled=!0,e.disabled_userId=t.data.id,e.$message.error("该账号已被禁用");s.$router.push("/employment/index")}else e.$message.error(t.message)}})}else e.$message.error("账号或密码不能为空")})},checkReason:function(){var e=this,s="/api/employment/blackList/getByMail?userId="+this.disabled_userId;Object(o.d)({url:s,type:"get",success:function(s){s.state&&(e.disabled_reason=s.data,e.dialogVisible=!0)}})},viewReason:function(){this.$createElement;this.$alert('<div style="height: 32px; line-height: 32px;"><span>原因：</span><span style="color: #F36D6D">'+this.reason.content+'</span></div><div style="height: 32px; line-height: 32px;"><span>时间：</span><span>'+this.reason.date+"</span></div>","",{confirmButtonText:"关闭",dangerouslyUseHTMLString:!0})}}}),c={render:function(){var e=this,s=e.$createElement,o=e._self._c||s;return o("div",[o("div",{staticClass:"header"},[o("em-header",{attrs:{title:e.title}},[o("em-user",{attrs:{slot:"top-nav",pageType:e.pageType},slot:"top-nav"})],1)],1),e._v(" "),o("div",{staticClass:"content"},[o("div",{staticClass:"employment-login",style:{backgroundImage:"url("+t("tWvK")+")"}},[o("div",{staticClass:"login-content"},[o("el-radio-group",{staticClass:"radio-content",on:{change:e.groupChange},model:{value:e.roleType,callback:function(s){e.roleType=s},expression:"roleType"}},[o("el-radio",{attrs:{label:"student"}},[e._v("学生登录")]),e._v(" "),o("el-radio",{attrs:{label:"teacher"}},[e._v("教师登录")]),e._v(" "),o("el-radio",{attrs:{label:"company"}},[e._v("单位登录")])],1),e._v(" "),"student"!==e.roleType&&"teacher"!==e.roleType||e.clickIxyLogin?"company"===e.roleType?o("div",[o("div",{staticClass:"login-form"},[o("el-form",{ref:"formLogin",attrs:{model:e.formLogin,rules:e.ruleLogin}},[o("el-form-item",{attrs:{prop:"username"}},[o("el-input",{attrs:{placeholder:"请输入帐号"},model:{value:e.formLogin.username,callback:function(s){e.$set(e.formLogin,"username",s)},expression:"formLogin.username"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"password"}},[o("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.formLogin.password,callback:function(s){e.$set(e.formLogin,"password",s)},expression:"formLogin.password"}})],1)],1)],1),e._v(" "),o("div",{staticClass:"link"},[o("div",{staticClass:"link-left"},[o("span",[e._v("还没有单位帐号？去")]),e._v(" "),o("span",{staticClass:"link-btn",on:{click:e.toRegister}},[e._v("注册")])]),e._v(" "),o("div",{staticClass:"link-right"},[o("span",{staticClass:"link-btn",on:{click:e.toForgetPsd}},[e._v("忘记密码？")])])]),e._v(" "),o("div",[o("el-button",{attrs:{type:"primary",round:""},on:{click:e.companyLogin}},[e._v("登录")])],1),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.disabled,expression:"disabled"}],staticClass:"errorMsg"},[e._v("您已被管理员拉入黑名单,若需申诉,请点击"),o("a",{on:{click:e.checkReason}},[e._v("<查看原因>")])])]):e._e():o("div",[o("div",{staticClass:"uia-btn"},[e.cas?o("el-button",{attrs:{type:"primary",round:""},on:{click:e.schoolLogin}},[e._v("统一身份认证接口")]):e._e(),e._v(" "),e.ixyLogin?o("el-button",{attrs:{type:"primary",round:""},on:{click:e.ixyLoginClick}},[e._v("学生工作平台登录")]):e._e()],1)]),e._v(" "),e.clickIxyLogin&&"company"!==e.roleType?o("div",[o("div",{staticClass:"login-form"},[o("el-form",{ref:"formLogin",attrs:{model:e.formLoginIxy,rules:e.ruleLogin}},[o("el-form-item",{attrs:{prop:"username"}},[o("el-input",{attrs:{placeholder:"请输入帐号"},model:{value:e.formLoginIxy.username,callback:function(s){e.$set(e.formLoginIxy,"username",s)},expression:"formLoginIxy.username"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"password"}},[o("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.formLoginIxy.password,callback:function(s){e.$set(e.formLoginIxy,"password",s)},expression:"formLoginIxy.password"}})],1)],1)],1),e._v(" "),o("div",[o("el-button",{attrs:{type:"primary",round:""},on:{click:e.ixySubmit}},[e._v("登录")])],1)]):e._e()],1)])]),e._v(" "),o("el-dialog",{staticClass:"error_dialog",attrs:{visible:e.dialogVisible,width:"300px",center:""},on:{"update:visible":function(s){e.dialogVisible=s}}},[o("p",{staticClass:"errorTips"},[o("span",[e._v("原因:")]),o("i",[e._v(e._s(e.disabled_reason.reason))])]),e._v(" "),o("p",[o("span",[e._v("时间：")]),o("i",[e._v(e._s(e.disabled_reason.createTime))])])])],1)},staticRenderFns:[]};var d=t("Mz/3")(l,c,!1,function(e){t("2l/9"),t("FIvG")},"data-v-c913460a",null);s.default=d.exports}});