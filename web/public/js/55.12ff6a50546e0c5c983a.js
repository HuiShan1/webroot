webpackJsonp([55],{SHLu:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("C331"),o=a("4Lfr"),l=(o.default,{data:function(){return{cur_page:"tablePage",from_page:"tablePage",columns:[],tableData_url:"/table-data/partyBuild/organizations/psge/collges?college=校级",selectList:[{name:"英语学院",id:1},{name:"软件学院",id:2}],selectModel:"",tableData:[{college:"学院",job:"书记",name:"xxxx",member:5},{college:"学院2",job:"书记2",name:"xxxx2",member:5},{college:"学院3",job:"书记3",name:"xxxx3",member:5}],showTypeModal:!1,consultantTypeData:[{value:"addSingle",label:"单个新增"},{value:"addGroup",label:"批量新增"}],consultantType:"",showSingleModal:!1,singleAdd_form:{partyName:""},partyJob:[],partyJob_selected:"",importPage:!1,importParams:{parentPageTitle:"",downloadTemplateUrl:"",downloadErrorTemplateUrl:"",checkTemplateUrl:"",templateName:"批量新增党组织",importBtnType:null}}},methods:{_selectConsultantType:function(t){this.consultantType=t.value},selectType_cancle:function(){this.consultantType="",this.showTypeModal=!1},sumbitTypeModal:function(t){var e=this;if(!this.consultantType)return this.$toast("请先选择新增组织类型");this.showTypeModal=!1,"addSingle"===t?(this.showSingleModal=!0,Object(s.d)({url:"/api/system/dicts?dictType=党支部职务",dataType:"json",type:"get",success:function(t){t.state?e.partyJob=t.data:e.$toast(t.message)}})):(this.cur_page="importPage",this.from_page="tablePage",this.importPage=!0,"tablePage"===this.from_page&&(this.importParams.parentPageTitle="党组织管理"))},selectSingle_cancle:function(){this.showSingleModal=!1,this.singleAdd_form.partyName="",this.partyJob_selected=""},submitSingle:function(){if(!this.singleAdd_form.partyName)return this.$toast("党组织名称不能为空");if(!this.partyJob_selected)return this.$toast("请选择职务");this.singleAdd_form.partyName,this.partyJob_selected},afterSelected:function(t){this.partyJob_selected=t.value},importPageBack:function(){this.importPage=!1,this.cur_page=this.from_page},get_changeCurPage:function(t){this.cur_page=t.cur_page,this.importParams.parentPageTitle=t.title,this.importParams.templateName="党组织名单导入",this.from_page=t.from_page,this.importPage=!0}},components:{memberDetails:o.default},created:function(){var t=this;this.columns=[{id:"college",title:"组织名称",className:"text-left",width:130,hidden:!1},{id:"job",title:"党支部职位",className:"text-left",width:150,hidden:!1},{id:"name",title:"党支部姓名",width:150,className:"text-left",hidden:!1},{id:"member1",title:"组织成员数",className:"text-left",hidden:!1,width:130,formatter:function(t){return t.member}},{id:"opt",className:"text-left",title:"操作",width:50,hidden:!1,formatter:function(){return[{tag:"a",text:"党组织成员",className:"opt-btn",callback:function(e,a){t.cur_page="memberDetails"}},{tag:"a",text:"删除",className:"opt-btn",callback:function(e,a){window.confirm("确定删除吗？")&&(t.tableData.splice(a,1),t.$toast("删除成功"))}}]}}]},mounted:function(){}}),i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid",attrs:{id:"party-building-manage"}},[a("v-table",{directives:[{name:"show",rawName:"v-show",value:"tablePage"===t.cur_page,expression:"cur_page === 'tablePage'"}],attrs:{columns:t.columns,url:t.tableData_url,rows:t.tableData,order:"true",multiple:!0}},[a("div",{attrs:{slot:"btn-group",role:"group"},slot:"btn-group"},[a("div",{staticClass:"btn-group pull-left"},[a("v-select",{attrs:{options:t.selectList,optionsLabel:"name",optionsValue:"id"},model:{value:t.selectModel,callback:function(e){t.selectModel=e},expression:"selectModel"}})],1),t._v(" "),a("div",{staticClass:"btn-group pull-right"},[a("button",{staticClass:"btn add clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.showTypeModal=!0}}},[t._v("新增组织")]),t._v(" "),a("button",{staticClass:"btn add clearBtnBorder",attrs:{type:"button"}},[t._v("导出")])])])]),t._v(" "),a("v-import",t._b({directives:[{name:"show",rawName:"v-show",value:t.importPage,expression:"importPage"}],on:{backParentPage:t.importPageBack}},"v-import",t.importParams,!1)),t._v(" "),a("memberDetails"==t.cur_page?"memberDetails":"",{tag:"component",attrs:{cur_page:t.cur_page},on:{emit_changeCurPage:t.get_changeCurPage}}),t._v(" "),a("v-modal",{attrs:{show:t.showTypeModal,effect:"fade",width:"400"}},[a("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("\n          选择新增方式\n      ")])]),t._v(" "),a("div",{staticClass:"modal-body",attrs:{slot:"modal-body"},slot:"modal-body"},[a("div",{staticClass:"info-item"},[a("div",{staticClass:"info-options"},t._l(t.consultantTypeData,function(e,s){return a("span",{key:s,on:{click:function(a){return t._selectConsultantType(e)}}},[a("i",{staticClass:"maticon",domProps:{innerHTML:t._s(t.icons(t.consultantType===e.value?"radio_button_checked":"radio_button_unchecked"))}}),t._v(t._s(e.label)+"\n          ")])}),0)])]),t._v(" "),a("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:t.selectType_cancle}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){return t.sumbitTypeModal(t.consultantType)}}},[t._v("确定")])])]),t._v(" "),a("v-modal",{attrs:{show:t.showSingleModal,effect:"fade",width:"400"}},[a("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("\n          单个新增\n      ")])]),t._v(" "),a("div",{staticClass:"modal-body",attrs:{slot:"modal-body"},slot:"modal-body"},[a("div",{staticClass:"modal-search-user "},[a("label",{staticClass:"partyName",attrs:{for:"partyName"}},[t._v("党组织名称")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.singleAdd_form.partyName,expression:"singleAdd_form.partyName"}],staticClass:"form-control form-input",attrs:{type:"text",placeholder:"党组织名称",id:"partyName"},domProps:{value:t.singleAdd_form.partyName},on:{input:function(e){e.target.composing||t.$set(t.singleAdd_form,"partyName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"modal-select"},[a("label",{staticClass:"partyName",attrs:{for:"singleAdd_select"}},[t._v("党支部书记")]),t._v(" "),a("v-select",{attrs:{value:t.partyJob_selected,options:t.partyJob,optionsLabel:"label",optionsValue:"value"},on:{afterSelected:function(e){return t.afterSelected(e)}}})],1),t._v(" "),a("div",{staticClass:"party_search"},[a("detect",{attrs:{placeholder:"党组织名称",id:"searchPartyName"}})],1)]),t._v(" "),a("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:t.selectSingle_cancle}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button"},on:{click:t.submitSingle}},[t._v("确定")])])])],1)},staticRenderFns:[]};var r=a("Mz/3")(l,i,!1,function(t){a("oSKr"),a("XLqq")},"data-v-28bb0e37",null);e.default=r.exports},XLqq:function(t,e){},oSKr:function(t,e){}});